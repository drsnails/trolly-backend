{"version":3,"sources":["cmps/MainCmps/UserPreview.jsx","services/httpService.js","services/tripService.js","store/actions/tripActions.js","store/actions/modalActions.js","services/userService.js","cmps/MainCmps/MainNavBar.jsx","store/actions/userActions.js","pages/About.jsx","services/utils.js","store/actions/msgActions.js","cmps/MainCmps/ErrorMsg.jsx","cmps/Home/AddTrip.jsx","cmps/MainCmps/GooglePlaces.jsx","services/reviewService.js","store/actions/reviewActions.js","cmps/Home/TripPreview.jsx","cmps/Home/TripSlider.jsx","cmps/Home/UserFlow.jsx","pages/HomePage.jsx","cmps/Home/TripFilter.jsx","cmps/Home/TripList.jsx","pages/TripStock.jsx","pages/Login.jsx","pages/Signup.jsx","services/socketService.js","pages/LoginSignupPage.jsx","services/eventBusService.js","services/dndItems.js","cmps/TripAssembly/ActivitiePreview.jsx","cmps/TripAssembly/OpenDaySlot.jsx","cmps/TripAssembly/DayActivities.jsx","cmps/TripAssembly/DayTimeLine.jsx","cmps/TripAssembly/DestNamePrev.jsx","cmps/TripAssembly/DestinationsHeader.jsx","cmps/TripAssembly/TripAssembly.jsx","cmps/TripApp/MemberPreview.jsx","cmps/TripRoute/AddDestiantion.jsx","cmps/TripRoute/WeekPreview.jsx","cmps/TripRoute/RouteCalendar.jsx","cmps/TripRoute/RouteTimeLinePreview.jsx","cmps/TripRoute/RouteTimeLine.jsx","cmps/TripRoute/TripRoute.jsx","cmps/TripApp/Chat.jsx","cmps/MainCmps/Map.jsx","pages/TripApp.jsx","pages/UserTrips.jsx","cmps/TripAssembly/EditActivity.jsx","cmps/TripAssembly/PrevEditActivity.jsx","cmps/tripReviews/AddReview.jsx","cmps/MainCmps/LongText.jsx","cmps/tripReviews/ReviewPreview.jsx","cmps/tripReviews/ReviewList.jsx","cmps/tripReviews/TripReviews.jsx","cmps/MainCmps/AddMember.jsx","cmps/MainCmps/AlertUser.jsx","cmps/MainCmps/NotificationMsg.jsx","cmps/MainCmps/Modal.jsx","cmps/MainCmps/Loader.jsx","cmps/MainCmps/Footer.jsx","App.jsx","serviceWorker.js","store/reducers/modalReducer.js","store/reducers/msgReducer.js","store/reducers/reviewReducer.js","store/reducers/tripReducer.js","store/reducers/userReducer.js","store/store.js","index.js"],"names":["UserPreview","state","expand","toggleExpand","setState","Fragment","className","src","this","props","user","imgUrl","alt","username","onClick","logout","closemainNavbar","Component","axios","Axios","create","withCredentials","endpoint","data","ajax","a","method","url","res","console","log","dir","tripService","query","getById","remove","tripId","httpService","save","trip","_id","filterBy","name","queryStr","loadTrip","flag","dispatch","type","Promise","resolve","reject","setTimeout","tripLoad","loadTrips","trips","addTrip","newTrip","showModal","cmp","closeModal","userService","login","signup","getUsers","userId","update","userCred","_handleLogin","sessionStorage","clear","setItem","JSON","stringify","window","_MainNavBar","navBar","isNavbarOpen","backgroundChanged","path","location","pathname","match","pageYOffset","openMainNavbar","addEventListener","prevProps","prevState","resetTrip","removeEventListener","to","usersData","loggedInUser","mapDispatchToProps","MainNavBar","connect","userReducer","withRouter","About","utils","makeId","length","txt","possible","i","charAt","Math","floor","random","calculateDays","start","end","Date","difference","getTime","ceil","createMat","cols","rows","mat","j","pos","col","getDateDay","timeStamp","getDate","getWeekDay","time","getDay","getTimeDayStr","hours","_get2DigTime","getHours","minuets","getMinutes","getRandomPic","imgIdx","getRandomInt","imgs","getIsoTime","setMinutes","getTimezoneOffset","toISOString","slice","calculateDates","destinations","nextDay","dates","day","td","push","forEach","dest","getMonth","idx","setHours","getRandomLatLng","locations","lat","lng","setToHourMinuets","hour","min","getRandomName","num","max","showMsg","msg","closeMsg","_ErrorMsg","isShown","ErrorMsg","msgReducer","_AddTrip","tripName","currTrip","startDate","endDate","currStartDest","now","onSetDestinations","ev","preventDefault","newtrip","toLowerCase","id","onSaveDestination","activities","members","history","handleAddress","handleSelect","value","geocodeByAddress","results","getLatLng","latlng","handleInput","targetName","target","formatDate","date","getFullYear","minT","maxT","onSubmit","placeholder","required","autocomplete","onChange","htmlFor","minDate","selected","map","key","AddTrip","reviewService","add","reviewId","review","createdAt","addedReview","reviewActions","loadReviews","reviews","addReview","_TripPreview","handleClick","isMember","find","member","originId","getTripPrice","reduce","acc","currValue","price","amount","getReviewsAvg","rating","currRev","toFixed","err","addClass","days","style","pointerEvents","createdBy","TripPreview","reviewReducer","TripSlider","effect","slidesPerView","navigation","centeredSlides","delay","coverflowEffect","rotate","depth","pagination","clickable","el","img","UserFlow","fontWeight","SwiperCore","use","EffectCoverflow","Autoplay","EffectFade","Navigation","Pagination","Scrollbar","A11y","_HomePage","smooth","scroll","scrollIntoView","behavior","block","HomePage","tripReducer","TripFilter","mostOccDests","autoComplete","list","_TripList","TripList","_TripStock","getMostOccDests","concat","numOfOccMap","numOfOccArr","Object","entries","sort","dest1","dest2","destOcc","toLocaleUpperCase","substring","field","getTripsForDisplay","filter","includes","onsetFilter","TripStock","Login","email","password","userCreds","handleForm","React","Signup","handleChange","tripToRed","socketService","socket","setup","io","on","eventName","cb","off","emit","terminate","createSocketService","_LoginSignupPage","action","tripIdToRed","all","page","LoginSignupPage","eventBus","listener","callListener","detail","dispatchEvent","CustomEvent","ItemTypes","ActivitiePreview","act","onRemoveAct","onEdit","onOpenDetails","useDrag","item","collect","monitor","isDragging","drag","isFirstCol","isDayHeadClass","literalDay","isDrag","isLenOne","duration","findIndex","destination","ref","gridRow","row","OpenDaySlot","onDragMove","getRowIdx","useDrop","accept","drop","isOver","_isOver","DayActivities","newDay","reCalcPos","DayTimeLine","times","DestNamePrev","updateFreeDays","freeDays","_dest","display","gridColumn","DestinationsHeader","allDestinations","daysCount","gridTemplateColumns","TripAssembly","weekMat","tripLength","actsToDisplay","minDestinations","setChosenDay","linearDaysDates","getLinearTripDays","toLocaleDateString","currDayDate","openSideBar","initiateAssembly","windowWidth","innerWidth","loadWeekMat","getMinDestinations","WeeklyActsToDisplay","mapActsToDays","destTimeStamp","at","prevDate","currDate","currDayActs","getDaysInMonth","freeDay","showDaysName","actId","removeAct","_act","updateTripAct","isOccTimeSlot","activity","currStartTime","currEndTime","checkedStartTime","checkedEndTime","act1","act2","_map","sortDateMap","getCol","n","x","saveAct","newTime","getTimeFromIdx","destStart","desEnd","actCopy","currWeekDates","getWeekDests","linearDays","minDay","idxMaxDay","maxDay","destEnd","destsHeadLength","mapDestsToHeaderLength","destsNames","keys","destsLength","values","currDestName","currDest","tripStart","tripEnd","destinationsTimes","full","getDestsWithActs","allActs","isActInDests","onTogglePage","direction","pageCount","newPage","getDayNumOfAct","getTwoDig","numStr","setFullAssembly","setDestsMarkers","_removeBus","removeBus","startTime","_time","localDate","arrSorted","currDay","day1","day2","currActs","actPreviews","dayActs","renderDayActivities","MembersPreview","AddDestination","addDestOpen","toggleAddDestination","addDestination","WeekPreview","showDay","hotDog","RouteCalendar","calendarData","unshift","getFirstSunday","getLastSaturday","getDaysAround","generateCalendar","weekCmps","weeksCount","splice","renderTable","RouteTimeLinePreview","isLast","updateDestinations","letFire","RouteTimeLine","TripRoute","toggleChat","_Chat","from","msgs","isTyping","loadHistory","addMsg","newMsg","sendMsg","userTyping","msgHandleChange","trim","chatOpen","Chat","_MapContainer","bounds","markers","selectedPlace","activeMarker","showingInfoWindow","onMarkerClick","marker","e","onMapClicked","getMarkers","title","position","icon","containerStyle","width","height","google","maps","LatLngBounds","extend","LatLng","initiateMarkerABounds","BASE_IMG_URL","fitBounds","panTo","setZoom","zoom","onReady","mapProps","styles","featureType","elementType","stylers","saturation","color","lightness","visibility","weight","visible","MapContainer","GoogleApiWrapper","apiKey","_TripApp","settingsOpen","isSocketSetup","sideBar","getMarkersOfDests","destIdxToMove","moveToIdx","moveDifference","destTomove","constant","passDifference","constant2","_newTrip","toggleSettings","newDest","actToRender","setTrip","params","openSignup","removeTrip","sideBarClass","TripApp","_UserTrips","UserTrips","EditActivity","activitie","labels","notes","minTime","maxTime","handleTime","tzoffset","localISOTime","checked","onSaveAct","datetime","currency","getValidTime","destIdx","minTemp","_min","_max","maxDate","showTimeSelect","showFullMonthYearPicker","dateFormat","PrevEditActivity","isInputOpen","handleContentEditable","currentTarget","dataset","innerText","endTime","contentEditable","suppressContentEditableWarning","data-placeholder","spellCheck","data-name","onBlur","AddReview","reviewToAdd","content","elInput","createRef","onInputChange","inputType","onAddReview","setRating","val","current","focus","classToAdd","isReviewOpen","currRate","LongTxt","text","isLongTxtShown","onReadMore","ReviewPreview","stars","getStars","ReviewList","_TripReviews","onToggleExpend","TripReviews","AddMember","copied","emailToSend","mail","disabled","onCopy","appRoot","document","createElement","AlertUser","modal","padding","body","appendChild","NotificationMsg","_Modal","dynamicCmp","nameToDisplay","checkKey","curCmp","onKeyDown","onMouseDown","stopPropagation","Modal","modalReducer","_Loader","loader","Loader","loaderOn","Footer","App","component","exact","Boolean","hostname","initialState","selectedReview","localLoggedinUser","parse","users","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","DndProvider","backend","HTML5Backend","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.69caf7c1.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom'\n\n\nexport class UserPreview extends Component {\n    state = {\n        expand: false\n    }\n    toggleExpand = () => {\n        this.setState({ expand: !this.state.expand })\n    }\n\n    render() {\n        return (\n            <React.Fragment>\n                <div >\n                    <img className=\"user-preview\" src={this.props.user.imgUrl} alt={this.props.user.username + 'img'} onClick={this.toggleExpand}/>\n                    { <div className={`user-preview-expand flex column justify-around ${this.state.expand?'open':''}`} >\n                      \n                        <button className=\"styled-button logout\" onClick={()=>{this.props.logout(); this.props.closemainNavbar()}}>Logout</button>\n                    </div>}\n                </div>\n            </React.Fragment>\n\n        )\n    }\n}","import Axios from 'axios';\n\nconst BASE_URL = process.env.NODE_ENV === 'production'\n    ? '/api/'\n    : '//localhost:3030/api/'\n\n\nvar axios = Axios.create({\n    withCredentials: true\n});\n\nexport default {\n    get(endpoint, data) {\n        return ajax(endpoint, 'GET', data)\n    },\n    post(endpoint, data) {\n        return ajax(endpoint, 'POST', data)\n    },\n    put(endpoint, data) {\n        return ajax(endpoint, 'PUT', data)\n    },\n    delete(endpoint, data) {\n        return ajax(endpoint, 'DELETE', data)\n    }\n}\n\nasync function ajax(endpoint, method = 'get', data = null) {\n    try {\n        const res = await axios({\n            url: `${BASE_URL}${endpoint}`,\n            method,\n            data\n        })\n        return res.data;\n    } catch (err) {\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\n        console.dir(err);\n        throw err;\n    }\n}","\nimport httpService from './httpService'\n\nexport const tripService = {\n    query,\n    getById,\n    remove,\n    save\n}\n\n\n// const user = {\n//     _id: 'u101',\n//     fullName: 'Orly Amdadi',\n//     userName: 'orly@amdadi.com',\n//     password: 'tinkerbell',\n//     imgUrl: 'http://some-img',\n// }\n\nasync function query(filterBy={name:''}) {\n    const queryStr = `?search=${filterBy.name}`;\n    return httpService.get(`trip${queryStr}`);\n    \n}\n\n\nasync function getById(tripId) {\n    return httpService.get(`trip/${tripId}`,tripId)\n\n}\n\nfunction remove(tripId) {\n    return httpService.delete(`trip/${tripId}`)\n}\n\nfunction save(trip) {\n    if (trip._id) {\n        return httpService.put(`trip/${trip._id}`, trip)\n\n    } else {\n        return httpService.post('trip', trip)\n    }\n}","import { tripService } from \"../../services/tripService\"\n\nexport function loadTrip(tripId, flag) {\n    return async dispatch => {\n        try {\n            let trip = {}\n            if (flag) {\n                dispatch({ type: 'SET_LOADER' })\n                trip = await new Promise((resolve, reject) => {\n                    setTimeout(async () => {\n                        var tripLoad = await tripService.getById(tripId)\n                        resolve(tripLoad)\n                    }, 3500)\n                })\n                dispatch({ type: 'SET_TRIP', trip })\n            }\n            else {\n                trip = await tripService.getById(tripId)\n                dispatch({ type: 'SET_TRIP', trip })\n            }\n            return trip\n        } catch (err) {\n            console.log(err);\n        } finally {\n            dispatch({ type: 'CLOSE_LOADER' })\n\n        }\n\n    }\n}\nexport function setTrip(trip) {\n    \n    return async dispatch => {\n        dispatch({ type: 'SET_LOADER' })\n        dispatch({ type: 'SET_TRIP', trip })\n        dispatch({ type: 'CLOSE_LOADER' })\n        return trip\n\n    }\n}\n\nexport function resetTrip() {\n    const trip = null\n    return dispatch => {\n        dispatch({ type: 'SET_TRIP', trip })\n    }\n}\n\nexport function loadTrips(filterBy) {\n    return async dispatch => {\n        const trips = await tripService.query(filterBy)\n        dispatch({ type: 'SET_TRIPS', trips })\n    }\n}\n\n\nexport function addTripFast(trip) {\n    return async dispatch => {\n        try {\n            dispatch({ type: 'EDIT_TRIP', trip })\n            await tripService.save(trip)\n        }\n\n        catch (err) {\n        }\n    }\n}\n\nexport function addTrip(newTrip) {\n    return async dispatch => {\n        try {\n            \n            const trip = await tripService.save(newTrip)\n            // socketService.emit('tripToUpdate', trip);\n            // socketService.emit('tripToUpdate', newTrip);\n            dispatch({ type: 'EDIT_TRIP', trip })\n            return trip\n        }\n        catch (err) {\n        }\n    }\n}\nexport function removeTrip(tripId) {\n    return async dispatch => {\n        try {\n            const trip = await tripService.remove(tripId)\n            dispatch({ type: 'REMOVE_TRIP', trip })\n            return trip\n        }\n        catch (err) {\n        }\n    }\n}\n","\n\nexport function showModal(cmp,props) {\n    return dispatch => {\n        dispatch({type:'SET_MODAL',cmp,props})\n    }\n}\n\nexport function closeModal() {\n    return  dispatch => {\n        dispatch({ type: 'CLOSE_MODAL' })\n    }\n}","\nimport httpService from './httpService'\n\nexport const userService = {\n    login,\n    logout,\n    signup,\n    getUsers,\n    getById,\n    remove,\n    update\n}\n\nwindow.userService = userService;\n\nfunction getUsers() {\n    return httpService.get('user')\n}\n\nfunction getById(userId) {\n    return httpService.get(`user/${userId}`)\n}\nfunction remove(userId) {\n    return httpService.delete(`user/${userId}`)\n}\n\nfunction update(user) {\n    return httpService.put(`user/${user._id}`, user)\n}\n\nasync function login(userCred) {\n    const user = await httpService.post('auth/login', userCred)\n    if (user) return _handleLogin(user)\n    return Promise.reject('user not found'+userCred)\n}\nasync function signup(userCred) {\n    const user = await httpService.post('auth/signup', userCred)\n    return _handleLogin(user)\n}\nasync function logout() {\n    await httpService.post('auth/logout');\n    sessionStorage.clear();\n}\nfunction _handleLogin(user) {\n    sessionStorage.setItem('user', JSON.stringify(user))\n    return user;\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { NavLink, Link, withRouter } from 'react-router-dom'\n\nimport { UserPreview } from '../MainCmps/UserPreview'\n\nimport { resetTrip } from '../../store/actions/tripActions'\nimport { showModal } from '../../store/actions/modalActions'\nimport { logout } from '../../store/actions/userActions'\n\nclass _MainNavBar extends Component {\n    state = {\n        navBar: '',\n        isNavbarOpen: false\n    }\n\n    componentDidMount() {\n        const path = this.props.location.pathname.match('/')\n        const match = path && this.props.location.pathname === path[0]\n        if (!match) this.backgroundChanged()\n        window.addEventListener('scroll', this.backgroundChanged);\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.props.location.pathname !== prevProps.location.pathname) {\n            this.backgroundChanged()\n            if (this.props.location.pathname === '/') {\n                this.props.resetTrip()\n            }\n        }\n\n\n    }\n\n\n    componentWillUnmount() {\n        window.removeEventListener('scroll', this.backgroundChanged);\n    }\n\n\n    backgroundChanged = () => {\n        const path = this.props.location.pathname.match('/')\n        const match = path && this.props.location.pathname === path[0]\n        if (window.pageYOffset >= 80 || !match) {\n            this.setState({ navBar: true })\n        } else { this.setState({ navBar: false }) }\n    }\n\n    openMainNavbar = () => {\n        this.setState({ isNavbarOpen: !this.state.isNavbarOpen })\n    }\n\n    closemainNavbar =()=>{\n        this.setState({ isNavbarOpen: false })\n    }\n\n    render() {\n        return (\n            <React.Fragment>\n                <div className={'main-navbar flex justify-between align-center full  ' + (this.state.navBar ? 'navBar-background' : '')}>\n                    <Link to=\"/\" onClick={this.closemainNavbar}> <h1 className=\"logo\">Trolly</h1></Link>\n                    <div className={`flex justify-between main-navbar-links ${this.state.isNavbarOpen ? 'mainbar-open' : ''}`}>\n                        <Link to=\"/trip\"onClick={this.closemainNavbar} >Trips</Link>\n                        <NavLink to=\"/about\" onClick={this.closemainNavbar} >About</NavLink>\n                        {this.props.usersData.loggedInUser ? <UserPreview closemainNavbar={this.closemainNavbar} openMainNavbar={this.closemainNavbar} logout={this.props.logout} user={this.props.usersData.loggedInUser} /> : <div onClick={() => {this.props.showModal('login'); }}>Login</div>}\n                    </div>\n                    <button className=\"mobile-hamburger \" onClick={this.openMainNavbar}> </button>\n                </div>\n                <div className={`navbar-screen ${this.state.isNavbarOpen ? 'screen-open' : ''}`} onClick={this.closemainNavbar}></div>\n            </React.Fragment>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        usersData: state.userReducer\n\n    }\n}\n\nconst mapDispatchToProps = {\n    showModal,\n    logout,\n    resetTrip\n}\n\nexport const MainNavBar = connect(mapStateToProps, mapDispatchToProps)(withRouter(_MainNavBar));","import { userService } from '../../services/userService';\n\nexport function login(userCreds) {\n  return async dispatch => {\n    try{\n      const user = await userService.login(userCreds);\n      dispatch({ type: 'SET_USER', user });\n      return user\n    }catch(err){\n      console.log(err,'actionsuser');\n      dispatch({type:'LOGIN_PROBLEM'})\n    }\n  };\n}\nexport function signup(userCreds) {\n  return async dispatch => {\n    const user = await userService.signup(userCreds);\n    dispatch({ type: 'SET_USER', user });\n    return user\n  };\n}\nexport function logout() {\n  return async dispatch => {\n    await userService.logout();\n    dispatch({ type: 'SET_USER', user: null });\n  };\n}\n","import React from 'react'\n\nexport function About() {\n    return (\n        <div className=\"about-page\">\n            <div className=\"about-hero full \">\n                <h2>We love to travel the world so we made it easy to plan</h2>\n            </div>\n            <div className=\"about-main\">\n                <div className=\"about-desc\">\n\n                    <h3>About Trolly</h3>\n                    <p>Trolly enables users to quickly and easily explore a destinations offerings and create personalized sightseeing itineraries by utilizing local expertise and cutting-edge artificial intelligence. Drawing from a database of over 80,000 destinations Trolly makes trip planning easy, intuitive and enjoyable for over 25 million travelers a year.</p>\n\n                    <p>We use technologies that allow users to create and edit trip's plans with friends, chat and watch live changes</p>\n                </div>\n                <h3>About Us</h3>\n                <div className=\"flex about-us justify-evenly\">\n                    <div className=\"flex column\">\n                        <img src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600889656/opinion-sin-imagen_raxn0y.png\" alt=\"\" />\n                        <p>Junior Developer</p>\n                    </div>\n                    <div className=\"flex column\">\n                        <img src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600889656/opinion-sin-imagen_raxn0y.png\" alt=\"\" />\n                        <p>Junior Developer</p>\n                    </div>\n                    <div className=\"flex column\">\n                        <img src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600889656/opinion-sin-imagen_raxn0y.png\" alt=\"\" />\n                        <p>Junior Developer</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n","\n\n\nexport const utils = {\n    makeId,\n    calculateDays,\n    createMat,\n    getDateDay,\n    getWeekDay,\n    getTimeDayStr,\n    getRandomPic,\n    getRandomInt,\n    getIsoTime,\n    calculateDates,\n    getRandomLatLng,\n    setToHourMinuets,\n    getRandomName\n}\n\nfunction makeId(length = 5) {\n    var txt = '';\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    for (var i = 0; i < length; i++) {\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    return txt;\n}\n\nfunction calculateDays(start, end) {\n    end = new Date(end)\n    start = new Date(start)\n    var difference = end.getTime() - start.getTime();\n    var daysDifference = Math.ceil(difference / 999 / 60 / 60 / 24);\n    return daysDifference\n}\n\n\n\nfunction calculateDates(start, end, destinations) {\n    let nextDay = new Date(start)\n    let dates = [{ day: nextDay, td: { 'start': 0 } }]\n    while (nextDay.getDate() !== new Date(end).getDate()) {\n        nextDay = new Date(nextDay.getTime() + (1000 * 60 * 60 * 24))\n        dates.push({ day: nextDay, td: '' })\n        destinations.forEach(dest => {\n            if (dest.start.getDate() === nextDay.getDate() && dest.start.getMonth() === nextDay.getMonth()) {\n                dates[dates.length - 1].td = { ...dates[dates.length - 1].td, 'start': dest.idx }\n            } else if (dest.start < nextDay && nextDay.setHours(12) < dest.end.setHours(11)) {\n                dates[dates.length - 1].td = { ...dates[dates.length - 1].td, 'full': dest.idx }\n            } else if (dest.end.getDate() === nextDay.getDate() && dest.end.getMonth() === nextDay.getMonth()) {\n                dates[dates.length - 1].td = { ...dates[dates.length - 1].td, 'end': dest.idx }\n            }\n        })\n    }\n    return dates\n}\n\n\nfunction createMat(cols, rows) {\n    const mat = []\n    for (let i = 0; i < rows; i++) {\n        mat[i] = []\n        for (let j = 0; j < cols; j++) {\n            mat[i][j] = { pos: { i, j } }\n\n            if (j === 0) {\n                mat[i][j] = { ...mat[i][j], col: 0 }\n            }\n        }\n    }\n\n    return mat\n}\n\nfunction getDateDay(timeStamp) {\n    const time = new Date(timeStamp);\n    return time.getDate()\n}\n\nfunction setToHourMinuets(timeStamp, hour, min) {\n    let time = new Date(timeStamp)\n    time.setHours(hour, min)\n    return time.getTime()\n\n}\n\n\nfunction getWeekDay(timeStamp) {\n    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    const time = new Date(timeStamp);\n    return days[time.getDay()]\n}\n\nfunction getTimeDayStr(timeStamp) {\n    let time = new Date(timeStamp)\n    let hours = _get2DigTime(time.getHours());\n    let minuets = _get2DigTime(time.getMinutes());\n    return `${hours}:${minuets}`\n}\n\nfunction _get2DigTime(num) {\n    if ((num + '').length === 1) return '0' + num\n    return num\n}\n\nfunction getRandomInt(min, max) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nfunction getRandomPic() {\n    const imgIdx = getRandomInt(0, imgs.length - 1)\n    return imgs[imgIdx]\n}\n\nfunction getIsoTime(timeStamp) {\n    let time = new Date(timeStamp);\n    time.setMinutes(time.getMinutes() - time.getTimezoneOffset());\n    return time.toISOString().slice(0, 16)\n}\nfunction getRandomLatLng() {\n    let locations = [\n        { lat: -23.5475, lng: -46.6361 }, //sau paolo\n        { lat: 13.751330328, lng: 100.489664708 }, //bangkok\n        { lat: 25.105497, lng: 121.597366 }, //taipei\n        { lat: 21.028511, lng: 105.804817 }, //hanoi\n        { lat: 39.916668, lng: 116.383331 }, //beijin\n        { lat: -16.5000000, lng: -68.1500000 }, //la paz\n        { lat: 27.700769, lng: 85.300140 }, // //Kathmandu, nepal\n        { lat: 14.599512, lng: 120.984222 }, //manila\n        { lat: 1.290270, lng: 103.851959 }, //singapor city\n        { lat: 6.927079, lng: 79.861244 }, //colombo sri lanka\n        { lat: 28.644800, lng: 77.216721 }, //new delhi\n    ]\n    return locations[getRandomInt(0, locations.length - 1)]\n}\n\nfunction getRandomName() {\n    const name = [\n        'Moshe544',\n        'Cochava',\n        'Ilanit',\n        'Yaron.B',\n        'J-Lo',\n        'Meni',\n        'QueenB',\n        'Latifa',\n        'Elvis',\n        'Yorgan',\n        'Matilda',\n        'Muki',\n        'Puki',\n        'Alfonso',\n        'Idan',\n        'Roi',\n        'Stav',\n        'Jermi',\n        'Fernandinho',\n        'Messi',\n        'L-James',\n        'Yonit',\n        'Adam',\n        'Eve',\n        'Kelly',\n        'Steve',\n        'Stue',\n        'Laquisha',\n        'Marisa',\n        'Sharon',\n        'Eliyahu'\n    ]\n    return name[getRandomInt(0, name.length - 1)]\n}\n\n\nconst imgs = [\n    'https://images.unsplash.com/photo-1484804959297-65e7c19d7c9f?ixlib=rb-1.2.1', //clear water with sup\n    'https://images.unsplash.com/photo-1550399504-8953e1a6ac87?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //reading book at the beach\n    'https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //sunglass on sand\n    'https://images.unsplash.com/photo-1527004013197-933c4bb611b3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //norway\n    'https://images.unsplash.com/photo-1480497490787-505ec076689f?ixlib=rb-1.2.1', //norway\n    'https://images.unsplash.com/photo-1475066392170-59d55d96fe51?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //norway\n    'https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?ixlib=rb-1.2.1', //manhaten\n    'https://images.unsplash.com/photo-1507272931001-fc06c17e4f43?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //norway\n    'https://images.unsplash.com/photo-1559128010-7c1ad6e1b6a5?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //thailnad\n    'https://images.unsplash.com/photo-1545579133-99bb5ab189bd?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //maldivas\n    'https://images.unsplash.com/photo-1519451241324-20b4ea2c4220?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //thailand\n    'https://images.unsplash.com/photo-1528181304800-259b08848526?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //thailand\n    'https://images.unsplash.com/photo-1524492412937-b28074a5d7da?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //india\n    'https://images.unsplash.com/photo-1516483638261-f4dbaf036963?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0',  //italy/capri\n    'https://images.unsplash.com/photo-1523906834658-6e24ef2386f9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //itlay/venice\n    'https://images.unsplash.com/photo-1517792844039-e52afb564132?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //italy\n    'https://images.unsplash.com/photo-1499678329028-101435549a4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //italy',\n    'https://images.unsplash.com/photo-1535063406830-27dfae54262a?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //italy\n    'https://images.unsplash.com/photo-1554357475-accb8a88a330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //jordan\n    'https://images.unsplash.com/photo-1559628233-100c798642d4?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //indonesia\n    'https://images.unsplash.com/photo-1527095655060-4026c4af2b25?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //switzerland\n    'https://images.unsplash.com/photo-1583702993462-43615c05ceee?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //switzerland\n    'https://images.unsplash.com/photo-1505662695181-d4b60363d2a3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //singapore\n    'https://images.unsplash.com/photo-1455459182396-ae46100617cb?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //?\n    'https://images.unsplash.com/photo-1512453979798-5ea266f8880c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //dubai\n    'https://images.unsplash.com/flagged/photo-1559717865-a99cac1c95d8?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //dubai\n    'https://images.unsplash.com/flagged/photo-1559717201-fbb671ff56b7?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //dubai\n]","export function showMsg(msg) {\n    return dispatch => {\n        setTimeout(() => {\n            this.closeMsg()\n        }, 3000)\n        dispatch({ type: 'SET_MSG', msg })\n        \n    }\n    \n}\n\nexport function closeMsg() {\n    return dispatch => {\n        dispatch({ type: 'CLOSE_MSG' })\n    }\n}","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { closeMsg, showMsg } from '../../store/actions/msgActions'\n\n\n\nclass _ErrorMsg extends Component {\n    render() {\n        const { msg, type } = this.props\n        return (\n            <React.Fragment>\n                {(type === 'input') && <div className={this.props.isShown ? '' : 'hide'}>\n                    <small className=\"error-msg\"><i className=\"fas fa-exclamation-circle\"></i>{msg}</small>\n                </div>}\n                {type === 'invalid-move' && <div className={this.props.isShown ? '' : 'hide'}>\n                    <p className=\"invalid-move\"><i className=\"fas fa-exclamation-triangle\"></i>{msg}</p>\n                </div>}\n            </React.Fragment>\n        )\n    }\n}\n\n\nconst mapStateToProps = state => {\n    return {\n        msg: state.msgReducer.msg,\n        isShown: state.msgReducer.isShown,\n        type: state.msgReducer.type\n\n    }\n}\nconst mapDispatchToProps = {\n    showMsg,\n    closeMsg\n}\n\nexport const ErrorMsg = connect(mapStateToProps, mapDispatchToProps)(_ErrorMsg)\n","import React, { Component } from 'react'\nimport { utils } from '../../services/utils'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux';\nimport { addTrip } from '../../store/actions/tripActions'\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { ErrorMsg } from '../MainCmps/ErrorMsg';\nimport { showMsg, closeMsg } from '../../store/actions/msgActions';\nimport { GooglePlaces } from '../MainCmps/GooglePlaces';\nimport {\n    geocodeByAddress,\n    // geocodeByPlaceId,\n    getLatLng,\n} from 'react-places-autocomplete';\n\n\nclass _AddTrip extends Component {\n\n\n    state = {\n        tripName: '',\n        currTrip: {\n            name: '',\n            location: { lat: null, lng: null },\n            startDate: '',\n            endDate: '',\n\n        },\n        currStartDest: Date.now(),\n        destinations: '',\n    }\n\n    // componentDidMount() {\n        \n    // }\n    \n\n    onSetDestinations = (ev) => {\n        ev.preventDefault()\n        const { currStartDest } = this.state\n        const newtrip = this.state.currTrip\n        newtrip.name = newtrip.name.toLowerCase()\n        // if (!newtrip.startDate && !newtrip.endDate) {\n        //     newtrip.startDate = Date.now()\n        //     newtrip.endDate = Date.now() + 1 * 1000 * 60 * 60 * 24\n        // }\n        // newtrip.startDate = (this.state.destinations.length && this.state.destinations[this.state.destinations.length - 1].endDate) || this.state.currTrip.startDate || Date.now()\n\n        if (!newtrip.startDate) {\n            newtrip.startDate = currStartDest\n        }\n        if (!newtrip.endDate || newtrip.endDate <= newtrip.startDate) {\n            newtrip.endDate = newtrip.startDate + 1000*60**2*24\n        }\n        \n        // if (!this.state.currTrip.endDate) {\n        //     newtrip.endDate = (newtrip.startDate) ? newtrip.startDate + 1 * 1000 * 60 * 60 * 24 : Date.now() + 1 * 1000 * 60 * 60 * 24\n        // }\n        newtrip.id = utils.makeId()\n        this.setState({\n            destinations: [...this.state.destinations, newtrip],\n            currTrip: {\n                name: '',\n                location: { lat: null, lng: null },\n                startDate: '',\n                endDate: '',\n            },\n            currStartDest: newtrip.endDate\n        })\n    }\n\n    onSaveDestination = async (ev) => {\n        ev.preventDefault();\n        if (!this.state.destinations.length) {\n            this.props.showMsg({ type: 'input', msg: 'At least one destination must be added' })\n            return\n        }\n        const trip = {\n            tripName: this.state.tripName,\n            imgUrl: utils.getRandomPic(),\n            activities: [],\n            destinations: this.state.destinations\n        }\n\n        if (this.props.loggedInUser) {\n            trip.members = [\n                {\n                    id: this.props.loggedInUser._id,\n                    username: this.props.loggedInUser.username,\n                    imgUrl: this.props.loggedInUser.imgUrl,\n                }\n            ]\n        }\n\n        else trip.members = []\n        const newTrip = await this.props.addTrip(trip)\n        this.props.history.push(`/trip/${newTrip._id}/tripRoute`)\n    }\n\n    // getRandomLatLng() {\n    //     const LL = utils.getRandomLatLng()\n    //     return LL\n    // }\n\n\n    handleAddress = (name) => {\n        this.setState({ currTrip: { ...this.state.currTrip, name } })\n    }\n\n    handleSelect = async (value) => {\n        const results = await geocodeByAddress(value);\n        const latlng = await getLatLng(results[0])\n        this.setState({ currTrip: { ...this.state.currTrip, location: latlng, name: value } })\n    }\n\n    handleInput = (ev, name) => {\n        let value;\n        let targetName;\n        if (ev.target && ev.target.name === 'tripName') {\n            this.setState({ ...this.state, tripName: ev.target.value })\n            return\n        }\n        if (ev.target) {\n            value = ev.target.value;\n            targetName = ev.target.name\n        }\n        else {\n\n            value = new Date(ev).getTime();\n            targetName = name\n            if (targetName===\"startDate\") {\n                value = this.state.currStartDest\n            } \n        }\n\n        this.setState({ ...this.state, currTrip: { ...this.state.currTrip, [targetName]: value } })\n    }\n\n\n    formatDate = (date) => {\n        return `${new Date(date).getDate()}/${new Date(date).getMonth() + 1}/${new Date(date).getFullYear()}`\n    }\n    render() {\n        const startDate = (this.state.destinations.length && this.state.destinations[this.state.destinations.length - 1].endDate) ||\n            Date.now()\n        const minT =  new Date(this.state.currStartDest)\n        const maxT =  new Date(this.state.currTrip.endDate ||new Date(this.state.currStartDest+1000+60**2*24))\n        return (\n            <div className=\"flex add-destination-form-wraper\">\n                <form className=\"flex column add-destination-form\" onSubmit={this.onSetDestinations}>\n                    <h3>Create your trip</h3>\n                    <div className=\"flex column\">\n                        <input className=\"styled-input\" type=\"text\"\n                            name=\"tripName\"\n                            placeholder=\"Enter Trip Name\"\n                            id=\"add-dest-name\"\n                            value={this.state.tripName}\n                            required\n                            autocomplete=\"off\"\n                            onChange={this.handleInput}\n                        />\n                    </div>\n                    {/* <GooglePlaces\n                        handleSelect={this.handleSelect}\n                        handleAddress={this.handleAddress}\n                        address={this.state.currTrip.name}\n                        location={this.state.currTrip.location}\n                    /> */}\n                    <div className=\"flex column\">\n                        <input className=\"styled-input\" type=\"text\"\n                            name=\"name\"\n                            placeholder=\"Enter City Name\"\n                            id=\"add-dest-city\"\n                            value={this.state.currTrip.name}\n                            required\n                            autocomplete=\"off\"\n                            onChange={this.handleInput}\n                        />\n                    </div>\n                    <div className=\"flex\">\n                        <div className=\"flex column\">\n                            <label htmlFor=\"startdate-dest-input\">Start</label>\n                            <DatePicker\n                                minDate={minT}\n                                id=\"startdate-dest-input\"\n                                name=\"startDate\"\n                                className=\"styled-input\"\n                                required\n                                // selected={this.state.currTrip.startDate || Date.now()}\n                                selected={this.state.destinations.length ? startDate : Date.now()}\n                                onChange={date => { this.handleInput(date, 'startDate') }}\n                            />\n                        </div>\n                        <div className=\"flex column\">\n                            <label htmlFor=\"enddate-dest-input\">End </label>\n                            <DatePicker\n                                minDate={minT}\n                                id=\"enddate-dest-input\"\n                                name=\"endDate\"\n                                className=\"styled-input\"\n                                required\n                                selected={maxT}\n                                onChange={date => { this.handleInput(date, 'endDate') }}\n                            />\n                        </div>\n                    </div>\n                    <ErrorMsg />\n                    <button className=\"styled-button\" onSubmit={this.onSetDestinations}>Add destination</button>\n                    {this.state.destinations.length ? <ol className=\"trip-list-add-form flex column\">\n                        {this.state.destinations.map(dest => <li key={utils.makeId()} className=\"flex justify-between\">\n                            <p>{dest.name}</p>\n                            <div className=\"flex\">\n                                <p>{this.formatDate(dest.startDate)}</p> -\n                                <p>{this.formatDate(dest.endDate)}</p>\n                            </div>\n                        </li>)}\n                    </ol> : ''}\n                    <button className=\"styled-button\" onClick={this.onSaveDestination}>Ready To Plan!</button>\n                </form>\n                <div className=\"add-dest-img-wraper\">\n                    <img src=\"https://images.unsplash.com/photo-1484804959297-65e7c19d7c9f?ixlib=rb-1.2.1\" alt=\"\" />\n                </div>\n            </div>\n        )\n    }\n}\n\n\n\nconst mapStateToProps = state => {\n    return {\n        loggedInUser: state.userReducer.loggedInUser\n    }\n}\n\nconst mapDispatchToProps = {\n    addTrip,\n    showMsg,\n    closeMsg\n}\n\nexport const AddTrip = connect(mapStateToProps, mapDispatchToProps)(withRouter(_AddTrip));","import React, { Component } from 'react'\n\nimport PlacesAutocomplete from 'react-places-autocomplete';\n\n\nexport class GooglePlaces extends Component {\n\n    state = {\n        address: '',\n        coordinates: { lat: null, lng: null },\n\n    }\n\n    render() {\n        return (\n            <div>\n                <PlacesAutocomplete value={this.props.address} onChange={this.props.handleAddress} onSelect={this.props.handleSelect}>\n                    {({ getInputProps, suggestions, getSuggestionItemProps, loading }) => {\n                        return <div> <input\n                            {...getInputProps({\n                                placeholder: 'Enter destination (city)...',\n                                className: 'styled-input',\n                            })}\n                        />\n                            <div className=\"places-list\">\n                                {loading ? <p>Loading . . .</p> : null}\n                                {suggestions.map((suggestion) => {\n\n                                    const style = {\n                                        backgroundColor: suggestion.active ? '#f097ee' : '#fff',\n                                        display: suggestion ? 'inherit' : 'none',\n                                        padding: suggestion ? '5px 10px' : 'none',\n                                        borderRadius: '3px',\n                                        cursor: 'pointer',\n                                        fontSize: '0.8rem',\n                                        width:'100%',\n                                    }\n                                    return (<div {...getSuggestionItemProps(suggestion, { style })}>\n                                        {suggestion.description}\n                                    </div>)\n\n                                })}\n                            </div>\n\n                        </div>\n                    }}\n                </PlacesAutocomplete>\n\n            </div >\n        )\n    }\n}\n","import httpService from './httpService';\nimport { utils } from './utils';\nimport { storageService } from './asyncStorageService'\n\n\nexport const reviewService = {\n    add,\n    query,\n    remove\n};\n\n\nasync function query(filterBy) {\n    if (filterBy) var queryStr = `?tripId=${filterBy.tripId}`;\n    // const reviews = await storageService.query(`review`);\n    // return reviews.filter(review => review.aboutTrip === filterBy.tripId)\n    return httpService.get(`review${queryStr}`);\n\n}\n\nfunction remove(reviewId) {\n    return httpService.delete(`review/${reviewId}`);\n}\nasync function add(review) {\n    review.createdAt = Date.now();\n    const addedReview = await httpService.post(`review`, review);\n    return addedReview\n}\n","import { reviewService } from '../../services/reviewService';\n\n\nexport const reviewActions = {\n    loadReviews,\n    addReview\n}\n\nfunction loadReviews(tripId) {\n    return async dispatch => {\n        try {\n            const reviews = await reviewService.query(tripId);\n            dispatch({ type: 'SET_REVIEWS', reviews });\n            return reviews\n\n        } catch (err) {\n            console.log('ReviewActions: err in loadReviews', err);\n        }\n    };\n}\n\nasync function addReview(review) {\n    await reviewService.add(review)\n    return async dispatch => {\n        try {\n            const addedReview = await reviewService.add(review);\n            dispatch({ type: 'REVIEW_ADD', review: addedReview });\n        }\n        catch (err) {\n            console.log('ReviewActions: err in addReview', err);\n        }\n    }\n}\n","import { withRouter } from 'react-router-dom'\nimport { utils } from '../../services/utils'\nimport { connect } from 'react-redux'\n\nimport { reviewActions } from '../../store/actions/reviewActions'\nimport { addTrip } from '../../store/actions/tripActions'\nimport { showModal } from '../../store/actions/modalActions'\n\nimport React, { Component } from 'react'\n\nclass _TripPreview extends Component {\n\n    componentDidMount() {\n        this.loadReviews()\n      \n    }\n\n    async loadReviews(){\n        let reviews = await this.props.loadReviews({ tripId: this.props.trip._id })\n        if (!reviews) reviews = []\n        this.setState({ reviews })\n\n    }\n\n\n    handleClick = async() => {\n        let isMember;\n        const trip={...this.props.trip}\n        if (this.props.loggedInUser) {\n            isMember = this.props.trip.members.find(member => member.id === this.props.loggedInUser._id)\n        }\n        if (isMember) {\n            this.props.history.push(`/trip/${this.props.trip._id}/triproute`)\n            return\n        }\n        else{\n            const name = this.props.loggedInUser? this.props.loggedInUser.username:'guest';\n            const originId = trip._id\n            delete trip._id\n            trip.members=[]\n            trip.originId= originId\n            trip.tripName= trip.tripName+' - '+name\n            const newTrip = await this.props.addTrip(trip)\n            this.props.history.push(`/trip/${newTrip._id}/triproute`)\n        }\n    }\n\n    getTripPrice = (activities) => {\n        let price = activities.reduce((acc, currValue) => {\n            acc = acc + currValue.price.amount\n            return acc\n        }, 0)\n        return price\n    }\n\n    getReviewsAvg = () => {\n        try {\n            const rating = this.state.reviews.reduce((acc, currRev) => {\n                if (this.state.reviews.length) acc = acc + (+currRev.rating)\n                else acc = 0\n                return acc\n            }, 0)\n            return rating ? (rating / this.state.reviews.length).toFixed(1) : 0\n        }\n        catch (err) {\n        }\n    }\n\n    render() {\n        const { trip, addClass } = this.props\n        if (!trip) return <p>Loading Trip . . .</p>\n        const price = this.getTripPrice(trip.activities)\n        const days = utils.calculateDays(trip.destinations[0].startDate, trip.destinations[trip.destinations.length - 1].endDate)\n        const style = (this.props.style ? this.props.style : '')\n        const reviews = this.getReviewsAvg()\n\n        return (\n            <div style={{ pointerEvents: (style.pointerEvents ? style.pointerEvents : 'inherit') }} onClick={this.handleClick} className={'trip-preview flex column ' + (addClass ? addClass : '')} >\n                < div className=\"img-wraper\" >\n                    <img src={trip.imgUrl} alt=\"\" />\n                </div>\n                <div className=\"trip-preview-details\">\n                    <h3>{trip.tripName}</h3>\n                    <div className=\"flex details-container\">\n                        {trip.createdBy && < div className=\"flex align-center column img-container\">\n                            <img className=\"user-img\" src={trip.createdBy.imgUrl} alt=\"user-img\" />\n                            <p> {trip.createdBy.username}</p>\n                        </div>}\n                        <div className=\"flex justify-between column\">\n                            <p><i className=\"fas fa-hourglass-half\"></i>{days} days</p>\n                            <p>Est Price: <i className=\"fas fa-dollar-sign\"></i>{price}</p>\n                            <div className=\"flex rating-star\">\n                                <img src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600689776/450716_preview_uyyiz1.png\" alt=\"\" />\n                                <div className=\"flex justify-between\">\n                                    {reviews ? <span>{reviews} <span>({this.state.reviews.length} reviews) </span></span> : '(0)'}\n                                </div>\n\n                            </div>\n                            <p>{`Trollied by ${utils.getRandomName()} and ${utils.getRandomInt(50, 220)} others`}</p>\n                        </div>\n                    </div>\n\n                </div>\n            </div >\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        reviews: state.reviewReducer.reviews,\n        loggedInUser: state.userReducer.loggedInUser,\n    }\n}\n\nconst mapDispatchToProps = {\n    loadReviews: reviewActions.loadReviews,\n    addTrip: addTrip,\n    showModal\n}\n\nexport const TripPreview = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripPreview))\n\n\n\n","import React from 'react';\nimport { Swiper, SwiperSlide } from 'swiper/react';\nimport SwiperCore, { EffectCoverflow, Autoplay, EffectFade, Navigation, Pagination, Scrollbar, A11y } from 'swiper';\n\nimport 'swiper/swiper-bundle.css';\nimport 'swiper/components/effect-fade/effect-fade.scss';\nimport { TripPreview } from './TripPreview';\nimport { utils } from '../../services/utils';\n\n\n\nSwiperCore.use([EffectCoverflow, Autoplay, EffectFade, Navigation, Pagination, Scrollbar, A11y]);\n\n\n\n\nexport function TripSlider({ trips }) {\n\n\n\n    return (\n        <Swiper\n            effect=\"coverflow\"\n            slidesPerView={\"auto\"}\n            // effectCoverflow={true}\n            navigation\n            centeredSlides={ true}\n            // autoplay={true}\n            delay={2500}\n            coverflowEffect= {{\n                rotate: 30,\n                depth: 200\n              }}\n\n        pagination={{ clickable: true }}\n        >\n\n\n            {\n                trips.map((i, el) => {\n                    return <SwiperSlide key={utils.makeId()}>\n                        <TripPreview trip={i}  key={i._id} addClass={'slider'} img={utils.getRandomPic()}/> \n                    </SwiperSlide>;\n                })\n            }\n        </Swiper >\n    );\n};","import React from 'react'\n\nexport function UserFlow() {\n    return (\n        <div className=\"flex column align-center user-flow\" id=\"userFlow\" >\n            <div className=\"flex align-center\">\n                <div>\n                    <p className=\"flow-headline\">Choose a trip</p>\n                    <p className=\"flow-content\">Choose from one of our amazing planned trips</p>\n                </div>\n                <img src=\"https://res.cloudinary.com/roidinary/image/upload/v1600869772/undraw_traveling_t8y2_xnd0ne.svg\" alt=\"choose-travel\" />\n            </div>\n            <div className=\"flex align-center\">\n                <img src=\"https://res.cloudinary.com/roidinary/image/upload/v1600869761/undraw_travel_plans_li01_k6igg6.svg\" alt=\"\" />\n                <div className=\"flow-text\">\n                    <p className=\"flow-headline\">Personalize it</p>\n                    <p className=\"flow-content\">Personalize <span style={{fontWeight:'bold'}}>destinations </span>on Route and <span style={{fontWeight:'bold'}}>activities </span>on Assembly </p>\n                </div>\n            </div>\n            <div className=\"flex align-center\">\n                <div>\n                    <p className=\"flow-headline\">Add your friends</p>\n                    <p className=\"flow-content\">invite friends to plan together on the same document</p>\n                </div>\n                <img src=\"https://res.cloudinary.com/roidinary/image/upload/v1600870015/undraw_social_friends_nsbv_c9ovrw.svg\" alt=\"\" />\n            </div>\n\n\n        </div>\n    )\n}\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { AddTrip } from '../cmps/Home/AddTrip';\nimport { TripSlider } from '../cmps/Home/TripSlider';\nimport { UserFlow } from '../cmps/Home/UserFlow';\nimport { loadTrips } from '../store/actions/tripActions'\nimport { HashLink as Link } from 'react-router-hash-link';\n\n\n\nclass _HomePage extends Component {\n    state = {\n        trips: ''\n    }\n\n\n    async componentDidMount() {\n        await this.props.loadTrips()\n    }\n\n    // getTripsForDisplay = () => {\n    //     this.props.trips.filter(trip=> trip)\n    // }\n\n\n    render() {\n        if (!this.props.trips[0]) return <p> </p>\n        return (\n\n            <div className=\"home-page  main-container \">\n                <div className=\"home-page-hero full\" >\n                    <div className=\"description-section\">\n                        <h3>Explore planned trips of professional travelers\n                            </h3>\n                        <h3>and personalize them</h3>\n                        <Link smooth to=\"#userFlow\" scroll={el => el.scrollIntoView({ behavior: 'smooth', block:  'center'  })}>\n                            <button className=\"styled-button\"> Get Started</button>\n                        </Link>\n                    </div>\n                </div>\n\n                <div className=\"main-home-page full\">\n                    <div className=\"flow-container\">\n                        <UserFlow id=\"userFlow\" />\n                        <Link smooth to=\"#top-rated-trips\" scroll={el => el.scrollIntoView({ behavior: 'smooth', block: 'nearest'})}>\n                            <button className=\"styled-button\"> Let's Trolly!</button>\n                        </Link>\n                    </div>\n                    <div className=\"slideShow-area\" id=\"top-rated-trips\">\n                        <div id=\"top-rated-trips\"></div>\n                        <h2 className=\"\" >Top rated planned trips</h2>\n                        <section className=\"slideShow\" >\n                            <TripSlider trips={this.props.trips.slice(0, 4)} />\n                            <Link to=\"/trip\"><button className=\"styled-button to-trip-list\"> Show me more</button></Link>\n                        </section>\n                    </div>\n                    <AddTrip />\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        trips: state.tripReducer.trips\n    }\n}\n\nconst mapDispatchToProps = {\n    loadTrips\n}\n\nexport const HomePage = connect(mapStateToProps, mapDispatchToProps)(_HomePage);","import React, { Component } from 'react'\nimport { utils } from '../../services/utils'\n\nexport class TripFilter extends Component {\n\n\n    render() {\n        const {  mostOccDests } = this.props\n        return (        \n            <div className=\"trip-filter flex\" style={this.props.style}>\n                <img src=\"https://res.cloudinary.com/idanrozen/image/upload/v1601236322/search_ejr7qx.png\" alt=\"\"/>\n                <input autoComplete=\"off\" placeholder=\"Search destination\" className=\"styled-input\" name=\"name\" onChange={this.props.handleInput} list=\"dest-filter\" />\n                <datalist onChange={this.props.handleInput} id=\"dest-filter\">\n                    {mostOccDests.map(dest => {\n                       return <option key={utils.makeId()} value={`${dest}`}></option>\n                    })}\n                </datalist>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\nimport { utils } from '../../services/utils'\nimport { TripPreview } from './TripPreview'\nimport { connect } from 'react-redux';\nimport { loadTrips } from '../../store/actions/tripActions';\n\n\nclass _TripList extends Component {\n\n    async componentDidMount() {\n        if (!this.props.trips.length) {\n            await this.props.loadTrips()\n        }\n    }\n    render() {\n        const { trips, addClass, showModal } = this.props\n        if (!trips.length) return <p>Loading Trips . . . </p>\n        return (\n            <div className={'trip-list trips-container ' + (addClass ? addClass : '')}>\n\n                {trips.length ? trips.map((trip, idx) =>\n                    <TripPreview key={trip._id} trip={trip} showModal={showModal} addClass={addClass} img={utils.getRandomPic()} />\n                ) :\n                    <TripPreview key={trips._id} trip={trips} addClass={addClass} img={utils.getRandomPic()} />\n                }\n\n\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        trips: state.tripReducer.trips\n    }\n}\n\nconst mapDispatchToProps = {\n    loadTrips\n}\n\nexport const TripList = connect(mapStateToProps, mapDispatchToProps)(_TripList);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { TripFilter } from '../cmps/Home/TripFilter';\nimport { TripList } from '../cmps/Home/TripList';\nimport { showModal } from '../store/actions/modalActions';\nimport { loadTrips } from '../store/actions/tripActions';\n\n\nclass _TripStock extends Component {\n    state = {\n        filterBy: {\n            name: ''\n        }\n    }\n\n    componentDidMount() {\n        this.props.loadTrips(this.state.filterBy)\n    }\n\n    getMostOccDests = () => {\n        const { trips } = this.props\n        let destinations = [];\n        trips.forEach(trip => {\n            destinations = destinations.concat(trip.destinations)\n        })\n\n        const numOfOccMap = destinations.reduce((acc, dest) => {\n            acc[dest.name] = (acc[dest.name]) ? acc[dest.name] + 1 : 1\n            return acc\n        }, {})\n        \n        let numOfOccArr = Object.entries(numOfOccMap)\n        numOfOccArr.sort((dest1, dest2) => {\n            return dest2[1] - dest1[1]\n        })\n\n        return numOfOccArr.slice(0, 5).map(destOcc => {\n            let destName = destOcc[0][0].toLocaleUpperCase() + destOcc[0].substring(1)\n            return destName\n        })\n    }\n\n    // renderSrcOpt = () => {\n\n    // }\n\n    handleInput = ({ target }) => {\n        const field = target.name;\n        const value = target.value;\n        this.setState({ filterBy: { ...this.state.filterBy, [field]: value } }, () => {\n            this.props.loadTrips(this.state.filterBy)\n        });\n    }\n\n    getTripsForDisplay = () => {\n        const tripList = this.props.trips.filter(trip => {\n            return trip.destinations[0].name.includes(this.state.name)\n        })\n        return tripList\n    }\n\n    render() {\n        const trips = this.props.trips\n        const mostOccDests = this.getMostOccDests()\n        this.getMostOccDests()\n        return (\n            <div className=\"trip-stock\">\n                <h2>All Trips plans</h2>\n                <TripFilter mostOccDests={mostOccDests} handleInput={this.handleInput} onsetFilter={this.onsetFilter} />\n                <TripList showModal={this.props.showModal} trips={trips} />\n            </div>\n        )\n    }\n}\n\n\nconst mapStateToProps = state => {\n\n    return {\n        trips: state.tripReducer.trips\n    }\n}\n\nconst mapDispatchToProps = {\n    loadTrips,\n    showModal\n}\n\nexport const TripStock = connect(mapStateToProps, mapDispatchToProps)(_TripStock);","import React from 'react'\n\n\nexport class Login extends React.Component {\n    state = {\n        msg: ''\n\n    }\n    onSubmit = async (ev) => {\n        ev.preventDefault()\n        const { email, password } = ev.target\n        const userCreds = { email: email.value, password: password.value }\n        const user = await this.props.handleForm(userCreds)\n        if (!user) this.setState({ msg: 'wrong username or password' })\n        else{\n            this.props.closeModal()\n        }\n    }\n\n\n    render() {\n        return (\n            <form className=\"login-form flex align-center justify-center column\" onSubmit={this.onSubmit} >\n                <input className=\"styled-input\" type=\"email\" placeholder=\"email\" name=\"email\"></input>\n                <input className=\"styled-input\" type=\"password\" placeholder=\"password\" name=\"password\"></input>\n                <button className=\"styled-button\">Login</button>\n                <p>not a user? please <span  onClick={()=>this.props.handleClick('signup')}>sign up</span></p>\n                {this.state.msg && <p>{this.state.msg}</p>}\n            </form>\n        )\n    }\n}","import React from 'react'\n\n\nexport class Signup extends React.Component {\n    state = {\n        username: '',\n        email: '',\n        password: '',\n        imgUrl: 'https://res.cloudinary.com/roidinary/image/upload/v1600790523/Untitled-1_xumtnf.jpg'\n    }\n    handleChange=(ev)=>{\n        const {value,name}=ev.target;\n        this.setState({...this.state,[name]:value})\n    }\n    onSubmit=(ev)=>{\n        ev.preventDefault()\n        this.props.handleForm(this.state,'signup',this.props.tripToRed)\n        this.props.closeModal()\n\n    }\n\n    render() {\n        return (\n            <form onSubmit={this.onSubmit} className=\"flex column align-center\">\n                <input\n                    type='text'\n                    name='username'\n                    value={this.state.username}\n                    placeholder='Username'\n                    onChange={this.handleChange}\n                    className='styled-input'\n                />\n                <input\n                    type='email'\n                    name='email'\n                    value={this.state.email}\n                    placeholder='email'\n                    onChange={this.handleChange}\n                    className='styled-input'\n                />\n                <input\n                    type='password'\n                    name='password'\n                    value={this.state.password}\n                    placeholder='password'\n                    onChange={this.handleChange}\n                    className='styled-input'\n                />\n                <button className=\"styled-button\">Sign Up</button>\n            </form>\n        )\n    }\n}\n","import io from 'socket.io-client';\n\nconst baseUrl = (process.env.NODE_ENV === 'production')? '' : '//localhost:3030'\nexport const socketService = createSocketService();\n\n\nfunction createSocketService() {\n  var socket;\n  const socketService = {\n    setup() {\n      socket = io(baseUrl);\n    },\n    on(eventName, cb) {\n      socket.on(eventName, cb);\n    },\n    off(eventName, cb) {\n      socket.off(eventName, cb);\n    },\n    emit(eventName, data) {\n      socket.emit(eventName, data);\n    },\n    terminate() {\n      socket = null;\n    }\n  }\n  return socketService;\n}\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Login } from './Login';\nimport { Signup } from './Signup';\nimport { signup, login } from '../store/actions/userActions'\nimport { closeModal, showModal } from '../store/actions/modalActions'\nimport { loadTrip, addTrip } from '../store/actions/tripActions'\nimport { socketService } from '../services/socketService'\n\nclass _LoginSignupPage extends Component {\n    state = {\n        login: true\n    }\n    componentDidMount() {\n        if (this.props.page !== this.state.login) {\n            this.setState({ login: this.props.page })\n        }\n    }\n    componentDidUpdate() {\n        if (this.props.page !== this.state.login) {\n            this.setState({ login: this.props.page })\n        }\n    }\n    handleForm = async (props, action, tripIdToRed) => {\n        if (action === 'signup') {\n            if (tripIdToRed) {\n                const [tripToRed, user] = await Promise.all([this.props.loadTrip(tripIdToRed), this.props.signup(props)])\n                tripToRed.members.push({ username: user.username, imgUrl: user.imgUrl, id: user._id })\n                await this.props.addTrip(tripToRed)\n                socketService.emit('tripToUpdate', tripToRed)\n                this.props.closeModal()\n                return user\n            }\n            return await this.props.signup(props)\n        } else {\n            var user = await this.props.login(props)\n            if (!user) return\n            return user\n        }\n    }\n    closeModal=()=> {\n        this.props.closeModal()\n    }\n    render() {\n        const tripToRed = this.props.tripId\n        return (\n            this.state.login ? <Login handleForm={this.handleForm} handleClick={this.props.handleClick}\n                closeModal={this.closeModal} /> :\n                <Signup handleForm={this.handleForm} handleClick={this.props.handleClick}\n                    closeModal={this.closeModal} tripId={this.props.tripId} tripToRed={tripToRed} />\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n    }\n}\n\nconst mapDispatchToProps = {\n    signup,\n    login,\n    closeModal,\n    showModal,\n    loadTrip,\n    addTrip\n\n}\n\nexport const LoginSignupPage = connect(mapStateToProps, mapDispatchToProps)(_LoginSignupPage);\n","function on(eventName, listener) {\n    const callListener = ({ detail }) => {\n        listener(detail)\n    }\n    window.addEventListener(eventName, callListener)\n    return () => {\n        window.removeEventListener(eventName, callListener)\n    }\n}\n\nfunction emit(eventName, data) {\n    window.dispatchEvent(new CustomEvent(eventName, { detail: data }));\n}\n\n\nexport const eventBus = { on, emit }","export const ItemTypes = {\n    ACTIVITIE: 'activitie',\n    DESTINATION:'destination'\n}","\nimport React from 'react'\nimport { useDrag } from 'react-dnd'\nimport { utils } from '../../services/utils'\nimport { ItemTypes } from '../../services/dndItems.js'\n\nexport function ActivitiePreview({ act, onRemoveAct, onEdit, destinations, onOpenDetails }) {\n\n    const [{ isDragging }, drag] = useDrag({\n        item: {\n            type: ItemTypes.ACTIVITIE,\n            id: act.id\n        },\n        collect: monitor => ({\n            isDragging: !!monitor.isDragging()\n        })\n    })\n\n    \n\n    \n    const isFirstCol = (act.col === 0) ? 'first-col' : ''\n    const isDayHeadClass = (act.literalDay) ? 'literal-day' : ''\n    const isDrag = (isDragging) ? 'is-drag' : ''\n    const isLenOne = (act.duration === 1) ? 'len-one' : ''\n    const dest= destinations.findIndex(dest => act.destination === dest.name)\n\n    return (\n        <div ref={drag} className={`activity-prev-assembly activity-assembly ${isLenOne} ${isDayHeadClass} ${isFirstCol} ${isDrag}`} style={{ gridRow: `${act.row + 1 || 'auto'}/span ${act.duration}` }} key={utils.makeId()}>\n            <div className={'dest-color dest-'+dest}></div>\n            <div className=\"activity-name-container\">\n            <h5>{act.name}</h5>\n            </div>\n            <div className=\"activity-assembly-details column\">\n              \n                <div className=\"activity-assembly-controls flex\">\n                    <button onClick={() => { onOpenDetails(act) }}><i className=\"fas fa-info\"></i></button>\n                    <button onClick={() => { onRemoveAct(act.id) }} className=\"delete-activity \"><i className=\"fas fa-trash\"></i></button>\n                </div>\n            </div>\n        </div >\n    )\n}\n","\nimport React from 'react'\nimport { useDrop } from 'react-dnd'\nimport { utils } from '../../services/utils'\nimport { ItemTypes } from '../../services/dndItems'\nexport function OpenDaySlot({ act, getRowIdx, onDragMove }) {\n\n    const [{ isOver }, drop] = useDrop({\n        accept: ItemTypes.ACTIVITIE,\n        drop: (item, monitor) => {\n            onDragMove(act, item.id)\n        },\n\n        collect: monitor => ({\n            isOver: !!monitor.isOver()\n        })\n    })\n\n    const rowIdx = null\n    const isFirstCol = (act.col === 0) ? 'first-col' : ''\n    const isDayHeadClass = (act.literalDay) ? 'literal-day' : ''\n    const _isOver = (isOver) ? 'is-over' : ''\n \n   \n    return (\n        <React.Fragment>\n            {act.literalDay && <div  className={`activity-prev-assembly empty-assembly ${isFirstCol} ${isDayHeadClass}  ${_isOver}`} style={{ gridRow: `${rowIdx || 'auto'}/span 1` }} key={utils.makeId()}>\n                {act.date}\n            </div>}\n            {!act.literalDay && <div ref={drop} className={`activity-prev-assembly empty-assembly ${isFirstCol} ${isDayHeadClass}  ${_isOver}`} style={{ gridRow: `${rowIdx || 'auto'}/span 1` }} key={utils.makeId()}>\n                {act.date}\n            </div>}\n        </React.Fragment>\n    )\n}\n","import React from 'react'\nimport { utils } from '../../services/utils'\nimport { ActivitiePreview } from './ActivitiePreview'\nimport { OpenDaySlot } from './OpenDaySlot'\n\nexport function DayActivities({ day, getRowIdx, onRemoveAct, onEdit, destinations, onDragMove, onOpenDetails }) {\n\n    function reCalcPos(day) {\n        let newDay = []\n        let i = 0;\n        while (i < 35) {\n            newDay.push(day[i])\n            i += day[i].id ? day[i].duration : 1\n        }\n        return newDay\n    }\n    let newDay = reCalcPos(day)\n\n\n    return (\n        <div className=\"day-list-assembly\">\n            {newDay.map((act) => {\n                if (act.id) {\n                    return <ActivitiePreview\n                        destinations={destinations} onEdit={onEdit} onRemoveAct={onRemoveAct}\n                        getRowIdx={getRowIdx} key={utils.makeId()} act={act} onOpenDetails={onOpenDetails} />\n\n                } else {\n                    return <OpenDaySlot\n                        destinations={destinations} onEdit={onEdit} onRemoveAct={onRemoveAct}\n                        getRowIdx={getRowIdx} key={utils.makeId()} act={act} onDragMove={onDragMove} />\n                }\n            })}\n        </div>\n    )\n}\n","import React from 'react'\nimport { utils } from '../../services/utils'\n\nexport function DayTimeLine() {\n\n\n    return (\n        <div className=\"time-line-assembly\">\n\n            {(function () {\n                let times = []\n                for (let i = 0; i < 35; i++) {\n                    let time = <div key={utils.makeId()} className=\"time-assembly\">\n                        {(i % 2 === 0) && <span>{`${7 + i / 2}:00`}</span>}\n                    </div>\n                    times.push(time)\n                }\n                return times\n\n            })()}\n        </div>\n    )\n}\n","import React from 'react'\n// var gFreeDays = 14\nexport function DestNamePrev({ dest, updateFreeDays, freeDays, destinations }) {\n    \n    const idx = destinations.findIndex(_dest => _dest.name === dest.name)\n    const display = (dest.duration) ? '' : 'none'\n    return (\n\n        <div className={`dest-name-preview dest-head-${idx} `} style={{ gridColumn: `span ${dest.duration}`, display: display }}>\n            {dest.name}\n        </div>\n    )\n}\n","import { utils } from '../../services/utils'\nimport { DestNamePrev } from './DestNamePrev'\nimport React from 'react'\n\n\nexport function DestinationsHeader({ destinations, allDestinations, daysCount }) {\n    destinations.sort((dest1, dest2) => dest1.time.startDate - dest2.time.startDate)\n    return (\n        <div className=\"destinations-header\" style={{gridTemplateColumns: `repeat(${daysCount*2}, minmax(25px, 1fr))`}}>\n            {destinations.map((dest, idx) => {\n                return <DestNamePrev destinations={allDestinations} idx={idx}  key={utils.makeId()} dest={dest} />\n            })}\n        </div>\n    )\n\n}\n","import React, { Component } from 'react'\nimport { eventBus } from '../../services/eventBusService';\nimport { utils } from '../../services/utils';\nimport { DayActivities } from './DayActivities'\nimport { DayTimeLine } from './DayTimeLine';\nimport { DestinationsHeader } from './DestinationsHeader';\n\nexport class TripAssembly extends Component {\n\n    state = {\n        activities: null,\n        weekMat: null,\n        page: 0,\n        startDate: null,\n        endDate: null,\n        tripLength: '',\n        actsToDisplay: null,\n        minDestinations: null,\n        daysCount: 7\n    }\n    removeBus;\n    async componentDidMount() {\n\n        const _removeBus = eventBus.on('markDay', (day) => {\n            this.setChosenDay(day)\n            return\n        })\n        this.removeBus = _removeBus\n\n        this.initiateAssembly()\n\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.trip === this.props.trip) return\n        this.initiateAssembly(this.state.daysCount, this.state.page)\n    }\n\n    setChosenDay = async (day) => {\n        const linearDaysDates = this.getLinearTripDays().map(timeStamp => {\n            const date = new Date(timeStamp)\n            return date.toLocaleDateString()\n        })\n        const currDayDate = day.day.toLocaleDateString()\n        const page = linearDaysDates.findIndex(date => {\n            return date === currDayDate\n        })\n        this.props.openSideBar()\n        this.initiateAssembly(1, page)\n\n    }\n\n    initiateAssembly = async (daysCount = 7, page = 0) => {\n        const { destinations, activities } = this.props.trip\n        const windowWidth = window.window.innerWidth\n        if (daysCount === 7) {\n\n            if (windowWidth <= 1300) {\n                daysCount = 6\n            }\n            if (windowWidth <= 1000) {\n                daysCount = 5\n            }\n            if (windowWidth <= 850) {\n                daysCount = 4\n            }\n            if (windowWidth <= 700) {\n                daysCount = 3\n            }\n            if (windowWidth <= 530) {\n                daysCount = 2\n            }\n        }\n\n        let startDate, endDate\n        [startDate, endDate] = [destinations[0].startDate, destinations[destinations.length - 1].endDate]\n        const tripLength = utils.calculateDays(startDate, endDate)\n        await this.setState({ ...this.state, tripLength, startDate, endDate, activities, daysCount, page }, () => this.loadWeekMat())\n        await this.setState({ minDestinations: this.getMinDestinations() })\n    }\n\n\n    componentWillUnmount() {\n        this.removeBus()\n    }\n\n\n    loadWeekMat = () => {\n        const { activities } = this.props.trip;\n        const { page, daysCount } = this.state\n        const actsDaysMap = this.mapActsToDays(activities);\n        const WeeklyActsToDisplay = actsDaysMap.slice(page * daysCount, page * daysCount + daysCount)\n        const destTimeStamp = WeeklyActsToDisplay[0][1][0].at\n        const startDate = utils.getDateDay(destTimeStamp)\n        let weekMat = utils.createMat(this.state.daysCount, 35);\n        let col = 0\n\n        let prevDate = WeeklyActsToDisplay[0][0]\n        for (let i = 0; i < WeeklyActsToDisplay.length; i++) {\n            let currDate, currDayActs\n            [currDate, currDayActs] = [WeeklyActsToDisplay[i][0], WeeklyActsToDisplay[i][1]];\n            if (prevDate > currDate) {\n                currDate += this.getDaysInMonth(destTimeStamp)\n            }\n            prevDate = currDate\n            col = currDate - startDate\n            currDayActs.forEach(act => {\n                if (!act.freeDay) {\n                    let row = this.getRowIdx(act.at)\n                    act = { ...act, col, row }\n                    weekMat[row][col] = act\n                }\n            })\n        }\n        weekMat = this.showDaysName(destTimeStamp, weekMat)\n        this.setState({ weekMat, actsToDisplay: WeeklyActsToDisplay })\n    }\n\n    onRemoveAct = (actId) => {\n        this.props.showModal('removeActivity', { removeAct: this.removeAct, actId, })\n    }\n\n    removeAct = async (actId) => {\n        let { activities } = this.state;\n        activities = await activities.filter((_act => _act.id !== actId))\n        await this.props.updateTripAct(activities)\n        await this.setState({ activities })\n        await this.props.closeModal()\n    }\n\n    showDaysName(startTime, mat) {\n        for (let j = 0; j < this.state.daysCount; j++) {\n            const _time = startTime + j * 24 * 60 ** 2 * 1000\n            const time = new Date(_time)\n\n            const day = (\"0\" + time.getDate()).slice(-2);\n            const month = (\"0\" + (time.getMonth() + 1)).slice(-2);\n            const year = time.getFullYear();\n            const localDate = day + '/' + month + '/' + year\n\n            mat[0][j] = { duration: 1, literalDay: utils.getWeekDay(_time), date: localDate, time }\n        }\n        return mat\n    }\n\n\n\n\n    isOccTimeSlot = (activity) => {\n        const { activities } = this.state\n        const currStartTime = activity.at\n\n        const currEndTime = currStartTime + activity.duration * 30 * 60 * 1000\n        for (let i = 0; i < activities.length; i++) {\n            const act = activities[i]\n            const checkedStartTime = act.at\n            const checkedEndTime = act.at + act.duration * 30 * 60 * 1000\n            if (activity.id && activity.id === act.id) continue\n\n            if (\n                (((currStartTime > checkedStartTime) && (currStartTime < checkedEndTime)) ||\n                    ((currEndTime > checkedStartTime) && (currEndTime < checkedEndTime))) ||\n\n                ((checkedStartTime > currStartTime) && (checkedStartTime < currEndTime)) ||\n                ((checkedEndTime > currStartTime) && (checkedEndTime < currEndTime))\n\n            ) {\n                return true\n            }\n        }\n        return false\n    }\n\n\n    mapActsToDays = () => {\n        const { activities } = this.props.trip;\n        activities.sort((act1, act2) => act1.at - act2.at)\n        let _map = activities.reduce((acc, activity) => {\n\n            let day = utils.getDateDay(activity.at)\n            if (!acc[day]) acc[day] = []\n            acc[day].push(activity)\n            return acc\n\n        }, {})\n        _map = this.sortDateMap(_map)\n        return _map\n    }\n\n\n\n    getCol = (mat, col) => {\n        const MatColumn = (_mat, n) => _mat.map(x => x[n]);\n        return MatColumn(mat, col);\n    }\n\n    sortDateMap(map) {\n        let arrSorted = [];\n        for (let day in map) {\n\n            arrSorted.push([+day, map[day]]);\n        }\n        const linearDays = this.getLinearTripDays();\n        for (let i = 0; i < linearDays.length; i++) {\n            let currDay = utils.getDateDay(linearDays[i])\n            let isInclude = arrSorted.find((day) => day[0] === currDay)\n            if (!isInclude) {\n                arrSorted.push([currDay, [{ at: linearDays[i], freeDay: true }]])\n            }\n\n        }\n        arrSorted.sort(function (day1, day2) {\n            return day1[1][0].at - day2[1][0].at;\n        });\n\n        return arrSorted\n\n    }\n    onEdit = (act) => {\n        this.props.showModal('editActivity', { saveAct: this.saveAct, act, isOccTimeSlot: this.isOccTimeSlot, destinations: this.props.trip.destinations })\n    }\n\n    onOpenDetails = (act) => {\n        this.props.showModal('activityDetails', { saveAct: this.saveAct, act, isOccTimeSlot: this.isOccTimeSlot, destinations: this.props.trip.destinations })\n\n    }\n\n    onDragMove = ({ pos }, id) => {\n\n        const activity = this.state.activities.find(act => act.id === id)\n        const dest = this.props.trip.destinations.find(_dest => _dest.name === activity.destination)\n\n        let newTime = this.getTimeFromIdx(pos)\n\n        let destStart = utils.setToHourMinuets(dest.startDate, 6, 0)\n        let desEnd = utils.setToHourMinuets(dest.endDate, 23, 59)\n        if (newTime < destStart || newTime > desEnd) {\n            this.props.showMsg({ type: 'invalid-move', msg: 'Cannot move activities to another destination!' })\n            return\n        }\n        if (!newTime) return\n        const actCopy = { ...activity, at: newTime }\n\n        if (this.isOccTimeSlot(actCopy)) {\n            this.props.showMsg({ type: 'invalid-move', msg: 'You aleardy have plans for that date! please choose a different one.' })\n            return\n        }\n\n        activity.at = newTime\n        this.saveAct(activity)\n    }\n\n    getTimeFromIdx = ({ i, j }) => {\n        const { page } = this.state\n        const currWeekDates = this.getLinearTripDays()\n        if (j + page * this.state.daysCount >= currWeekDates.length) {\n            return false\n        }\n\n        const currDayDate = new Date(currWeekDates[j + page * this.state.daysCount])\n        if (i % 2 !== 0) {\n            currDayDate.setHours(7 + (i - 1) / 2, 0)\n        } else {\n            currDayDate.setHours(6 + i / 2, 30)\n\n        }\n\n        return currDayDate.getTime()\n    }\n\n    saveAct = (act) => {\n        let { activities } = this.state;\n        if (act.id) {\n            activities = activities.map(_act => {\n                return (_act.id === act.id) ? act : _act\n            })\n        } else {\n            act.id = utils.makeId()\n            activities.push(act)\n        }\n        this.props.closeModal()\n\n        this.props.updateTripAct(activities)\n        this.setState({ activities })\n        this.loadWeekMat()\n    }\n\n\n    getDaysInMonth(timeStamp) {\n        let time = new Date(timeStamp)\n        let year, month;\n        [month, year] = [time.getMonth(), time.getFullYear()]\n\n        return new Date(year, month + 1, 0).getDate();\n    }\n\n\n    getWeekDests = () => {\n        const { page, daysCount } = this.state\n        var { destinations } = this.props.trip\n        const linearDays = this.getLinearTripDays()\n        let minDay = linearDays[page * (daysCount)]\n        let idxMaxDay = page * daysCount\n        if (idxMaxDay + daysCount - 1 >= linearDays.length) {\n            idxMaxDay = linearDays.length - 1\n        } else {\n            idxMaxDay += daysCount - 1\n        }\n        let maxDay = linearDays[idxMaxDay]\n        minDay = new Date(minDay)\n        maxDay = new Date(maxDay)\n        minDay = utils.setToHourMinuets(minDay, 7, 0)\n        maxDay = utils.setToHourMinuets(maxDay, 23, 59)\n        return destinations.filter(dest => {\n            let destStart = new Date(dest.startDate)\n            let destEnd = new Date(dest.endDate)\n            destStart = utils.setToHourMinuets(destStart, 10, 0)\n            destEnd = utils.setToHourMinuets(destEnd, 10, 0)\n\n            return ((destStart >= minDay && destStart <= maxDay) ||\n                (destEnd >= minDay && destEnd <= maxDay)\n            )\n\n        })\n    }\n\n    getMinDestinations = () => {\n\n        const destinations = this.getWeekDests()\n        const minDestinations = []\n        const destsHeadLength = this.mapDestsToHeaderLength()\n        const destsNames = Object.keys(destsHeadLength)\n        const destsLength = Object.values(destsHeadLength)\n        for (let i = 0; i < destsNames.length; i++) {\n\n            const time = destinations.find(dest => {\n                return dest.name === destsNames[i]\n            })\n\n            minDestinations.push({ name: destsNames[i], duration: destsLength[i], time })\n        }\n        return minDestinations\n\n\n    }\n\n\n    mapDestsToHeaderLength = () => {\n        const { trip } = this.props\n        const { page } = this.state\n        const { destinations } = this.props.trip\n        const tripStart = trip.destinations[0].startDate\n        const tripEnd = trip.destinations[trip.destinations.length - 1].endDate\n        const destinationsTimes = trip.destinations.map((destination, idx) => {\n            return { start: new Date(destination.startDate), end: new Date(destination.endDate), idx }\n        })\n        const currWeekDests = utils.calculateDates(tripStart, tripEnd, destinationsTimes).slice(page * this.state.daysCount, page * this.state.daysCount + this.state.daysCount)\n        let currDestName;\n        let currDest;\n        return currWeekDests.reduce((acc, { td }, idx) => {\n\n            if (td.full || td.full === 0) {\n                currDest = destinations[td.full]\n                currDestName = currDest.name\n                acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 2 : 2\n            } else {\n                if (((td.start || td.start === 0) && (!td.end && td.end !== 0))) {\n                    currDest = destinations[td.start]\n                    currDestName = currDest.name\n                    acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 2 : 2\n                } else {\n\n                    if (td.start || td.start === 0) {\n                        currDest = destinations[td.start]\n                        currDestName = currDest.name\n                        acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 1 : 1\n\n                    }\n                    if (td.end || td.end === 0) {\n                        currDest = destinations[td.end]\n                        currDestName = currDest.name\n                        acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 1 : 1\n\n                    }\n\n                }\n            }\n            return acc\n        }, {})\n\n    }\n\n    getLinearTripDays = () => {\n        const linearDays = []\n        let { startDate, tripLength } = this.state\n        for (let i = 0; i < tripLength; i++) {\n            linearDays.push(startDate + i * 24 * 60 * 60 * 1000)\n        }\n        return linearDays\n    }\n\n    getDestsWithActs = (destinations, allActs) => {\n        destinations = destinations.filter((dest) => {\n            return this.isActInDests(dest, allActs)\n        })\n        return destinations\n\n    }\n\n    isActInDests(dest, allActs) {\n        for (let acts of allActs) {\n            let currActs = acts[1]\n            for (let act of currActs) {\n                if (act.destination === dest.name) return true\n            }\n        }\n        return false\n    }\n\n    getRowIdx = (timeStamp) => {\n        const time = new Date(timeStamp)\n        const hour = time.getHours()\n        const minuets = time.getMinutes()\n        let slot;\n        if (minuets === 0) {\n            slot = (hour - 6) * 2 - 1\n        } else {\n            slot = (hour - 6) * 2\n        }\n        return slot\n    }\n\n\n    onTogglePage = async (direction) => {\n        const { tripLength, page } = this.state\n        let pageCount = Math.ceil(tripLength / this.state.daysCount)\n        let newPage;\n        if (direction === 'next') {\n            newPage = (page + 1) % pageCount\n\n        } else {\n            newPage = (page - 1 < 0) ? pageCount - 1 : page - 1\n        }\n        await this.setState({ page: newPage })\n        await this.loadWeekMat()\n        this.setState({ minDestinations: this.getMinDestinations() })\n    }\n\n    getDayNumOfAct = (day) => {\n        return day.reduce((acc, act) => {\n            acc += (act.id) ? 1 : 0\n            return acc\n        }, 0)\n    }\n\n    getTwoDig = (num) => {\n        let numStr = num + ''\n        return (numStr.length === 1) ? '0' + numStr : numStr\n    }\n\n    renderDayActivities(mat) {\n        const actPreviews = []\n\n        for (let i = 0; i < mat[0].length; i++) {\n\n            var col = this.getCol(mat, i)\n            actPreviews.push(<DayActivities onDragMove={this.onDragMove} getTimeFromIdx={this.getTimeFromIdx}\n                destinations={this.props.trip.destinations} onEdit={this.onEdit} onOpenDetails={this.onOpenDetails}\n                onRemoveAct={this.onRemoveAct} getRowIdx={this.getRowIdx} key={utils.makeId()} day={col} />\n            )\n        }\n\n        return actPreviews\n    }\n\n    setFullAssembly = () => {\n        this.initiateAssembly(7, 0)\n        this.props.setDestsMarkers()\n    }\n\n    render() {\n        const { weekMat, minDestinations, daysCount } = this.state\n        const { destinations } = this.props.trip\n        if (!weekMat || !minDestinations) return <div>Loading...</div>\n        const dayActs = this.renderDayActivities(weekMat)\n        this.mapDestsToHeaderLength()\n        return (\n            <div className=\"assembly-container\">\n\n\n\n                {daysCount !== 1 && <div className=\"destinations-header-wraper\">\n                    <div className=\"toggle-page prev\" onClick={() => this.onTogglePage('prev')}><i className=\"fas fa-chevron-circle-left\"></i></div>\n\n                    <div className=\"toggle-page next\" onClick={() => this.onTogglePage('next')}><i className=\"fas fa-chevron-circle-right\"></i></div>\n                </div>}\n                {daysCount === 1 && <section className=\"full-assembly \">\n                    <button className=\"styled-button\" onClick={this.setFullAssembly}>Back</button>\n                </section>}\n                <DestinationsHeader daysCount={daysCount} allDestinations={destinations} destinations={minDestinations} />\n                <div className={'trip-assembly-main full'} style={{ gridTemplateColumns: `repeat(${daysCount}, minmax(70px, 1fr))` }}>\n                    <DayTimeLine />\n                    {dayActs}\n                </div >\n                <button className='editActivity styled-button' onClick={() => this.props.showModal('editActivity', { saveAct: this.saveAct, isOccTimeSlot: this.isOccTimeSlot, act: null, destinations: this.props.trip.destinations })}>add activity</button>\n            </div>\n        )\n    }\n}\n\n","import React from 'react'\nexport function MembersPreview({ member }) {\n    const url=member.imgUrl||'https://res.cloudinary.com/roidinary/image/upload/v1600790523/Untitled-1_xumtnf.jpg'\n    return (\n        <div className=\"member-preview\" >\n            <img className=\"image-preview\" src={url} alt=\"img Preview\"></img>\n            <div className=\"is-active-circle\"></div>\n        </div>\n    )\n}","import React from 'react'\nimport { GooglePlaces } from '../MainCmps/GooglePlaces'\nimport {\n    geocodeByAddress,\n    // geocodeByPlaceId,\n    getLatLng,\n} from 'react-places-autocomplete';\n\nexport class AddDestination extends React.Component {\n    state = {\n        addDestOpen: false,\n        destination: {\n            name: '',\n            days: '',\n            location: null\n        }\n    }\n    componentDidMount() {\n        this.setState({\n            destination: {\n                name: '',\n                days: '',\n                location: null\n            }\n        })\n    }\n\n\n    handleAddress = (name) => {\n        this.setState({ destination: { ...this.state.destination, name } })\n    }\n\n    handleSelect = async (value) => {\n        try {\n            const results = await geocodeByAddress(value);\n            const latlng = await getLatLng(results[0])\n            this.setState({ destination: { ...this.state.destination, location: latlng, name: value }})\n\n        }\n        catch (err) {\n            console.log(err, 'err');\n        }\n    }\n\n    handleChange = (ev) => {\n        const { name, value } = ev.target;\n        this.setState({ destination: { ...this.state.destination, [name]: value } })\n\n    }\n    onSubmit = (ev) => {\n        ev.preventDefault()\n        this.toggleAddDestination()\n        this.props.addDestination(this.state.destination)\n        this.setState({\n            destination:{\n                name: '',\n                days: '',\n                location: null\n            }\n        })\n\n    }\n    toggleAddDestination = () => {\n        this.setState({ addDestOpen: !this.state.addDestOpen })\n    }\n\n    render() {\n        const addDestOpen = this.state.addDestOpen ? 'form-open' : ''\n        return (\n            <React.Fragment>\n                <i className=\"fas fa-plus add-destination-button\" onClick={this.toggleAddDestination}></i>\n                <div className={`add-destination column ${addDestOpen}`}>\n                    <div className=\"styled-header\">Add destination</div>\n                    <form onSubmit={this.onSubmit} className={`add-destination-form  `}>\n                        <input\n                            type=\"text\"\n                            placeholder=\"Enter destination\"\n                            // className=\"styled-input\"\n                            name=\"name\"\n                            value={this.state.destination.name}\n                            onChange={this.handleChange}\n                        ></input>\n                        {/* <GooglePlaces\n                            handleSelect={this.handleSelect}\n                            handleAddress={this.handleAddress}\n                            address={this.state.destination.name}\n                            location={this.state.destination.location}\n                        /> */}\n\n\n                        <input\n                            type=\"number\"\n                            placeholder=\"Number of days\"\n                            // className=\"styled-input\"\n                            name=\"days\"\n                            value={this.state.destination.days}\n                            onChange={this.handleChange}\n                        ></input>\n                        <button className=\"styled-button\">Add!</button>\n                    </form>\n                    <div className=\"add-destination-footer\"></div>\n                </div>\n            </React.Fragment>\n        )\n    }\n\n\n\n}\n","import React from 'react'\nimport { utils } from '../../services/utils'\n\nexport function WeekPreview({ dates,showDay }) {\n    function hotDog(date) {\n        if (!date.td) return\n        const keys = Object.keys(date.td)\n        return keys.map(key => {\n            const className = `dest-${date.td[key]} ${key}`\n            return <div key={utils.makeId()} className={className}></div>\n        })\n\n    }\n\n    return (\n        <tr key={utils.makeId()}>\n            {dates.map((date, idx) => <td onClick={()=>showDay(date)} className={`${!date.td?'faded':''}`} key={idx}>{new Date(date.day).getDate()}{hotDog(date)}</td>)}\n        </tr>\n    )\n\n}\n","import React from 'react'\n\nimport { utils } from '../../services/utils'\nimport { WeekPreview } from './WeekPreview'\n\n\nexport function RouteCalendar({ trip,showDay }) {\n\n    function generateCalendar() {\n        const tripStart = trip.destinations[0].startDate\n        const tripEnd = trip.destinations[trip.destinations.length - 1].endDate\n        const destinationsTimes = trip.destinations.map((destination,idx) => {\n            return { start: new Date(destination.startDate), end: new Date(destination.endDate) , idx }\n        })\n        const calendarData = calculateDates(tripStart, tripEnd, destinationsTimes)\n        const fullCalendarData = getDaysAround(calendarData, tripStart, tripEnd)\n        return fullCalendarData\n    }\n    function getDaysAround(data, start, end) {\n        let fullCalendarData = getFirstSunday(start, data)\n        fullCalendarData = getLastSaturday(end, data)\n        return fullCalendarData\n\n    }\n\n    function getFirstSunday(date, calendarData) {\n        let currDay = new Date(date)\n        while (currDay.getDay() > 0) {\n            currDay = new Date(currDay.getTime() - (1000 * 60 * 60 * 24))\n            calendarData.unshift({ day: currDay })\n        }\n        return calendarData\n\n    }\n    function getLastSaturday(date, calendarData) {\n        let currDay = new Date(date)\n        while (currDay.getDay() < 6) {\n            currDay = new Date(currDay.getTime() + (1000 * 60 * 60 * 24))\n            calendarData.push({ day:currDay })\n        }\n        return calendarData\n    }\n\n\n\n    function renderTable(data) {\n        const weekCmps = []\n        if (data.length % 7 !== 0) return null\n        let weeksCount = data.length / 7;\n        while (weeksCount) {\n            weekCmps.push(<WeekPreview showDay={showDay} key={utils.makeId()} dates={data.splice(0, 7)}  />)\n            weeksCount--\n        }\n        return weekCmps\n\n    }\n\n    function calculateDates(start, end, destinations) {\n        let nextDay = new Date(start)\n        let dates = [{ day: nextDay, td:{'start':0} }]\n        while (nextDay.getDate() !== new Date(end).getDate()) {\n            nextDay = new Date(nextDay.getTime() + (1000 * 60 * 60 * 24))\n            dates.push({ day: nextDay, td:''})\n            destinations.forEach(dest=>{\n                if(dest.start.getDate()===nextDay.getDate()&& dest.start.getMonth()===nextDay.getMonth()){\n                    dates[dates.length-1].td={...dates[dates.length-1].td,'start':dest.idx}\n                }else if(dest.start<nextDay && nextDay.setHours(12)<dest.end.setHours(11) ){\n                    dates[dates.length-1].td={...dates[dates.length-1].td,'full':dest.idx}\n                }else if(dest.end.getDate()===nextDay.getDate()&& dest.end.getMonth()===nextDay.getMonth()){\n                    dates[dates.length-1].td={...dates[dates.length-1].td,'end':dest.idx}\n                }\n            })\n        }\n        return dates\n    }\n\n\n    const calendarData = generateCalendar()\n    return (\n        <table className=\"route-calendar\">\n            <thead className=\"table-header\">\n                <tr >\n                    <th>\n                        S\n                    </th>\n                    <th>\n                        M\n                    </th>\n                    <th>\n                        T\n                    </th>\n                    <th>\n                        W\n                    </th>\n                    <th>\n                        T\n                    </th>\n                    <th>\n                        F\n                    </th>\n                    <th>\n                        S\n                    </th>\n                </tr>\n\n            </thead>\n            <tbody>\n                {renderTable(calendarData) || 'w'}\n            </tbody>\n        </table>\n    )\n}\n","import React from 'react'\nimport { useDrag } from 'react-dnd'\n\nimport { useDrop } from 'react-dnd'\n\nimport { ItemTypes } from '../../services/dndItems.js'\nimport { utils } from '../../services/utils'\n\nexport function RouteTimeLinePreview({ destination, idx, isLast, updateDestinations}) {\n    const [{ isDragging }, drag] = useDrag({\n        item: {\n            type: ItemTypes.DESTINATION,\n            id: idx\n        },\n        collect: monitor => ({\n            isDragging: !!monitor.isDragging()\n        })\n    })\n    const [{ isOver }, drop] = useDrop({\n        accept: ItemTypes.DESTINATION,\n        drop: (item, monitor) => {\n            if(item.id===idx)return\n            updateDestinations(item.id, idx)\n        },\n        collect: monitor => ({\n            isOver: !!monitor.isOver()\n        })\n    })\n    if(isDragging===true){\n    }\n\n    const _isOver = (isOver)?'is-dragging':''\n    const letFire = isDragging? 'on':'';\n    return (\n        <React.Fragment>\n            { <div className={`fire-ring ${letFire}`}></div>}\n            <div ref={drop} className=\"time-line-area flex align-center\">\n                <div className=\"route-time-line-context flex align-center \">\n                    <div ref={drag} className={`index-ball dest-${idx} flex align-center justify-center  ${_isOver} `} ><p>{idx + 1}</p></div>\n                    <div className=\"time-line-text\">\n                        <p>{destination.name}</p>\n                        <p>{utils.calculateDays(destination.startDate, destination.endDate) - 1} Nights</p>\n                    </div>\n                </div>\n            </div>\n            { !isLast && <div className=\"line\"></div>}\n        </React.Fragment>\n    )\n}","import React from 'react'\n\nimport { utils } from '../../services/utils'\nimport { RouteTimeLinePreview } from './RouteTimeLinePreview'\n\nexport function RouteTimeLine({ trip, updateDestinations }) {\n    // export class RouteTimeLine extends React.Component {\n  \n    return (\n        <div  className=\"route-time-line\">\n            {trip.destinations.map((destination, idx) => {\n                return (\n                    <RouteTimeLinePreview\n                        key={utils.makeId()}\n                        destination={destination}\n                        idx={idx}\n                        isLast={(idx + 1) === trip.destinations.length ? true : false}\n                        updateDestinations={updateDestinations}\n                    />)\n            })}\n        </div>\n    )\n\n}\n","// import { GoogleApiWrapper } from 'google-maps-react';\nimport React from 'react'\nimport { useDrop } from 'react-dnd'\n\nimport { ItemTypes } from '../../services/dndItems.js'\nimport { MembersPreview } from '../TripApp/MemberPreview';\nimport { AddDestination } from './AddDestiantion';\nimport { RouteCalendar } from './RouteCalendar'\nimport { RouteTimeLine } from './RouteTimeLine'\n\nexport function TripRoute({ trip, updateDestinations, showModal, addDestination, toggleChat, showDay }) {\n    const [{ isOver }, drop] = useDrop({\n        accept: ItemTypes.DESTINATION,\n        drop: (item, monitor) => {\n            updateDestinations(item.id, -1)\n        },\n        collect: monitor => ({\n            isOver: !!monitor.isOver()\n        })\n    })\n    return (\n        <div className=\"trip-route flex column\">\n            <div className=\"members-preview flex justify-between align-center\">\n                <div className=\"flex\">\n                    {trip.members.map((member, idx) => <MembersPreview key={idx} member={member} />)}\n                </div>\n                <button className=\"ustyled-button add-user-btn\" onClick={() => showModal('add-member', trip._id)}><i className=\"fas fa-user-plus \"></i></button>\n            </div>\n            <RouteCalendar trip={trip} showDay={showDay} />\n            <div className=\"all-destinations-area\">\n                <div className=\"trip-bar-icons trip-bar-destinations-icons flex justify-between\">\n                    <AddDestination addDestination={addDestination} />\n                    <i ref={drop} className={`fas fa-trash `}></i>\n\n                </div>\n                <RouteTimeLine trip={trip} updateDestinations={updateDestinations} />\n            </div>\n            <div className=\"trip-bar-icons flex justify-between flex1 align-end\">\n                <img onClick={() => showModal('trip-reviews')} className=\"reviews-btn\" src=\"https://res.cloudinary.com/idanrozen/image/upload/v1601286406/6719970451595452853_wdwgqc.svg\" alt=\"\" />\n                <i className=\"fas fa-comments\" onClick={toggleChat} ></i>\n            </div>\n\n        </div>\n    )\n\n\n}\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { socketService } from '../../services/socketService';\n\nclass _Chat extends Component {\n    state = {\n        msg: {\n            from: this.props.loggedInUser ? this.props.loggedInUser.username : 'Traveler',\n            txt: ''\n        },\n        msgs: [],\n        isTyping: ''\n\n    }\n\n    componentDidMount() {\n        socketService.on('chat addMsg', this.addMsg);\n        socketService.on('isTyping', this.userTyping);\n        socketService.on('notTyping', this.userTyping);\n\n        // socketService.emit('chat history');\n        // socketService.on('load history', this.loadHistory)\n    }\n    componentWillUnmount() {\n        socketService.off('chat addMsg', this.addMsg);\n        socketService.off('isTyping', this.userTyping);\n        socketService.off('notTyping', this.userTyping);\n\n\n        // socketService.off('chat history', this.loadHistory)\n        socketService.terminate();\n    }\n    loadHistory = history => {\n        this.setState({ msgs: history || [] });\n    }\n    addMsg = newMsg => {\n        this.setState(prevState => ({ msgs: [...prevState.msgs, newMsg] }));\n    }\n    sendMsg = ev => {\n        ev.preventDefault();\n        socketService.emit('chat newMsg', this.state.msg);\n        socketService.emit(\"stopTyping\", \"\");\n        // this.addMsg(this.state.msg)//remove\n        const user = this.props.loggedInUser ? this.props.loggedInUser.username : 'Traveler'\n        this.setState({ msg: { from: user, txt: '' } });\n    }\n    userTyping = isTyping => {\n        this.setState({ isTyping });\n    }\n\n    msgHandleChange = ev => {\n        const { name, value } = ev.target;\n        if ((value.trim()).length > 0) {\n            const user = this.props.loggedInUser ? this.props.loggedInUser.username : 'Traveler'\n            socketService.emit('user typing', user);\n\n        }\n        else {\n            socketService.emit(\"stopTyping\", \"\");\n        }\n        this.setState(prevState => {\n            return {\n                msg: {\n                    ...prevState.msg,\n                    [name]: value\n                }\n            }\n        })\n    }\n    render() {\n        \n        \n        return (\n            <div className={`chat-container flex column  ${this.props.chatOpen ? 'open' : ''}`}>\n                <div className=\"chat-header styled-header\">\n                    {this.props.trip.destinations[0].name} Chat\n                </div>\n\n                <ul className=\"chat-history\">\n                    {this.state.msgs.map((msg, idx) => (\n                        <li key={idx}>\n                            <div className=\"message-data\">{this.props.loggedInUser ? ((this.props.loggedInUser.username === msg.from) ? 'Me' : msg.from) : ((msg.from === 'Traveler') ? 'Traveler' : msg.from)}</div>\n\n\n\n                            <div className=\"message\">{msg.txt}</div>\n\n                        </li>\n                    ))}\n                </ul>\n\n                {this.props.loggedInUser ? \n                ((this.state.isTyping && this.state.isTyping !== this.props.loggedInUser.username) ? <p>{this.state.isTyping} is Typing</p> : '') \n                : ((this.state.isTyping && !this.state.msg.txt.trim().length) ? <p>{this.state.isTyping} is Typing</p> : '')}\n\n\n                <form className=\"chat-send flex align-center\" onSubmit={this.sendMsg}>\n                    <input\n                        type=\"text\"\n                        value={this.state.msg.txt}\n                        onChange={this.msgHandleChange}\n                        name=\"txt\"\n                        autoComplete=\"off\"\n                        placeholder=\"New message\"\n\n                    />\n                    <button><i className=\"far fa-paper-plane\"></i></button>\n                </form>\n\n            </div>\n\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        loggedInUser: state.userReducer.loggedInUser\n    }\n}\n\nconst mapDispatchToProps = {\n\n}\n\nexport const Chat = connect(mapStateToProps, mapDispatchToProps)(_Chat);","import React from 'react'\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\nimport { utils } from '../../services/utils';\nimport httpService from '../../services/httpService';\n\n\n\n\n\nclass _MapContainer extends React.Component {\n    state = {\n        bounds: '',\n        markers: [],\n        selectedPlace: '',\n        activeMarker: {},\n        showingInfoWindow: false\n    }\n\n    initiateMarkerABounds() {\n        const markers = [];\n        const bounds = new this.props.google.maps.LatLngBounds();\n        for (var i = 0; i < this.props.markers.length; i++) {\n            if (!this.props.markers[i].location || !this.props.markers[i].location.lng) continue\n            bounds.extend(new this.props.google.maps.LatLng(this.props.markers[i].location));\n            markers.push(this.props.markers[i])\n        }\n        return { markers, bounds }\n\n    }\n\n    componentDidMount() {\n        const { markers, bounds } = this.initiateMarkerABounds()\n        const BASE_IMG_URL = 'https://res.cloudinary.com/roidinary/image/upload/c_scale,w_40/v1601311538/'\n        const imgs = [\n            `${BASE_IMG_URL}location1_xebwou.png`,\n            `${BASE_IMG_URL}location2_lxtqsq.png`,\n            `${BASE_IMG_URL}location3_zly9ql.png`,\n            `${BASE_IMG_URL}location4_venppr.png`,\n            `${BASE_IMG_URL}location5_xervod.png`,\n            `${BASE_IMG_URL}location6_fql1xk.png`\n        ]\n        this.setState({ bounds, markers, imgs })\n    }\n    componentDidUpdate(prevProps, prevState) {\n        if (this.props.markers !== prevProps.markers) {\n            const { markers, bounds } = this.initiateMarkerABounds()\n            if (markers.length > 1 && this.state.map) {\n                this.state.map.fitBounds(bounds)\n            }\n            else {\n                if (this.state.map && markers[0] && markers[0].location && markers[0].location.lat) {\n                    this.state.map.panTo(this.props.markers[0].location)\n                    this.state.map.setZoom(10)\n\n                }\n            }\n            this.setState({ markers })\n        }\n    }\n    onMarkerClick = (props, marker, e) =>\n        this.setState({\n            selectedPlace: props,\n            activeMarker: marker,\n            showingInfoWindow: true\n        });\n    onMapClicked = (props) => {\n        if (this.state.showingInfoWindow) {\n            this.setState({\n                showingInfoWindow: false,\n                activeMarker: null\n            })\n        }\n    };\n\n    getMarkers = () => {\n        return this.state.markers.map((marker, idx) => {\n            return (<Marker key={utils.makeId()}\n                onClick={this.onMarkerClick}\n                title={marker.name}\n                name={marker.at || ''}\n                position={marker.location}\n                icon={this.state.imgs[idx]}\n            >\n\n            </Marker>)\n        })\n    }\n\n    containerStyle = {\n        width: '100%',\n        height: '300px',\n\n    }\n\n\n    render() {\n\n        return (\n            <Map\n                google={this.props.google}\n                containerStyle={this.containerStyle}\n                zoom={10}\n                onClick={this.onMapClicked}\n                onReady={(mapProps, map) => {\n                    if (this.state.markers.length > 1) map.fitBounds(this.state.bounds)\n\n                    else {\n                        if (this.state.markers[0]) map.panTo(this.state.markers[0].location)\n                    }\n                    this.setState({ map })\n                }}\n                styles={\n\n                    [{\n                        featureType: \"all\",\n                        elementType: \"labels.text.fill\",\n                        stylers: [\n                            {\n                                saturation: 36\n                            },\n                            {\n                                color: \"#333333\"\n                            },\n                            {\n                                lightness: 40\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"all\",\n                        elementType: \"labels.text.stroke\",\n                        stylers: [\n                            {\n                                visibility: \"on\"\n                            },\n                            {\n                                color: \"#ffffff\"\n                            },\n                            {\n                                lightness: 16\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"all\",\n                        elementType: \"labels.icon\",\n                        stylers: [\n                            {\n                                visibility: \"off\"\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"administrative\",\n                        elementType: \"geometry.fill\",\n                        stylers: [\n                            {\n                                color: \"#fefefe\"\n                            },\n                            {\n                                lightness: 20\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"administrative\",\n                        elementType: \"geometry.stroke\",\n                        stylers: [\n                            {\n                                color: \"#fefefe\"\n                            },\n                            {\n                                lightness: 17\n                            },\n                            {\n                                weight: 1.2\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"landscape\",\n                        elementType: \"geometry\",\n                        stylers: [\n                            {\n                                color: \"#f5f5f5\"\n                            },\n                            {\n                                lightness: 20\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"landscape\",\n                        elementType: \"geometry.fill\",\n                        stylers: [\n                            {\n                                color: \"#d5d5d5\"\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"landscape.man_made\",\n                        elementType: \"geometry.fill\",\n                        stylers: [\n                            {\n                                color: \"#7574c0\"\n                            },\n                            {\n                                saturation: \"-37\"\n                            },\n                            {\n                                lightness: \"75\"\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"poi\",\n                        elementType: \"geometry\",\n                        stylers: [\n                            {\n                                color: \"#f5f5f5\"\n                            },\n                            {\n                                lightness: 21\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"poi.business\",\n                        elementType: \"geometry.fill\",\n                        stylers: [\n                            {\n                                color: \"#7574c0\"\n                            },\n                            {\n                                saturation: \"-2\"\n                            },\n                            {\n                                lightness: \"53\"\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"poi.park\",\n                        elementType: \"geometry\",\n                        stylers: [\n                            {\n                                color: \"#dedede\"\n                            },\n                            {\n                                lightness: 21\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"poi.park\",\n                        elementType: \"geometry.fill\",\n                        stylers: [\n                            {\n                                color: \"#7574c0\"\n                            },\n                            {\n                                lightness: \"69\"\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"road.highway\",\n                        elementType: \"geometry.fill\",\n                        stylers: [\n                            {\n                                color: \"#7574c0\"\n                            },\n                            {\n                                lightness: \"25\"\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"road.highway\",\n                        elementType: \"geometry.stroke\",\n                        stylers: [\n                            {\n                                color: \"#ffffff\"\n                            },\n                            {\n                                lightness: 29\n                            },\n                            {\n                                weight: 0.2\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"road.highway\",\n                        elementType: \"labels.text.fill\",\n                        stylers: [\n                            {\n                                lightness: \"38\"\n                            },\n                            {\n                                color: \"#000000\"\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"road.arterial\",\n                        elementType: \"geometry\",\n                        stylers: [\n                            {\n                                color: \"#ffffff\"\n                            },\n                            {\n                                lightness: 18\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"road.local\",\n                        elementType: \"geometry\",\n                        stylers: [\n                            {\n                                color: \"#ffffff\"\n                            },\n                            {\n                                lightness: 16\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"transit\",\n                        elementType: \"geometry\",\n                        stylers: [\n                            {\n                                color: \"#f2f2f2\"\n                            },\n                            {\n                                lightness: 19\n                            }\n                        ]\n                    },\n                    {\n                        featureType: \"water\",\n                        elementType: \"geometry\",\n                        stylers: [\n                            {\n                                color: \"#e9e9e9\"\n                            },\n                            {\n                                lightness: 17\n                            }\n                        ]\n                    }\n                    ]\n                }\n            >\n\n\n                {this.state.markers[0] && this.getMarkers()}\n                <InfoWindow\n                    marker={this.state.activeMarker}\n                    visible={this.state.showingInfoWindow}>\n                    <div>\n                        <h1>{this.state.selectedPlace.title}</h1>\n                        {this.state.selectedPlace.name && <p>{\n                            new Date(this.state.selectedPlace.name).getHours() + ':' + new Date(this.state.selectedPlace.name).getMinutes()\n                        }</p>}\n                    </div>\n                </InfoWindow>\n            </Map>\n        );\n    }\n}\n\nexport const MapContainer = GoogleApiWrapper((props) => {\n    \n    return {\n        apiKey: props.apiKey\n    }\n})(_MapContainer)","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport { loadTrip, addTrip, setTrip, removeTrip } from '../store/actions/tripActions'\nimport { closeModal, showModal } from '../store/actions/modalActions'\nimport { TripAssembly } from '../cmps/TripAssembly/TripAssembly'\nimport { TripRoute } from '../cmps/TripRoute/TripRoute'\nimport { utils } from '../services/utils'\nimport { Chat } from '../cmps/TripApp/Chat'\nimport { socketService } from '../services/socketService'\nimport { MapContainer } from '../cmps/MainCmps/Map';\nimport { closeMsg, showMsg } from '../store/actions/msgActions'\nimport { ErrorMsg } from '../cmps/MainCmps/ErrorMsg'\nimport { eventBus } from '../services/eventBusService'\nimport httpService from '../services/httpService'\n// import locationCevtorRed from 'https://res.cloudinary.com/roidinary/image/upload/v1600377967/locationVectorRed_vzufx4.png'\n\nclass _TripApp extends Component {\n\n    state = {\n        chatOpen: false,\n        settingsOpen: false,\n        isSocketSetup: false,\n        markers: [],\n        sideBar: false,\n        apiKey: ''\n    }\n\n\n\n    async componentDidMount() {\n        const { setTrip, loadTrip, addTrip } = this.props\n        socketService.setup();\n\n\n\n        const { id } = this.props.match.params\n        socketService.emit('enter trip', id);\n        try {\n            await loadTrip(id, true)\n            const apiKey = await httpService.get('apiKey')\n\n            if (this.props.trip.originId) {\n                this.props.showModal('alert-user', this.props.trip)\n            }\n            if (this.props.match.params.openSignup === 'true') {\n                this.props.showModal('signup', id)\n            }\n            const markers = this.getMarkersOfDests()\n            this.setState({ isSocketSetup: true, markers, apiKey })\n\n        }\n        catch (err) {\n        }\n        // socketService.emit('tripToUpdate', newTrip);\n\n        socketService.on('tripUpdated', setTrip);\n\n    }\n\n    getMarkersOfDests = () => {\n        return this.props.trip.destinations.map(dest => {\n            return { location: dest.location, name: dest.name }\n        })\n    }\n    setDestsMarkers = () => {\n        const markers = this.getMarkersOfDests()\n        this.setState({ markers })\n    }\n    async componentWillUnmount() {\n        socketService.off('tripUpdated', this.props.setTrip);\n        if (!this.props.loggedInUser && this.props.trip.createdBy.id === 'guest') {\n            await this.props.removeTrip(this.props.trip._id)\n        }\n    }\n\n    async componentDidUpdate(prevProps, prevState) {\n\n        if (prevProps.trip === this.props.trip) return\n        const markers = this.getMarkersOfDests()\n        this.setState({ markers })\n        // socketService.emit('tripUpdated', this.props.trip);\n    }\n\n    updateDestinations = async (destIdxToMove, moveToIdx) => {\n        let destinations = [...this.props.trip.destinations]\n        let activities = [...this.props.trip.activities]\n        const moveDifference = utils.calculateDays(destinations[destIdxToMove].startDate, destinations[destIdxToMove].endDate)\n        const destTomove = destinations.splice(destIdxToMove, 1)[0]\n        const constant = (1000 * 60 * 60 * 24 * (moveDifference - 1))\n        if (moveToIdx === -1) {\n            activities = activities.reduce((acc, act, idx) => {\n                if (act.destination === destTomove.name) return acc\n                acc.push(act)\n                return acc\n            }, [])\n            destinations.forEach((dest, idx) => {\n                if (idx >= destIdxToMove) {\n                    dest.startDate = dest.startDate - constant\n                    dest.endDate = dest.endDate - constant\n                    activities.forEach(act => {\n                        if (act.destination === dest.name) act.at -= constant\n                    })\n                }\n            })\n\n        } else {\n            if (destIdxToMove > moveToIdx) {\n                const passDifference = utils.calculateDays(this.props.trip.destinations[moveToIdx].startDate, this.props.trip.destinations[destIdxToMove - 1].endDate)\n                const constant2 = (1000 * 60 * 60 * 24 * (passDifference - 1))\n                destTomove.startDate = destTomove.startDate - constant2;\n                destTomove.endDate = destTomove.endDate - constant2;\n                activities.forEach(act => {\n                    if (act.destination === destTomove.name) act.at -= constant2\n                })\n                destinations.splice(moveToIdx, 0, destTomove)\n                destinations.forEach((dest, idx) => {\n                    if (idx > moveToIdx && idx <= destIdxToMove) {\n                        dest.startDate = dest.startDate + constant\n                        dest.endDate = dest.endDate + constant\n                        activities.forEach(act => {\n                            if (act.destination === dest.name) act.at += constant\n                        })\n                    }\n                })\n            } else {\n                const passDifference = utils.calculateDays(this.props.trip.destinations[destIdxToMove + 1].startDate, this.props.trip.destinations[moveToIdx].endDate)\n                const constant2 = (1000 * 60 * 60 * 24 * (passDifference - 1))\n                destTomove.startDate = destTomove.startDate + constant2;\n                destTomove.endDate = destTomove.endDate + constant2;\n                activities.forEach(act => {\n                    if (act.destination === destTomove.name) act.at += constant2\n                })\n                destinations.splice(moveToIdx, 0, destTomove)\n                destinations.forEach((dest, idx) => {\n                    if (idx < moveToIdx && idx >= destIdxToMove) {\n                        dest.startDate = dest.startDate - constant\n                        dest.endDate = dest.endDate - constant\n                        activities.forEach(act => {\n                            if (act.destination === dest.name) act.at -= constant\n                        })\n                    }\n                })\n\n            }\n        }\n        const _newTrip = { ...this.props.trip, activities, destinations }\n        const newTrip = await this.props.addTrip(_newTrip)\n        socketService.emit('tripToUpdate', newTrip);\n\n    }\n\n    updateTripAct = async (activities) => {\n        let _newTrip = { ...this.props.trip, activities }\n        let newTrip = await this.props.addTrip(_newTrip)\n        socketService.emit('tripToUpdate', newTrip);\n\n    }\n\n    toggleChat = () => {\n        this.setState({ chatOpen: !this.state.chatOpen })\n    }\n    toggleSettings = () => {\n        this.setState({ settingsOpen: !this.state.settingsOpen })\n    }\n\n    addDestination = async (newDest) => {\n        const { destinations } = { ...this.props.trip }\n        newDest.startDate = destinations[destinations.length - 1].endDate\n        newDest.endDate = newDest.startDate + 1000 * 60 * 60 * 24 * (+newDest.days - 1)\n        newDest.id = utils.makeId()\n        destinations.push(newDest)\n        const _newTrip = { ...this.props.trip, destinations }\n        const newTrip = await this.props.addTrip(_newTrip)\n        socketService.emit('tripToUpdate', newTrip);\n    }\n\n    showDay = (day) => {\n        if (!day.td) return\n        const actToRender = this.props.trip.activities.reduce((acc, act) => {\n            if (new Date(act.at).getDate() === day.day.getDate()) {\n                acc.push({ name: act.name, location: act.location, at: act.at })\n            }\n            return acc\n        }, [])\n        eventBus.emit('markDay', day)\n        this.setState({ markers: actToRender })\n    }\n\n    openSideBar = () => {\n        this.setState({ sideBar: !this.state.sideBar })\n    }\n\n    render() {\n        const { trip } = this.props\n        const sideBarClass = this.state.sideBar ? 'open-side-bar' : ''\n        if (!trip || !trip.destinations) return <div>Loading....</div>\n        return (\n            <div className=\"trip-app  \">\n                <ErrorMsg />\n                <div className=\"trip-app-area flex \">\n                    <button onClick={this.openSideBar} className={`side-bar-bars ${sideBarClass}`}><i className=\"fas fa-bars \" ></i></button>\n                    <div className={`trip-side-bar flex column ${sideBarClass} `}>\n                        <TripRoute\n                            trip={trip}\n                            addDestination={this.addDestination}\n                            updateDestinations={this.updateDestinations}\n                            showModal={this.props.showModal}\n                            toggleChat={this.toggleChat}\n                            showDay={this.showDay}\n                            openSideBar={this.openSideBar}\n                            setDestsMarkers={this.setDestsMarkers}\n                        />\n                    </div>\n                    <div className=\"trip-app-main full\">\n                        {this.state.markers[0] && this.state.apiKey && <MapContainer markers={this.state.markers} apiKey={this.state.apiKey} />}\n                        <TripAssembly\n                            showMsg={this.props.showMsg}\n                            closeMsg={this.props.closeMsg}\n                            trip={trip} updateTripAct={this.updateTripAct}\n                            showModal={this.props.showModal}\n                            closeModal={this.props.closeModal}\n                            setTrip={this.props.setTrip}\n                            openSideBar={this.openSideBar}\n                            setDestsMarkers={this.setDestsMarkers}\n                        />\n                    </div>\n                </div>\n                {this.state.isSocketSetup && <Chat chatOpen={this.state.chatOpen} trip={trip} />}\n            </div >\n        )\n\n    }\n}\n\n\nconst mapStateToProps = state => {\n    return {\n        trip: state.tripReducer.currTrip,\n        loggedInUser: state.userReducer.loggedInUser\n    }\n}\nconst mapDispatchToProps = {\n    loadTrip,\n    removeTrip,\n    showModal,\n    closeModal,\n    addTrip,\n    showMsg,\n    closeMsg,\n    setTrip\n\n}\nexport const TripApp = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripApp))\n\n\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nclass _UserTrips extends Component {\n    state = {\n\n    }\n\n    componentDidMount() {\n    }\n\n    render() {\n        return (\n            <div>\n\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n\n    }\n}\n\nconst mapDispatchToProps = {\n\n}\n\nexport const UserTrips = connect(mapStateToProps, mapDispatchToProps)(_UserTrips);","import React, { Component } from 'react'\nimport { utils } from '../../services/utils';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nexport class EditActivity extends Component {\n    state = {\n        activitie: {\n            name: '',\n            at: '',\n            time: '',\n            labels: ['relax'],\n            duration: '',\n            notes: '',\n            price: '',\n            destination: '',\n            id: null\n        },\n        minTime: '',\n        maxTime: ''\n    }\n\n    async componentDidMount() {\n        const { act, destinations } = this.props.props\n        let minTime;\n        let maxTime;\n\n        if (act) {\n            const destIdx = destinations.findIndex(dest => dest.name === act.destination)\n            minTime = utils.getIsoTime(destinations[destIdx].startDate)\n            maxTime = utils.getIsoTime(destinations[destIdx].endDate)\n            this.setState({\n\n                activitie: {\n                    ...act, name: act.name, price: act.price.amount, at: utils.getIsoTime(act.at),\n                    destination: act.destination\n                }, minTime, maxTime\n            })\n        } else {\n            minTime = utils.getIsoTime(destinations[0].startDate)\n            maxTime = utils.getIsoTime(destinations[destinations.length - 1].endDate)\n            this.setState({ activitie: { ...this.state.activitie, destination: destinations[0].name }, minTime, maxTime })\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        const { destinations } = this.props.props\n        const { destination } = this.state.activitie\n        if (prevState.activitie.destination === destination) return\n        if (destination && !this.state.activitie.id) {\n            const destIdx = destinations.findIndex(dest => dest.name === destination)\n            const minTime = utils.getIsoTime(destinations[destIdx].startDate)\n            const maxTime = utils.getIsoTime(destinations[destIdx].endDate)\n            this.setState({ minTime, maxTime })\n        }\n    }\n\n    handleTime = (time) => {\n        let tzoffset = (time).getTimezoneOffset() * 60000; //offset in milliseconds\n        let localISOTime = (new Date(time - tzoffset)).toISOString().slice(0, -1);\n        this.setState({ activitie: { ...this.state.activitie, at: localISOTime } })\n    }\n\n    handleChange = ({ target }) => {\n        const field = target.name;\n        let value = target.value;\n        if (target.type === 'checkbox') this.setState({ [field]: target.checked });\n        // else if (target.type === 'number') this.setState({ activitie: { ...this.state.activitie, [field]: +value } });\n        else this.setState({ activitie: { ...this.state.activitie, [field]: value } });\n    }\n\n    onSaveAct = (ev) => {\n        ev.preventDefault()\n        var { saveAct, isOccTimeSlot } = this.props.props\n        const { activitie } = this.state\n        if (!activitie.at) return\n        let datetime = new Date(activitie.at)\n        activitie.at = datetime.getTime()\n        if (isOccTimeSlot(activitie)) {\n            return\n        }\n        activitie.price = +activitie.price || 0\n        activitie.duration = (!+activitie.duration || +activitie.duration <= 1) ? 1 : +activitie.duration\n        activitie.price = { amount: activitie.price, currency: '$' }\n        saveAct(this.state.activitie)\n    }\n    getValidTime = () => {\n        return new Date(this.state.activitie.at)\n    }\n\n    render() {\n        const { activitie, minTime, maxTime } = this.state\n        if (!activitie) return <div>Loading</div>\n        const { destinations } = this.props.props\n        let minT = new Date(minTime)\n        let maxT = new Date(maxTime)\n        let minTemp = minT.setHours(7, 0)\n        let currDate;\n        if (activitie.at) {\n            currDate = new Date(activitie.at)\n        } else {\n            currDate = new Date(minTemp)\n        }\n\n        let _min = currDate.setHours(7, 0)\n        let _max = currDate.setHours(23, 59)\n        let min = new Date(_min)\n        let max = new Date(_max)\n        return (\n\n            <form className=\"edit-activity-form flex column\" onSubmit={this.onSaveAct}>\n                <input className=\"styled-input\" placeholder=\"Enter activity Name\" name=\"name\" id=\"name\" value={this.state.activitie.name} onChange={this.handleChange}></input>\n                {!activitie.id && <div><i className=\"fas fa-map-marker\"></i><select value={this.state.activitie.destination} placeholder=\"destination\" name=\"destination\" id=\"dest-input\" onChange={this.handleChange}>\n                    {destinations.map((dest, idx) => {\n                        return <option key={utils.makeId()} value={dest.name}>{dest.name}</option>\n\n                    })}\n                </select></div>}\n                <div className=\"flex\">\n                    <i className=\"far fa-clock\"></i>\n                    <div className=\"flex column\">\n                        <label htmlFor=\"start-time-activity-input\">Time</label>\n                        <DatePicker\n                            minDate={minT}\n                            maxDate={maxT}\n                            selected={this.getValidTime().getTime() || minTemp}\n                            value={this.getValidTime().getTime() || minTemp}\n                            minTime={min}\n                            maxTime={max}\n                            autoComplete=\"off\"\n                            className=\"styled-input\"\n                            showTimeSelect\n                            required\n                            showFullMonthYearPicker\n                            dateFormat=\"Pp\"\n                            onChange={time => this.handleTime(time)}\n                        />\n                    </div>\n                    <div className=\"flex column justify-evenly align-baseline\">\n                        <label htmlFor=\"duration\">Duration (Half hours)</label>\n                        <input className=\"styled-input\" placeholder=\"duration\" id=\"duration\" type=\"number\" name=\"duration\" value={this.state.activitie.duration} onChange={this.handleChange}></input>\n                    </div>\n                </div>\n                <textarea placeholder=\"Add some notes\" onChange={this.handleChange} name=\"notes\" id=\"notes\" value={this.state.activitie.notes} ></textarea>\n                {/* <label htmlFor=\"price\" id=\"price\">Price</label> */}\n                <div className=\"flex\">\n                    <i className=\"fas fa-dollar-sign\"></i>\n                    <input className=\"styled-input\" type=\"number\" placeholder=\"price\" name=\"price\" id=\"price\" onChange={this.handleChange} placeholder=\"price\" value={this.state.activitie.price}></input>\n                </div>\n                <button className=\"styled-button\" onClick={this.onSaveAct}>Save</button>\n            </form>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport { utils } from '../../services/utils';\nimport { ErrorMsg } from '../MainCmps/ErrorMsg';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nexport class PrevEditActivity extends Component {\n    state = {\n        activitie: {\n            name: '',\n            at: '',\n            time: '',\n            labels: '',\n            duration: '',\n            notes: '',\n            price: '',\n            currency: '',\n            destination: '',\n            id: null\n        },\n        minTime: '',\n        maxTime: '',\n        isInputOpen: false\n    }\n\n    async componentDidMount() {\n        const { act, destinations } = this.props.props\n        let minTime;\n        let maxTime;\n\n        const destIdx = destinations.findIndex(dest => dest.name === act.destination)\n        minTime = utils.getIsoTime(destinations[destIdx].startDate)\n        maxTime = utils.getIsoTime(destinations[destIdx].endDate)\n        this.setState({\n\n            activitie: {\n                ...act, name: act.name, currency: act.price.currency, price: act.price.amount, at: utils.getIsoTime(act.at),\n                destination: act.destination, duration: act.duration\n            }, minTime, maxTime\n        })\n    }\n    handleTime = (time) => {\n        let tzoffset = (time).getTimezoneOffset() * 60000; //offset in milliseconds\n        let localISOTime = (new Date(time - tzoffset)).toISOString().slice(0, -1);\n        this.setState({ activitie: { ...this.state.activitie, at: localISOTime } })\n    }\n\n    handleChange = (ev) => {\n        const field = ev.target.name;\n        let value = ev.target.value;\n\n        if (field === 'at') {\n            // let time = value.substring(value.length - 5)\n            // let hours = +time.split(':')[0]\n            // let minuets = +time.split(':')[1]\n            // if (minuets <= 15) {\n            //     minuets = 0\n            // } else if (minuets >= 45) {\n            //     minuets = 0\n            //     hours += 1\n            // } else {\n            //     minuets = 30\n            // }\n            // if (hours >= 0 && hours < 7) {\n            //     this.props.showMsg({ type: 'input', msg: 'Please choose events between 7:00 AM and 11:30 PM' })\n            //     return\n            // }\n            // minuets = ((minuets + '').length === 1) ? ('0' + minuets) : (minuets + '')\n            // hours = ((hours + '').length === 1) ? ('0' + hours) : (hours + '')\n            // value = value.substring(0, value.length - 5) + `${hours}:${minuets}`\n            this.setState({ activitie: { ...this.state.activitie, [field]: value } });\n        }\n\n        else if (field === 'duration') this.setState({ activitie: { ...this.state.activitie, [field]: value } });\n        else this.setState({ activitie: { ...this.state.activitie, [field]: value } });\n    }\n\n    handleContentEditable = (ev) => {\n        const field = ev.currentTarget.dataset.name\n        let value = ev.target.innerText\n        if (field === 'price') this.setState({ activitie: { ...this.state.activitie, [field]: +value } });\n        else this.setState({ activitie: { ...this.state.activitie, [field]: value } });\n\n    }\n\n    onSaveAct = (ev) => {\n        ev.preventDefault()\n        var { saveAct, isOccTimeSlot } = this.props.props\n        const { activitie } = this.state\n        let datetime = new Date(activitie.at)\n        activitie.at = datetime.getTime()\n        if (!activitie.duration) activitie.duration = 1\n        else if (+activitie.duration) activitie.duration = +activitie.duration\n        if (isOccTimeSlot(activitie)) {\n            this.props.showMsg({ type: 'input', msg: 'You aleardy have plans for that date! please choose a different one.' })\n            return\n        }\n        activitie.price = { amount: activitie.price, currency: '$' }\n        saveAct(this.state.activitie)\n    }\n    getValidTime = () => {\n        return new Date(this.state.activitie.at)\n    }\n\n\n\n    render() {\n\n        const startTime = utils.getTimeDayStr(new Date(this.state.activitie.at).getTime())\n        const endTime = utils.getTimeDayStr(new Date(this.state.activitie.at).getTime() + (this.state.activitie.duration / 2) * 60 * 60 * 1000)\n\n        const { activitie, minTime, maxTime } = this.state\n        if (!activitie) return <div>Loading</div>\n        let minT = new Date(minTime)\n        let maxT = new Date(maxTime)\n        let minTemp = minT.setHours(7, 0)\n        let currDate;\n        if (activitie.at) {\n            currDate = new Date(activitie.at)\n        } else {\n            currDate = new Date(minTemp)\n        }\n\n        let _min = currDate.setHours(7, 0)\n        let _max = currDate.setHours(23, 59)\n        let min = new Date(_min)\n        let max = new Date(_max)\n\n        return (\n            <form className=\"preview-activity-form flex column\" >\n                <h2 contentEditable={true} suppressContentEditableWarning={true} data-placeholder=\"Enter activity name\"\n                    spellCheck=\"false\" style={{ direction: 'ltr' }} data-name=\"name\" onBlur={this.handleContentEditable}>{this.state.activitie.name}</h2>\n                <div className=\"flex\">\n                    <small><i className=\"fas fa-map-marker\"></i> {this.state.activitie.destination}</small>\n                    <small><i className=\"far fa-clock\"></i>{`${startTime}-${endTime}`} <i onClick={() => { this.setState({ isInputOpen: !this.state.isInputOpen }) }} className=\"fas fa-edit\"></i></small>\n                </div>\n\n                <ErrorMsg />\n\n                <div className={`flex time-container ${this.state.isInputOpen ? 'openHeight' : ''} `}>\n                    <div className=\"flex column\">\n                        <h4 >Beginning time:</h4>\n                        <DatePicker\n                            minDate={minT}\n                            maxDate={maxT}\n                            selected={this.getValidTime().getTime()}\n                            value={this.getValidTime().getTime() || minTemp}\n                            minTime={min}\n                            maxTime={max}\n                            autoComplete=\"off\"\n                            className=\"styled-input prev-date-picker date\"\n                            showTimeSelect\n                            required\n                            dateFormat=\"Pp\"\n                            onChange={time => this.handleTime(time)}\n                        />\n                    </div>\n                    <div className=\"flex column\">\n                        <h4 >Duration (Half hours)</h4>\n                        <input className=\"styled-input\" placeholder=\"duration\" id=\"duration\" type=\"number\" name=\"duration\" value={this.state.activitie.duration} onChange={this.handleChange}></input>\n                    </div>\n\n                </div>\n                {<img src={this.props.props.act.imgUrl} alt=\"https://teddytennis.com/cyprus/wp-content/uploads/sites/76/2017/11/placeholder.png\" />}\n\n\n                <textarea placeholder=\"Add some notes\" onChange={this.handleChange} name=\"notes\" id=\"notes\" value={this.state.activitie.notes} ></textarea>\n                <div className=\"flex\">\n                    <h4>Price:</h4>\n                    <p>{this.state.activitie.currency}</p>\n                    <p contentEditable={true} suppressContentEditableWarning={true} data-name=\"price\" onBlur={this.handleContentEditable}>{this.state.activitie.price}</p>\n                </div>\n                <button className=\"styled-button\" onClick={this.onSaveAct}>Save</button>\n            </form >\n        )\n    }\n}\n","import React from 'react'\nimport { ErrorMsg } from '../MainCmps/ErrorMsg'\n\nexport class AddReview extends React.Component {\n\n    state = {\n        reviewToAdd: {\n            content: '',\n            name: '',\n            rating: null,\n        }\n    }\n    elInput = React.createRef()\n\n    componentDidMount() {\n        this.elInput.current.focus()\n    }\n\n\n    onInputChange = (value, inputType) => {\n        this.setState({\n            reviewToAdd: { ...this.state.reviewToAdd, [inputType]: value }\n        })\n    }\n\n    onAddReview = (ev) => {\n        ev.preventDefault();\n        if (!this.state.reviewToAdd.rating) {\n            this.props.showMsg({ msg: 'You must rate this trip first', type: 'input' })\n            return\n        }\n        this.props.addReview(this.state.reviewToAdd)\n        this.setState({\n            reviewToAdd: {\n                content: '',\n                name: '',\n                rating: null,\n            }\n        })\n    }\n    setRating = (val) => {\n        this.setState({ reviewToAdd: { ...this.state.reviewToAdd, rating: val } })\n    }\n\n    render() {\n        const classToAdd = this.props.isReviewOpen ? 'open' : '';\n        const currRate = this.state.reviewToAdd.rating\n        return (\n            <div className={`review-modal flex ${classToAdd}`}>\n                <form className=\"flex column \" onSubmit={this.onAddReview}>\n                    <ErrorMsg />\n\n                    <div className=\"flex\">\n                        <input className=\"styled-input\" placeholder=\"Enter your name\" type=\"text\" name=\"name\" required onChange={(ev) => { this.onInputChange(ev.target.value, ev.target.name) }} />\n                        {/* <select name=\"rating\" defaultValue=\"-1\" required onChange={(ev) => { this.onInputChange(ev.target.value, ev.target.name) }} >\n                            <option disabled value=\"-1\">Rate the trip</option>\n                            <option value=\"1\">1</option>\n                            <option value=\"2\">2</option>\n                            <option value=\"3\">3</option>\n                            <option value=\"4\">4</option>\n                            <option value=\"5\">5</option>\n                        </select> */}\n\n                        <div className=\"stars-rate flex\">\n                            <i className={`fas fa-star star-5 ${currRate === 5 ? 'active' : ''}`} onClick={() => { this.setRating(5) }}></i>\n                            <i className={`fas fa-star star-4 ${currRate >= 4 ? 'active' : ''}`} onClick={() => { this.setRating(4) }}></i>\n                            <i className={`fas fa-star star-3 ${currRate >= 3 ? 'active' : ''}`} onClick={() => { this.setRating(3) }}></i>\n                            <i className={`fas fa-star star-2 ${currRate >= 2 ? 'active' : ''}`} onClick={() => { this.setRating(2) }}></i>\n                            <i className={`fas fa-star star-1 ${currRate >= 1 ? 'active' : ''}`} onClick={() => { this.setRating(1) }}></i>\n                        </div>\n                    </div>\n                    <ErrorMsg />\n                    <textarea id=\"content\" required name=\"content\" placeholder=\"Enter your review here\" ref={this.elInput} onChange={(ev) => { this.onInputChange(ev.target.value, ev.target.name) }}>\n                    </textarea>\n                    <button className=\"styled-button\">Save</button>\n                </form>\n            </div>\n        )\n    }\n}\n","import React from 'react'\n\n\nexport class LongTxt extends React.Component {\n\n    state = {\n        text: this.props.text,\n        isLongTxtShown: false\n    }\n\n    onReadMore = () => {\n        this.setState({ isLongTxtShown: !this.state.isLongTxtShown })\n    }\n\n    render() {\n        const  text  = this.state.text\n        var isLongTxtShown = this.state.isLongTxtShown\n        return (\n            <p>\n                {(text.length < 100 || (isLongTxtShown && text.length > 100)) ? text : text.substring(0, 100) + ' . . .'}\n                {text.length > 100 && <button className=\" styled-button expend-description\" onClick={this.onReadMore}>{this.state.isLongTxtShown ? 'Less' : 'More'}</button>}\n            </p >\n        )\n    }\n}\n","\nimport React from 'react'\nimport { utils } from '../../services/utils';\nimport { LongTxt } from '../MainCmps/LongText';\n\n\nexport function ReviewPreview({ review }) {\n\n\n    function getStars() {\n        let stars = [];\n        for (let i = 0; i < review.rating; i++) {\n            stars.push(<img className=\"rating-star\" key={utils.makeId()} src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600689776/450716_preview_uyyiz1.png\" alt=\"\" />)\n        }\n        for (let i = 0; i < 5 - review.rating; i++) {\n            stars.push(<img className=\"rating-star\" key={utils.makeId()} src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600690459/450716_preview1_pvoieq.png\" alt=\"\" />)\n        }\n        return stars\n    }\n\n\n    const time = `${new Date(review.createdAt).getDate()}/${new Date(review.createdAt).getMonth() + 1}/${new Date(review.createdAt).getFullYear()}`\n    return (\n        < React.Fragment >\n            <div className=\"review-details flex justify-between \">\n                <h3>{review.name || 'Traveler'}</h3>\n                <div className=\"flex column\">\n                    <div>{getStars()} </div>\n                    <p>{time}</p>\n                </div>\n            </div>\n            {review.content && <LongTxt text={review.content} />}\n\n        </React.Fragment >\n    )\n}\n","import { ReviewPreview } from './ReviewPreview.jsx'\nimport React from 'react'\n\n\nexport function ReviewList({ reviews }) {\n    return (\n        <ul className=\"review-list flex column container\">\n            {(!reviews || !reviews.length)? 'No reviews have been written for this trip yet' : reviews.map((review,idx) =>\n                <li className=\"review flex column\" key={idx}>\n                    <ReviewPreview key={review._id} review={review} />\n                </li>\n\n            )}\n        </ul>\n    )\n}","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\n\nimport {  withRouter } from 'react-router-dom'\nimport { ReviewList } from './ReviewList'\nimport { AddReview } from './AddReview'\nimport { reviewActions } from '../../store/actions/reviewActions'\n\nclass _TripReviews extends Component {\n\n    state = {\n        isReviewOpen: false,\n    }\n\n    async componentDidMount() {\n        const id =this.props.trip.originId?this.props.trip.originId:this.props.trip._id\n        try {\n            await this.props.loadReviews({ tripId: id })\n        }\n        catch (err) {\n        }\n    }\n\n    onToggleExpend = () => {\n        this.setState({ isReviewOpen: !this.state.isReviewOpen})\n    }\n\n\n    addReview = async (review) => {\n        const id =this.props.trip.originId?this.props.trip.originId:this.props.trip._id\n        review.trip = id\n        await reviewActions.addReview(review)\n        await this.props.loadReviews({ tripId: id})\n        this.onToggleExpend()\n    }\n\n    render() {\n        const { trip } = this.props\n        if (!trip) return <p> Loading . . .</p>\n\n        return (\n            <div className=\"reviews-page\">\n                <ReviewList reviews={this.props.reviews} />\n                <div className=\"flex reviews-btns-container\">\n                    <button className=\"review-btns styled-button\" onClick={this.onToggleExpend}>{this.state.isReviewOpen ? 'Close' : ' Add Review'}</button>\n                </div>\n                    <AddReview addReview={this.addReview} msg={this.props.msg} showMsg={this.props.showMsg} closeMsg={this.props.closeMsg}  isReviewOpen={this.state.isReviewOpen}/>\n            </div >\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        reviews: state.reviewReducer.reviews,\n        trip: state.tripReducer.currTrip\n    }\n}\n\nconst mapDispatchToProps = {\n    addReview: reviewActions.addReview,\n    loadReviews: reviewActions.loadReviews\n}\n\nexport const TripReviews = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripReviews))\n","import React, { Component } from 'react'\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\n\nexport class AddMember extends Component {\n\n    state = {\n        value: '',\n        copied: false,\n        // emailToSend: {\n        //     subject: '',\n        //     body: '',\n        //     email: ''\n\n        // }\n    }\n\n    componentDidMount() {\n    this.setState({value:`http://localhost:3000/#/trip/${this.props.props}/triproute/true`})\n    }\n    \n\n    handleInput = (value, name) => {\n        this.setState({ emailToSend: { ...this.state.emailToSend, [name]: value } })\n    }\n\n    onAddMember(ev, mail) {\n        ev.preventDefault()\n        this.props.closeModal()\n\n    }\n\n\n    render() {\n            return (\n            <div className=\"flex column share-trip\">\n                <h3>Share this link with your trip partners and start planning together!</h3>\n                <img src=\"https://thumbs.dreamstime.com/b/group-young-people-friends-celebrating-successful-hiking-expedition-group-young-people-friends-celebrating-successful-hiking-123552345.jpg\" alt=\"\"/>\n                <input disabled className=\"styled-input\" value={this.state.value}\n                    onChange={({ target: { value } }) => this.setState({ value, copied: false })} />\n\n                {/* <CopyToClipboard text={this.state.value}\n                    onCopy={() => this.setState({ copied: true })}>\n                    <span>Copy to clipboard with span</span>\n                </CopyToClipboard> */}\n\n                <CopyToClipboard text={this.state.value}\n                    onCopy={() => this.setState({ copied: true })}>\n                    <button className=\"styled-button\">Copy and share</button>\n                </CopyToClipboard>\n\n                {this.state.copied ? <span style={{ color: 'orange' }}>Copied!</span> : null}\n            </div>\n\n            // <div className={'add-member'}>\n            //     <form className=\"flex column\" onSubmit={(ev) => { this.onAddMember(ev, this.state.emailToSend) }}>\n            //         <div className=\"headline\">\n            //             <h2>Add Member</h2>\n            //         </div>\n            //         <input className=\"styled-input\"\n            //             placeholder=\"Enter your friend Email\"\n            //             type=\"email\"\n            //             name=\"email\"\n            //             required\n            //             value={this.state.emailToSend.email}\n            //             onChange={(ev) => { this.handleInput(ev.target.value, ev.target.name) }} />\n            //         <input className=\"styled-input\"\n            //             placeholder=\"Enter subject\"\n            //             type=\"text\"\n            //             name=\"subject\"\n            //             required\n            //             value={this.state.emailToSend.subject}\n            //             onChange={(ev) => { this.handleInput(ev.target.value, ev.target.name) }} />\n            //         <textarea\n            //             required\n            //             name=\"body\"\n            //             placeholder=\"Enter your review here\"\n            //             value={this.state.emailToSend.body}\n            //             onChange={(ev) => { this.handleInput(ev.target.value, ev.target.name) }}>\n            //         </textarea>\n            //         {/* <ErrorMsg /> */}\n            //         <button onSubmit={(ev) => { this.onAddMember(ev, this.state.emailToSend) }}>Save</button>\n            //     </form>\n            // </div>\n        )\n    }\n}\n\n\nconst appRoot = document.createElement('div');\ndocument.body.appendChild(appRoot);\n// ReactDOM.render(<App />, appRoot);","import React from 'react';\nexport function AlertUser({props}) {\n    const msg= props.modal.props.createdBy.id==='guest'?\n    'Be aware your Changes would not be saved, in case you would like  to save the changes and even add friends to the plan, go back to the home page, sign up and choose a template trip again!':\n    'your trip will be saved in Trips under the name: '+props.modal.props.tripName\n    return (\n        <p style={{padding:'15px'}}>\n            {msg}\n        </p>\n    )\n}","import React, { Component } from 'react'\n\n\nexport class NotificationMsg extends Component {\n    state = {\n        isShown: false,\n        msg: '',\n        type: ''\n    }\n\n    render() {\n        return (\n            <div>\n                <p>Are you sure you want to delete?</p>\n                <div className=\"flex notification-btns\">\n                    <button className=\"styled-button\" onClick={() => this.props.props.removeAct(this.props.props.actId)}>Delete</button>\n                    <button className=\"styled-button\" onClick={() => this.props.closeModal()}>Cancel</button>\n                </div>\n            </div>\n        )\n        // const { isShown, msg, type } = this.state\n        // const _hidden = (isShown)?'':'hidden-msg'\n        // return (\n        //     <div className={ `notification-box ${type} ${_hidden}` }  >\n        //         { isShown && <span onClick={ () => this.setState({ isShown: false }) }>X</span> }\n        //         { isShown && <h2> { msg }</h2> }\n        //     </div>\n    }\n}\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport { LoginSignupPage } from '../../pages/LoginSignupPage';\nimport { closeModal, showModal } from '../../store/actions/modalActions'\nimport { closeMsg, showMsg } from '../../store/actions/msgActions';\nimport { EditActivity } from '../TripAssembly/EditActivity';\nimport { PrevEditActivity } from '../TripAssembly/PrevEditActivity';\nimport { AddReview } from '../tripReviews/AddReview';\nimport { TripReviews } from '../tripReviews/TripReviews';\nimport { AddMember } from './AddMember';\nimport { AlertUser } from './AlertUser';\nimport { NotificationMsg } from './NotificationMsg';\n\nclass _Modal extends React.Component {\n    state = {\n        dynamicCmp: '',\n        nameToDisplay: ''\n    }\n    componentDidMount() {\n    }\n    componentDidUpdate(prevProps, prevState) {\n        const curCmp = this.props.modal.cmp\n        if (prevProps.modal.cmp === curCmp) return\n        let dynamicCmp = '';\n        let nameToDisplay = '';\n        switch (curCmp) {\n            case 'login':\n                dynamicCmp = <LoginSignupPage page={true} handleClick={this.handleClick} />\n                nameToDisplay = 'Please Login'\n                break\n            case 'signup':\n                const tripId = this.props.modal.props\n                dynamicCmp = <LoginSignupPage page={false} handleClick={this.handleClick} tripId={tripId} />\n                nameToDisplay = 'Please Sign Up'\n                break\n            case 'editActivity':\n                dynamicCmp = <EditActivity props={this.props.modal.props} />\n                nameToDisplay = 'Edit activity'\n                break\n            case 'activityDetails':\n                dynamicCmp = <PrevEditActivity props={this.props.modal.props} showMsg={this.props.showMsg}\n                    closeMsg={this.props.closeMsg} />\n                nameToDisplay = 'Activity Details'\n                break\n            case 'removeActivity':\n                dynamicCmp = <NotificationMsg props={this.props.modal.props} closeModal={this.props.closeModal} />\n                nameToDisplay = 'Delete Activity'\n                break\n            case 'add-review':\n                dynamicCmp = <AddReview props={this.props.modal.props.addReview} showMsg={this.props.showMsg}\n                    closeMsg={this.props.closeMsg} closeModal={this.closeModal} />\n                nameToDisplay = 'Add Review'\n                break\n            case 'add-member':\n                dynamicCmp = <AddMember props={this.props.modal.props}\n                    closeModal={this.closeModal} />\n                nameToDisplay = 'Add Member'\n                break\n            case 'trip-reviews':\n                dynamicCmp = <TripReviews showMsg={this.props.showMsg} msg={this.props.msg} closeMsg={this.props.closeMsg} closeModal={this.closeModal} />\n                nameToDisplay = 'Reviews'\n                break\n            case 'alert-user':\n                dynamicCmp = <AlertUser props={this.props}  closeModal={this.closeModal} />\n                nameToDisplay = 'Welcome!'\n                break\n            default:\n                dynamicCmp = <div>proplem loading modal</div>\n        }\n        this.setState({ dynamicCmp, nameToDisplay })\n\n    }\n    handleClick = (cmp) => {\n        this.props.showModal(cmp)\n    }\n\n\n    checkKey = (ev) => {\n        if (ev.key === \"Escape\") this.closeModal()\n    }\n\n    closeModal = () => {\n        this.props.closeModal()\n    }\n\n\n    render() {\n        return (\n            <div className={`modal-screen flex align-center justify-center ${this.props.modal.isShown ? '' : 'hide'}`} onKeyDown={this.checkKey} onMouseDown={this.closeModal}>\n                <div className={`modal-container `} onMouseDown={(ev) => ev.stopPropagation()} >\n                    <div className=\"modal-header flex align-center justify-center styled-header\" ><p>{this.state.nameToDisplay}</p><button onClick={this.closeModal}>X</button></div>\n                    <div className=\"modal-content\"  >\n                        {this.state.dynamicCmp}\n                        {/* {this.props.msg? <p>{this.props.msg}</p>:''} */}\n                    </div>\n                </div >\n            </div>\n        )\n    }\n}\nconst mapStateToProps = state => {\n    return {\n        modal: state.modalReducer,\n        msg: state.msgReducer.msg\n    }\n}\nconst mapDispatchToProps = {\n    closeModal,\n    showModal,\n    showMsg,\n    closeMsg\n}\nexport const Modal = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Modal))\n","import React from 'react';\nimport { connect } from 'react-redux'\n\nclass _Loader extends React.Component {\n    render() {\n        if(!this.props.loader)  return <React.Fragment/>\n\n        return (\n            <div className=\"positioning-container\">\n                <div className=\"spinning-container\">\n                <span>LOADING</span>\n                    <div className=\"airplane-container\">\n                        {/* <span className=\"fa fa-plane\"></span> */}\n                        <img className=\"plane\" src=\"https://res.cloudinary.com/roidinary/image/upload/v1600624566/Asset_dwekpj.png\" alt=\"Loading\"></img>\n                        \n                    </div>\n                </div>\n            </div>\n\n        )\n    }\n\n}\nconst mapStateToProps = state => {\n    return {\n        loader: state.modalReducer.loaderOn\n    }\n}\nconst mapDispatchToProps = {\n    \n}\nexport const Loader = connect(mapStateToProps, mapDispatchToProps)(_Loader)","import React from 'react';\nexport function Footer() {\n    return (\n        <div className=\"footer flex align-center justify-center\">\n            TrollyRights 2022 \n        </div>\n    )\n}","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { MainNavBar } from './cmps/MainCmps/MainNavBar';\nimport { About } from './pages/About';\nimport { HomePage } from './pages/HomePage';\nimport { TripStock } from './pages/TripStock';\nimport { LoginSignupPage } from './pages/LoginSignupPage';\nimport { TripApp } from './pages/TripApp.jsx'\nimport { UserTrips } from './pages/UserTrips';\nimport { Modal } from './cmps/MainCmps/Modal';\n\nimport '../src/scss/main.scss'\n\nimport { Loader } from './cmps/MainCmps/Loader';\nimport { Footer } from './cmps/MainCmps/Footer';\n\n\nexport function App() {\n\n  return (\n\n    <div style={{position:\"relative\"}} className=\"App \">\n      <MainNavBar />\n      <main>\n        <Modal />\n        <Loader />\n        <Switch>\n          <Route component={LoginSignupPage} path='/lognsignup' />\n          <Route component={TripApp} path='/trip/:id/:triproute/:openSignup?' />\n          {/* <Route component={TripApp} path='/trip/:id/:triproute' /> */}\n          <Route component={UserTrips} path='/user/:id' />\n          <Route component={TripStock} path='/trip' />\n          <Route component={About} path='/about' />\n          <Route exact component={HomePage} path='/' />\n        </Switch>\n      </main>\n        <Footer/>\n    </div>\n  );\n}\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","const initialState = {\n    isShown: false,\n    props: null,\n    cmp: null,\n    msg:null,\n    loaderOn: false\n}\n\nexport function modalReducer(state = initialState, action) {\n    switch (action.type) {\n        case 'SET_MODAL':\n            return {\n                isShown: true,\n                props: action.props,\n                cmp: action.cmp\n            }\n        case 'CLOSE_MODAL':\n            return {\n                isShown: false,\n                props: null,\n                cmp: null\n            }\n        case 'LOGIN_PROBLEML':\n            return {\n                ...state,\n                msg:'wrong email or password'\n            }\n        case 'SET_LOADER':\n            return {\n                loaderOn: true,\n            }\n        case 'CLOSE_LOADER':\n            return {\n                loaderOn: false,\n            }\n\n        default:\n            return state\n    }\n}","const initialState = {\n    isShown: false,\n    type: '',\n    msg: ''\n}\n\nexport function msgReducer(state = initialState, action) {\n    switch (action.type) {\n        case 'SET_MSG':\n            return {\n                isShown: true,\n                msg: action.msg.msg,\n                type: action.msg.type\n            }\n        case 'CLOSE_MSG':\n            return {\n                isShown: false,\n                type: '',\n                msg: ''\n            }\n        default:\n            return state\n    }\n}","const initialState = {\n    reviews: [],\n    selectedReview: null\n  };\n  \n  export function reviewReducer(state = initialState, action = {}) {\n    switch (action.type) {\n      case 'SET_REVIEWS':\n        return { ...state, reviews: action.reviews };\n      case 'REVIEW_ADD':\n        return { ...state, reviews: [...state.reviews, action.review] };\n      case 'REVIEW_UPDATE':\n        return {\n          ...state,\n          reviews: state.reviews.map(review =>\n            review._id === action.review._id ? action.review : review\n          )};\n      default:\n        return state;\n    }\n  }\n  ","const initialState = {\n    trips: [],\n    currTrip: null\n\n}\n\n\nexport function tripReducer(state = initialState, action) {\n    switch (action.type) {\n        case 'SET_TRIPS':\n            return {\n                ...state,\n                trips: action.trips\n            }\n        case 'EDIT_TRIP':\n            return {\n                ...state, currTrip: { ...action.trip }, trips: state.trips.map(trip => {\n                    if (action.trip._id === trip._id) return action.trip\n                    return trip;\n                })\n            }\n        case 'REMOVE_TRIP':\n            return {\n                ...state, currTrip: null, trips: state.trips.map(trip => {\n                    if (action.trip._id === !trip._id) return action.trip\n                    return trip;\n                })\n            }\n        case 'SET_TRIP':\n            return {\n                ...state,\n                currTrip: { ...action.trip }\n            }\n\n\n\n\n        default:\n            return state\n    }\n}","\nlet localLoggedinUser = null;\nif (sessionStorage.user) localLoggedinUser = JSON.parse(sessionStorage.user);\n\nconst initialState = {\n    users: [],\n    loggedInUser: localLoggedinUser\n}\n\nexport function userReducer(state = initialState, action) {\n    switch (action.type) {\n        case 'SET_USER':\n            return {\n                users:[...state.users],\n                loggedInUser: action.user\n            }\n        case 'SET_USERS':\n            return {\n                ...state,\n                users: action.users\n            }\n        default:\n            return state\n    }\n}","import { createStore, applyMiddleware, compose, combineReducers } from 'redux'\nimport thunk from 'redux-thunk'\nimport { modalReducer } from './reducers/modalReducer';\nimport { msgReducer } from './reducers/msgReducer';\nimport { reviewReducer } from './reducers/reviewReducer';\nimport {tripReducer } from './reducers/tripReducer';\nimport { userReducer } from './reducers/userReducer';\n\nconst rootReducer = combineReducers({\n    tripReducer,\n    userReducer,\n    modalReducer,\n    reviewReducer,\n    msgReducer\n})\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App.jsx';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux';\nimport { store } from './store/store';\nimport { HashRouter as Router } from 'react-router-dom';\nimport { DndProvider } from 'react-dnd'\nimport {HTML5Backend} from 'react-dnd-html5-backend'\n\nReactDOM.render(\n  <Provider store={store}>\n    <DndProvider backend={HTML5Backend}>\n      <Router>\n        <App />\n      </Router>\n    </DndProvider>\n  </Provider>,\n  document.getElementById('root')\n);\n\n\nserviceWorker.unregister();\n"],"sourceRoot":""}