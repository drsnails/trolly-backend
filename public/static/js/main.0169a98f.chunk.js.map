{"version":3,"sources":["cmps/MainCmps/UserPreview.jsx","services/httpService.js","services/tripService.js","services/socketService.js","store/actions/tripActions.js","store/actions/modalActions.js","services/userService.js","cmps/MainCmps/MainNavBar.jsx","store/actions/userActions.js","pages/About.jsx","services/utils.js","store/actions/msgActions.js","cmps/MainCmps/ErrorMsg.jsx","cmps/Home/AddTrip.jsx","cmps/MainCmps/GooglePlaces.jsx","services/reviewService.js","store/actions/reviewActions.js","cmps/Home/TripPreview.jsx","cmps/Home/TripList.jsx","cmps/Home/TripSlider.jsx","cmps/Home/UserFlow.jsx","pages/HomePage.jsx","cmps/Home/TripFilter.jsx","pages/TripStock.jsx","pages/Login.jsx","pages/Signup.jsx","pages/LoginSignupPage.jsx","services/eventBusService.js","services/dndItems.js","cmps/TripAssembly/ActivitiePreview.jsx","cmps/TripAssembly/OpenDaySlot.jsx","cmps/TripAssembly/DayActivities.jsx","cmps/TripAssembly/DayTimeLine.jsx","cmps/TripAssembly/DestNamePrev.jsx","cmps/TripAssembly/DestinationsHeader.jsx","cmps/TripAssembly/TripAssembly.jsx","cmps/TripApp/MemberPreview.jsx","cmps/TripRoute/AddDestiantion.jsx","cmps/TripRoute/WeekPreview.jsx","cmps/TripRoute/RouteCalendar.jsx","cmps/TripRoute/RouteTimeLinePreview.jsx","cmps/TripRoute/RouteTimeLine.jsx","cmps/TripRoute/TripRoute.jsx","cmps/TripApp/Chat.jsx","cmps/MainCmps/Map.jsx","pages/TripApp.jsx","pages/UserTrips.jsx","cmps/TripAssembly/EditActivity.jsx","cmps/TripAssembly/PrevEditActivity.jsx","cmps/tripReviews/AddReview.jsx","cmps/MainCmps/LongText.jsx","cmps/tripReviews/ReviewPreview.jsx","cmps/tripReviews/ReviewList.jsx","cmps/tripReviews/TripReviews.jsx","cmps/MainCmps/AddMember.jsx","cmps/MainCmps/NotificationMsg.jsx","cmps/MainCmps/Modal.jsx","pages/TripDetails.jsx","cmps/MainCmps/Loader.jsx","cmps/MainCmps/Footer.jsx","App.jsx","serviceWorker.js","store/reducers/modalReducer.js","store/reducers/msgReducer.js","store/reducers/reviewReducer.js","store/reducers/tripReducer.js","store/reducers/userReducer.js","store/store.js","index.js"],"names":["UserPreview","state","expand","toggleExpand","setState","Fragment","className","src","this","props","user","imgUrl","alt","username","onClick","to","_id","logout","openMainNavbar","Component","axios","Axios","create","withCredentials","endpoint","data","ajax","a","method","url","res","console","log","dir","tripService","query","getById","remove","tripId","httpService","save","trip","filterBy","name","queryStr","socketService","socket","setup","io","on","eventName","cb","off","emit","terminate","createSocketService","loadTrip","flag","dispatch","type","Promise","resolve","reject","setTimeout","tripLoad","loadTrips","trips","addTrip","newTrip","showModal","cmp","closeModal","userService","login","signup","getUsers","userId","update","userCred","_handleLogin","sessionStorage","clear","setItem","JSON","stringify","window","_MainNavBar","navBar","isNavbarOpen","backgroundChanged","path","location","pathname","match","pageYOffset","addEventListener","prevProps","prevState","resetTrip","removeEventListener","usersData","loggedInUser","mapDispatchToProps","MainNavBar","connect","userReducer","withRouter","About","utils","makeId","length","txt","possible","i","charAt","Math","floor","random","calculateDays","start","end","Date","difference","getTime","ceil","createMat","cols","rows","mat","j","pos","col","getDateDay","timeStamp","getDate","getWeekDay","time","getDay","getTimeDayStr","hours","_get2DigTime","getHours","minuets","getMinutes","getRandomPic","imgIdx","getRandomInt","imgs","getIsoTime","setMinutes","getTimezoneOffset","toISOString","slice","calculateDates","destinations","nextDay","dates","day","td","push","forEach","dest","getMonth","idx","setHours","getRandomLatLng","locations","lat","lng","setToHourMinuets","hour","min","getRandomName","num","max","showMsg","msg","closeMsg","_ErrorMsg","isShown","ErrorMsg","msgReducer","_AddTrip","tripName","currTrip","startDate","endDate","onSetDestinations","ev","preventDefault","newtrip","toLowerCase","now","id","onSaveDestination","activities","members","history","handleAddress","handleSelect","value","geocodeByAddress","results","getLatLng","latlng","handleInput","targetName","target","formatDate","date","getFullYear","onSubmit","placeholder","required","onChange","htmlFor","minDate","selected","map","key","AddTrip","reviewService","add","reviewId","review","createdAt","addedReview","reviewActions","loadReviews","reviews","addReview","_TripPreview","handleClick","getTripPrice","reduce","acc","currValue","price","amount","getReviewsAvg","rating","currRev","toFixed","err","addClass","days","style","pointerEvents","createdBy","TripPreview","reviewReducer","_TripList","img","TripList","tripReducer","SwiperCore","use","EffectCoverflow","Autoplay","EffectFade","Navigation","Pagination","Scrollbar","A11y","TripSlider","effect","slidesPerView","navigation","centeredSlides","delay","coverflowEffect","rotate","depth","pagination","clickable","el","UserFlow","fontWeight","_HomePage","smooth","scroll","scrollIntoView","behavior","block","HomePage","TripFilter","mostOccDests","onsetFilter","autoComplete","list","_TripStock","getMostOccDests","concat","numOfOccMap","numOfOccArr","Object","entries","sort","dest1","dest2","destOcc","toLocaleUpperCase","substring","field","getTripsForDisplay","filter","includes","TripStock","Login","email","password","userCreds","handleForm","React","Signup","handleChange","tripToRed","_LoginSignupPage","action","tripIdToRed","all","page","LoginSignupPage","eventBus","listener","callListener","detail","dispatchEvent","CustomEvent","ItemTypes","ActivitiePreview","act","onRemoveAct","onEdit","onOpenDetails","useDrag","item","collect","monitor","isDragging","drag","isFirstCol","isDayHeadClass","literalDay","isDrag","isLenOne","duration","findIndex","destination","ref","gridRow","row","OpenDaySlot","onDragMove","getRowIdx","useDrop","accept","drop","isOver","_isOver","DayActivities","newDay","reCalcPos","DayTimeLine","times","DestNamePrev","updateFreeDays","freeDays","_dest","display","gridColumn","DestinationsHeader","allDestinations","daysCount","gridTemplateColumns","TripAssembly","weekMat","tripLength","actsToDisplay","minDestinations","setChosenDay","linearDaysDates","getLinearTripDays","toLocaleDateString","currDayDate","openSideBar","initiateAssembly","windowWidth","innerWidth","loadWeekMat","getMinDestinations","WeeklyActsToDisplay","mapActsToDays","destTimeStamp","at","prevDate","currDate","currDayActs","getDaysInMonth","freeDay","showDaysName","actId","removeAct","_act","updateTripAct","isOccTimeSlot","activity","currStartTime","currEndTime","checkedStartTime","checkedEndTime","act1","act2","sortDateMap","getCol","n","x","saveAct","find","newTime","getTimeFromIdx","destStart","desEnd","actCopy","currWeekDates","getWeekDests","linearDays","minDay","idxMaxDay","maxDay","destEnd","destsHeadLength","mapDestsToHeaderLength","destsNames","keys","destsLength","values","currDestName","currDest","tripStart","tripEnd","destinationsTimes","full","getDestsWithActs","allActs","isActInDests","onTogglePage","direction","pageCount","newPage","getDayNumOfAct","getTwoDig","numStr","setFullAssembly","_removeBus","removeBus","startTime","_time","arrSorted","currDay","day1","day2","currActs","actPreviews","dayActs","renderDayActivities","MembersPreview","member","AddDestination","addDestOpen","toggleAddDestination","addDestination","WeekPreview","showDay","hotDog","RouteCalendar","calendarData","unshift","getFirstSunday","getLastSaturday","getDaysAround","generateCalendar","weekCmps","weeksCount","splice","renderTable","RouteTimeLinePreview","isLast","updateDestinations","letFire","RouteTimeLine","TripRoute","toggleChat","setDestsMarkers","isOn","_Chat","from","msgs","isTyping","loadHistory","addMsg","newMsg","sendMsg","userTyping","msgHandleChange","trim","chatOpen","Chat","_MapContainer","bounds","markers","selectedPlace","activeMarker","showingInfoWindow","onMarkerClick","marker","e","onMapClicked","containerStyle","width","height","google","maps","LatLngBounds","extend","LatLng","initiateMarkerABounds","BASE_IMG_URL","fitBounds","panTo","setZoom","title","position","icon","zoom","onReady","mapProps","styles","featureType","elementType","stylers","saturation","color","lightness","visibility","weight","getMarkers","visible","MapContainer","GoogleApiWrapper","apiKey","_TripApp","settingsOpen","isSocketSetup","sideBar","getMarkersOfDests","destIdxToMove","moveToIdx","moveDifference","destTomove","constant","passDifference","constant2","_newTrip","toggleSettings","newDest","actToRender","setTrip","params","openSignup","sideBarClass","TripApp","_UserTrips","UserTrips","EditActivity","activitie","labels","notes","minTime","maxTime","handleTime","tzoffset","localISOTime","checked","onSaveAct","datetime","currency","getValidTime","destIdx","minT","maxT","minTemp","_min","_max","maxDate","showTimeSelect","showFullMonthYearPicker","dateFormat","PrevEditActivity","isInputOpen","split","handleContentEditable","currentTarget","dataset","innerText","endTime","contentEditable","suppressContentEditableWarning","data-placeholder","spellCheck","data-name","onBlur","AddReview","reviewToAdd","content","elInput","createRef","onInputChange","inputType","onAddReview","setRating","val","current","focus","classToAdd","isReviewOpen","LongTxt","text","isLongTxtShown","onReadMore","ReviewPreview","stars","getStars","ReviewList","_TripReviews","onToggleExpend","TripReviews","AddMember","copied","emailToSend","mail","disabled","onCopy","appRoot","document","createElement","body","appendChild","NotificationMsg","_Modal","dynamicCmp","nameToDisplay","checkKey","curCmp","modal","onKeyDown","onMouseDown","stopPropagation","Modal","modalReducer","_TripDetails","aboutTrip","TripDetails","_Loader","loader","Loader","loaderOn","Footer","App","component","exact","Boolean","hostname","initialState","selectedReview","localLoggedinUser","parse","users","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","DndProvider","backend","HTML5Backend","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.0169a98f.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nexport class UserPreview extends Component {\r\n    state = {\r\n        expand: false\r\n    }\r\n    toggleExpand = () => {\r\n        this.setState({ expand: !this.state.expand })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div >\r\n                    <img className=\"user-preview\" src={this.props.user.imgUrl} alt={this.props.user.username + 'img'} onClick={this.toggleExpand}/>\r\n                    { <div className={`user-preview-expand flex column justify-around ${this.state.expand?'open':''}`} >\r\n                        <Link to={`/user/${this.props.user._id}`} >My Trips</Link>\r\n                        <button onClick={()=>{this.props.logout(); this.props.openMainNavbar()}}>Logout</button>\r\n                    </div>}\r\n                </div>\r\n            </React.Fragment>\r\n\r\n        )\r\n    }\r\n}","import Axios from 'axios';\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n});\r\n\r\nexport default {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'get', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\r\n        console.dir(err);\r\n        // if (err.response && err.response.status === 401) {\r\n        //     window.location.assign('/#/login');\r\n        // }\r\n        throw err;\r\n    }\r\n}","\r\nimport httpService from './httpService'\r\n\r\nexport const tripService = {\r\n    query,\r\n    getById,\r\n    remove,\r\n    save\r\n}\r\n\r\n\r\n// const user = {\r\n//     _id: 'u101',\r\n//     fullName: 'Orly Amdadi',\r\n//     userName: 'orly@amdadi.com',\r\n//     password: 'tinkerbell',\r\n//     imgUrl: 'http://some-img',\r\n// }\r\n\r\nasync function query(filterBy={name:''}) {\r\n    const queryStr = `?search=${filterBy.name}`;\r\n    return httpService.get(`trip${queryStr}`);\r\n    \r\n}\r\n\r\n\r\nasync function getById(tripId) {\r\n    return httpService.get(`trip/${tripId}`,tripId)\r\n\r\n}\r\n\r\nfunction remove(tripId) {\r\n    return httpService.delete(`trip/${tripId}`)\r\n}\r\n\r\nfunction save(trip) {\r\n    if (trip._id) {\r\n        return httpService.put(`trip/${trip._id}`, trip)\r\n\r\n    } else {\r\n        return httpService.post('trip', trip)\r\n    }\r\n}","import io from 'socket.io-client';\r\n\r\nconst baseUrl = (process.env.NODE_ENV === 'production')? '' : '//localhost:3030'\r\nexport const socketService = createSocketService();\r\n// export const socketService = createDummySocketService();\r\n\r\n// window.socketService = socketService;\r\n// export socketService;\r\n\r\nfunction createSocketService() {\r\n  var socket;\r\n  const socketService = {\r\n    setup() {\r\n      socket = io(baseUrl);\r\n    },\r\n    on(eventName, cb) {\r\n      socket.on(eventName, cb);\r\n    },\r\n    off(eventName, cb) {\r\n      socket.off(eventName, cb);\r\n    },\r\n    emit(eventName, data) {\r\n      socket.emit(eventName, data);\r\n    },\r\n    terminate() {\r\n      socket = null;\r\n    }\r\n  }\r\n  return socketService;\r\n}\r\n\r\n// function createDummySocketService() {\r\n//   var listenersMap = {}\r\n//   const socketService = {\r\n//     setup() {\r\n//       listenersMap = {}\r\n//       window.listenersMap = listenersMap;\r\n//     },\r\n//     terminate() {\r\n//       listenersMap = {}\r\n//     },\r\n//     on(eventName, cb) {\r\n//       listenersMap[eventName] = [...(listenersMap[eventName]) || [], cb]\r\n//     },\r\n//     off(eventName, cb) {\r\n//       listenersMap[eventName] = listenersMap[eventName].filter(l => l !== cb)\r\n//     },\r\n//     emit(eventName, data) {\r\n//       if (!listenersMap[eventName]) return;\r\n//       listenersMap[eventName].forEach(listener => {\r\n//         listener(data)\r\n//       });\r\n//     },\r\n//     debugMsg() {\r\n//       this.emit('chat addMsg', {from: 'Someone', txt: 'Aha it worked!'})\r\n//     },\r\n//   }\r\n//   return socketService;\r\n// }\r\n\r\n\r\n// Basic Tests\r\n// function cb(x) {console.log(x)}\r\n// socketService.on('baba', cb)\r\n// socketService.emit('baba', 'DATA')\r\n// socketService.off('baba', cb)\r\n","import { tripService } from \"../../services/tripService\"\r\nimport { socketService } from '../../services/socketService'\r\n\r\nexport function loadTrip(tripId, flag) {\r\n    return async dispatch => {\r\n        try {\r\n            let trip = {}\r\n            if (flag) {\r\n                dispatch({ type: 'SET_LOADER' })\r\n                trip = await new Promise((resolve, reject) => {\r\n                    setTimeout(async () => {\r\n                        var tripLoad = await tripService.getById(tripId)\r\n                        resolve(tripLoad)\r\n                    }, 3500)\r\n                })\r\n                dispatch({ type: 'SET_TRIP', trip })\r\n            }\r\n            else {\r\n                trip = await tripService.getById(tripId)\r\n                dispatch({ type: 'SET_TRIP', trip })\r\n            }\r\n            return trip\r\n        } catch (err) {\r\n            console.log(err);\r\n        } finally {\r\n            dispatch({ type: 'CLOSE_LOADER' })\r\n\r\n        }\r\n\r\n    }\r\n}\r\nexport function setTrip(trip) {\r\n    \r\n    return async dispatch => {\r\n        dispatch({ type: 'SET_LOADER' })\r\n        dispatch({ type: 'SET_TRIP', trip })\r\n        dispatch({ type: 'CLOSE_LOADER' })\r\n        return trip\r\n\r\n    }\r\n}\r\n\r\nexport function resetTrip() {\r\n    const trip = null\r\n    return dispatch => {\r\n        dispatch({ type: 'SET_TRIP', trip })\r\n    }\r\n}\r\n\r\nexport function loadTrips(filterBy) {\r\n    return async dispatch => {\r\n        const trips = await tripService.query(filterBy)\r\n        dispatch({ type: 'SET_TRIPS', trips })\r\n    }\r\n}\r\n\r\n\r\nexport function addTripFast(trip) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch({ type: 'EDIT_TRIP', trip })\r\n            await tripService.save(trip)\r\n        }\r\n\r\n        catch (err) {\r\n        }\r\n    }\r\n}\r\n\r\nexport function addTrip(newTrip) {\r\n    return async dispatch => {\r\n        try {\r\n            \r\n            const trip = await tripService.save(newTrip)\r\n            // socketService.emit('tripToUpdate', trip);\r\n            // socketService.emit('tripToUpdate', newTrip);\r\n            dispatch({ type: 'EDIT_TRIP', trip })\r\n            return trip\r\n        }\r\n        catch (err) {\r\n        }\r\n    }\r\n}","\r\n\r\nexport function showModal(cmp,props) {\r\n    return dispatch => {\r\n        dispatch({type:'SET_MODAL',cmp,props})\r\n    }\r\n}\r\n\r\nexport function closeModal() {\r\n    return  dispatch => {\r\n        dispatch({ type: 'CLOSE_MODAL' })\r\n    }\r\n}","import {storageService} from './asyncStorageService'\r\nimport httpService from './httpService'\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getUsers,\r\n    getById,\r\n    remove,\r\n    update\r\n}\r\n\r\nwindow.userService = userService;\r\n\r\nfunction getUsers() {\r\n    return httpService.get('user')\r\n}\r\n\r\nfunction getById(userId) {\r\n    return httpService.get(`user/${userId}`)\r\n}\r\nfunction remove(userId) {\r\n    return httpService.delete(`user/${userId}`)\r\n}\r\n\r\nfunction update(user) {\r\n    return httpService.put(`user/${user._id}`, user)\r\n}\r\n\r\nasync function login(userCred) {\r\n    const user = await httpService.post('auth/login', userCred)\r\n    if (user) return _handleLogin(user)\r\n    return Promise.reject('user not found'+userCred)\r\n}\r\nasync function signup(userCred) {\r\n    const user = await httpService.post('auth/signup', userCred)\r\n    return _handleLogin(user)\r\n}\r\nasync function logout() {\r\n    await httpService.post('auth/logout');\r\n    sessionStorage.clear();\r\n}\r\nfunction _handleLogin(user) {\r\n    sessionStorage.setItem('user', JSON.stringify(user))\r\n    return user;\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavLink, Link, withRouter } from 'react-router-dom'\r\n\r\nimport { UserPreview } from '../MainCmps/UserPreview'\r\n\r\nimport { resetTrip } from '../../store/actions/tripActions'\r\nimport { showModal } from '../../store/actions/modalActions'\r\nimport { logout } from '../../store/actions/userActions'\r\n\r\nclass _MainNavBar extends Component {\r\n    state = {\r\n        navBar: '',\r\n        isNavbarOpen: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        const path = this.props.location.pathname.match('/')\r\n        const match = path && this.props.location.pathname === path[0]\r\n        if (!match) this.backgroundChanged()\r\n        window.addEventListener('scroll', this.backgroundChanged);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.location.pathname !== prevProps.location.pathname) {\r\n            this.backgroundChanged()\r\n            if (this.props.location.pathname === '/') {\r\n                this.props.resetTrip()\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.backgroundChanged);\r\n    }\r\n\r\n\r\n    backgroundChanged = () => {\r\n        const path = this.props.location.pathname.match('/')\r\n        const match = path && this.props.location.pathname === path[0]\r\n        if (window.pageYOffset >= 80 || !match) {\r\n            this.setState({ navBar: true })\r\n        } else { this.setState({ navBar: false }) }\r\n    }\r\n\r\n    openMainNavbar = () => {\r\n        this.setState({ isNavbarOpen: !this.state.isNavbarOpen })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div className={'main-navbar flex justify-between align-center full  ' + (this.state.navBar ? 'navBar-background' : '')}>\r\n                    <Link to=\"/\" onClick={this.openMainNavbar} > <h1 className=\"logo\">Trolly</h1></Link>\r\n                    <div className={`flex justify-between main-navbar-links ${this.state.isNavbarOpen ? 'mainbar-open' : ''}`}>\r\n                        <Link to=\"/trip\"onClick={this.openMainNavbar} >Trips</Link>\r\n                        <NavLink to=\"/about\" onClick={this.openMainNavbar} >About</NavLink>\r\n                        {this.props.usersData.loggedInUser ? <UserPreview openMainNavbar={this.openMainNavbar} logout={this.props.logout} user={this.props.usersData.loggedInUser} /> : <div onClick={() => this.props.showModal('login')}>Login</div>}\r\n                    </div>\r\n                    <button onClick={this.openMainNavbar}> ☰</button>\r\n                </div>\r\n                <div className={`navbar-screen ${this.state.isNavbarOpen ? 'screen-open' : ''}`} onClick={this.openMainNavbar}></div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        usersData: state.userReducer\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    showModal,\r\n    logout,\r\n    resetTrip\r\n}\r\n\r\nexport const MainNavBar = connect(mapStateToProps, mapDispatchToProps)(withRouter(_MainNavBar));","import { userService } from '../../services/userService';\r\n// import { loading, doneLoading } from './systemActions';\r\n\r\n// THUNK\r\n// export function loadUsers() {\r\n//   return async dispatch => {\r\n//     try {\r\n//       // example for loading\r\n//       dispatch(loading);\r\n//       const users = await userService.getUsers();\r\n//       dispatch({ type: 'SET_USERS', users });\r\n//     } catch (err) {\r\n//       console.log('UserActions: err in loadUsers', err);\r\n//       // example for routing - after changing the store\r\n//       // history.push('/some/path');\r\n//     } finally {\r\n//       dispatch(doneLoading);\r\n//     }\r\n//   };\r\n// }\r\n// THUNK\r\n// export function removeUser(userId) {\r\n//   return async dispatch => {\r\n//     try {\r\n//       await userService.remove(userId);\r\n//       dispatch({ type: 'USER_REMOVE', userId });\r\n//     } catch (err) {\r\n//       console.log('UserActions: err in removeUser', err);\r\n//     }\r\n//   };\r\n// }\r\n// THUNK\r\nexport function login(userCreds) {\r\n  return async dispatch => {\r\n    try{\r\n      const user = await userService.login(userCreds);\r\n      dispatch({ type: 'SET_USER', user });\r\n      return user\r\n    }catch(err){\r\n      console.log(err,'actionsuser');\r\n      dispatch({type:'LOGIN_PROBLEM'})\r\n    }\r\n  };\r\n}\r\nexport function signup(userCreds) {\r\n  return async dispatch => {\r\n    const user = await userService.signup(userCreds);\r\n    dispatch({ type: 'SET_USER', user });\r\n    return user\r\n  };\r\n}\r\nexport function logout() {\r\n  return async dispatch => {\r\n    await userService.logout();\r\n    dispatch({ type: 'SET_USER', user: null });\r\n  };\r\n}\r\n","import React from 'react'\r\n\r\nexport function About() {\r\n    return (\r\n        <div>\r\n            About\r\n        </div>\r\n    )\r\n}\r\n","\r\n\r\n\r\nexport const utils = {\r\n    makeId,\r\n    calculateDays,\r\n    createMat,\r\n    getDateDay,\r\n    getWeekDay,\r\n    getTimeDayStr,\r\n    getRandomPic,\r\n    getRandomInt,\r\n    getIsoTime,\r\n    calculateDates,\r\n    getRandomLatLng,\r\n    setToHourMinuets,\r\n    getRandomName\r\n}\r\n\r\nfunction makeId(length = 5) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}\r\n\r\nfunction calculateDays(start, end) {\r\n    end = new Date(end)\r\n    start = new Date(start)\r\n    var difference = end.getTime() - start.getTime();\r\n    var daysDifference = Math.ceil(difference / 999 / 60 / 60 / 24);\r\n    return daysDifference\r\n}\r\n\r\n\r\n\r\nfunction calculateDates(start, end, destinations) {\r\n    let nextDay = new Date(start)\r\n    let dates = [{ day: nextDay, td: { 'start': 0 } }]\r\n    while (nextDay.getDate() !== new Date(end).getDate()) {\r\n        nextDay = new Date(nextDay.getTime() + (1000 * 60 * 60 * 24))\r\n        dates.push({ day: nextDay, td: '' })\r\n        destinations.forEach(dest => {\r\n            if (dest.start.getDate() === nextDay.getDate() && dest.start.getMonth() === nextDay.getMonth()) {\r\n                dates[dates.length - 1].td = { ...dates[dates.length - 1].td, 'start': dest.idx }\r\n            } else if (dest.start < nextDay && nextDay.setHours(12) < dest.end.setHours(11)) {\r\n                dates[dates.length - 1].td = { ...dates[dates.length - 1].td, 'full': dest.idx }\r\n            } else if (dest.end.getDate() === nextDay.getDate() && dest.end.getMonth() === nextDay.getMonth()) {\r\n                dates[dates.length - 1].td = { ...dates[dates.length - 1].td, 'end': dest.idx }\r\n            }\r\n        })\r\n    }\r\n    return dates\r\n}\r\n\r\n\r\nfunction createMat(cols, rows) {\r\n    const mat = []\r\n    for (let i = 0; i < rows; i++) {\r\n        mat[i] = []\r\n        for (let j = 0; j < cols; j++) {\r\n            mat[i][j] = { pos: { i, j } }\r\n\r\n            if (j === 0) {\r\n                mat[i][j] = { ...mat[i][j], col: 0 }\r\n            }\r\n        }\r\n    }\r\n\r\n    return mat\r\n}\r\n\r\nfunction getDateDay(timeStamp) {\r\n    const time = new Date(timeStamp);\r\n    return time.getDate()\r\n}\r\n\r\nfunction setToHourMinuets(timeStamp, hour, min) {\r\n    let time = new Date(timeStamp)\r\n    time.setHours(hour, min)\r\n    return time.getTime()\r\n\r\n}\r\n\r\n\r\nfunction getWeekDay(timeStamp) {\r\n    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n    const time = new Date(timeStamp);\r\n    return days[time.getDay()]\r\n}\r\n\r\nfunction getTimeDayStr(timeStamp) {\r\n    let time = new Date(timeStamp)\r\n    let hours = _get2DigTime(time.getHours());\r\n    let minuets = _get2DigTime(time.getMinutes());\r\n    return `${hours}:${minuets}`\r\n}\r\n\r\nfunction _get2DigTime(num) {\r\n    if ((num + '').length === 1) return '0' + num\r\n    return num\r\n}\r\n\r\nfunction getRandomInt(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1) + min);\r\n}\r\n\r\nfunction getRandomPic() {\r\n    const imgIdx = getRandomInt(0, imgs.length - 1)\r\n    return imgs[imgIdx]\r\n}\r\n\r\nfunction getIsoTime(timeStamp) {\r\n    let time = new Date(timeStamp);\r\n    time.setMinutes(time.getMinutes() - time.getTimezoneOffset());\r\n    return time.toISOString().slice(0, 16)\r\n}\r\nfunction getRandomLatLng() {\r\n    let locations = [\r\n        { lat: -23.5475, lng: -46.6361 }, //sau paolo\r\n        { lat: 13.751330328, lng: 100.489664708 }, //bangkok\r\n        { lat: 25.105497, lng: 121.597366 }, //taipei\r\n        { lat: 21.028511, lng: 105.804817 }, //hanoi\r\n        { lat: 39.916668, lng: 116.383331 }, //beijin\r\n        { lat: -16.5000000, lng: -68.1500000 }, //la paz\r\n        { lat: 27.700769, lng: 85.300140 }, // //Kathmandu, nepal\r\n        { lat: 14.599512, lng: 120.984222 }, //manila\r\n        { lat: 1.290270, lng: 103.851959 }, //singapor city\r\n        { lat: 6.927079, lng: 79.861244 }, //colombo sri lanka\r\n        { lat: 28.644800, lng: 77.216721 }, //new delhi\r\n    ]\r\n    return locations[getRandomInt(0, locations.length - 1)]\r\n}\r\n\r\nfunction getRandomName() {\r\n    const name = [\r\n        'Moshe544',\r\n        'Cochava',\r\n        'Ilanit',\r\n        'Yaron.B',\r\n        'J-Lo',\r\n        'Meni',\r\n        'QueenB',\r\n        'Latifa',\r\n        'Elvis',\r\n        'Yorgan',\r\n        'Matilda',\r\n        'Muki',\r\n        'Puki',\r\n        'Alfonso',\r\n        'Idan',\r\n        'Roi',\r\n        'Stav',\r\n        'Jermi',\r\n        'Fernandinho',\r\n        'Messi',\r\n        'L-James',\r\n        'Yonit',\r\n        'Adam',\r\n        'Eve',\r\n        'Kelly',\r\n        'Steve',\r\n        'Stue',\r\n        'Laquisha',\r\n        'Marisa',\r\n        'Sharon',\r\n        'Eliyahu'\r\n    ]\r\n    return name[getRandomInt(0, name.length - 1)]\r\n}\r\n\r\n\r\nconst imgs = [\r\n    'https://images.unsplash.com/photo-1484804959297-65e7c19d7c9f?ixlib=rb-1.2.1', //clear water with sup\r\n    'https://images.unsplash.com/photo-1550399504-8953e1a6ac87?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //reading book at the beach\r\n    'https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //sunglass on sand\r\n    'https://images.unsplash.com/photo-1527004013197-933c4bb611b3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //norway\r\n    'https://images.unsplash.com/photo-1480497490787-505ec076689f?ixlib=rb-1.2.1', //norway\r\n    'https://images.unsplash.com/photo-1475066392170-59d55d96fe51?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //norway\r\n    'https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?ixlib=rb-1.2.1', //manhaten\r\n    'https://images.unsplash.com/photo-1507272931001-fc06c17e4f43?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //norway\r\n    'https://images.unsplash.com/photo-1559128010-7c1ad6e1b6a5?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //thailnad\r\n    'https://images.unsplash.com/photo-1545579133-99bb5ab189bd?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //maldivas\r\n    'https://images.unsplash.com/photo-1519451241324-20b4ea2c4220?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //thailand\r\n    'https://images.unsplash.com/photo-1528181304800-259b08848526?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //thailand\r\n    'https://images.unsplash.com/photo-1524492412937-b28074a5d7da?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //india\r\n    'https://images.unsplash.com/photo-1516483638261-f4dbaf036963?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0',  //italy/capri\r\n    'https://images.unsplash.com/photo-1523906834658-6e24ef2386f9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //itlay/venice\r\n    'https://images.unsplash.com/photo-1517792844039-e52afb564132?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //italy\r\n    'https://images.unsplash.com/photo-1499678329028-101435549a4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //italy',\r\n    'https://images.unsplash.com/photo-1535063406830-27dfae54262a?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //italy\r\n    'https://images.unsplash.com/photo-1554357475-accb8a88a330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //jordan\r\n    'https://images.unsplash.com/photo-1559628233-100c798642d4?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //indonesia\r\n    'https://images.unsplash.com/photo-1527095655060-4026c4af2b25?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //switzerland\r\n    'https://images.unsplash.com/photo-1583702993462-43615c05ceee?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //switzerland\r\n    'https://images.unsplash.com/photo-1505662695181-d4b60363d2a3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //singapore\r\n    'https://images.unsplash.com/photo-1455459182396-ae46100617cb?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //?\r\n    'https://images.unsplash.com/photo-1512453979798-5ea266f8880c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //dubai\r\n    'https://images.unsplash.com/flagged/photo-1559717865-a99cac1c95d8?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //dubai\r\n    'https://images.unsplash.com/flagged/photo-1559717201-fbb671ff56b7?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjE2NjY2NH0', //dubai\r\n]","export function showMsg(msg) {\r\n    return dispatch => {\r\n        setTimeout(() => {\r\n            this.closeMsg()\r\n        }, 3000)\r\n        dispatch({ type: 'SET_MSG', msg })\r\n        \r\n    }\r\n    \r\n}\r\n\r\nexport function closeMsg() {\r\n    return dispatch => {\r\n        dispatch({ type: 'CLOSE_MSG' })\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { closeMsg, showMsg } from '../../store/actions/msgActions'\r\n\r\n\r\n\r\nclass _ErrorMsg extends Component {\r\n    render() {\r\n        const { msg, type } = this.props\r\n        return (\r\n            <React.Fragment>\r\n                {(type === 'input') && <div className={this.props.isShown ? '' : 'hide'}>\r\n                    <small className=\"error-msg\"><i className=\"fas fa-exclamation-circle\"></i>{msg}</small>\r\n                </div>}\r\n                {type === 'invalid-move' && <div className={this.props.isShown ? '' : 'hide'}>\r\n                    <p className=\"invalid-move\"><i className=\"fas fa-exclamation-triangle\"></i>{msg}</p>\r\n                </div>}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        msg: state.msgReducer.msg,\r\n        isShown: state.msgReducer.isShown,\r\n        type: state.msgReducer.type\r\n\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    showMsg,\r\n    closeMsg\r\n}\r\n\r\nexport const ErrorMsg = connect(mapStateToProps, mapDispatchToProps)(_ErrorMsg)\r\n","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux';\r\nimport { addTrip } from '../../store/actions/tripActions'\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { ErrorMsg } from '../MainCmps/ErrorMsg';\r\nimport { showMsg, closeMsg } from '../../store/actions/msgActions';\r\nimport { GooglePlaces } from '../MainCmps/GooglePlaces';\r\nimport {\r\n    geocodeByAddress,\r\n    // geocodeByPlaceId,\r\n    getLatLng,\r\n} from 'react-places-autocomplete';\r\n\r\n\r\nclass _AddTrip extends Component {\r\n\r\n\r\n    state = {\r\n        tripName: '',\r\n        currTrip: {\r\n            name: '',\r\n            location: { lat: null, lng: null },\r\n            startDate: '',\r\n            endDate: '',\r\n\r\n        },\r\n        destinations: '',\r\n    }\r\n\r\n    onSetDestinations = (ev) => {\r\n        ev.preventDefault()\r\n        const newtrip = this.state.currTrip\r\n        newtrip.name = newtrip.name.toLowerCase()\r\n        if (!this.state.currTrip.startDate && !this.state.currTrip.endDate) {\r\n            newtrip.startDate = Date.now()\r\n            newtrip.endDate = Date.now() + 1 * 1000 * 60 * 60 * 24\r\n        }\r\n\r\n        newtrip.id = utils.makeId()\r\n        this.setState({\r\n            destinations: [...this.state.destinations, newtrip],\r\n            currTrip: {\r\n                name: '',\r\n                location: { lat: null, lng: null },\r\n                startDate: '',\r\n                endDate: '',\r\n            }\r\n        })\r\n    }\r\n\r\n    onSaveDestination = async (ev) => {\r\n        ev.preventDefault();\r\n        if (!this.state.destinations.length) {\r\n            this.props.showMsg({ type: 'input', msg: 'At least one destination must be added' })\r\n            return\r\n        }\r\n        const trip = {\r\n            tripName: this.state.tripName,\r\n            imgUrl: utils.getRandomPic(),\r\n            activities: [],\r\n            destinations: this.state.destinations\r\n        }\r\n\r\n        if (this.props.loggedInUser) {\r\n            trip.members = [\r\n                {\r\n                    id: this.props.loggedInUser._id,\r\n                    username: this.props.loggedInUser.username,\r\n                    imgUrl: this.props.loggedInUser.imgUrl,\r\n                }\r\n            ]\r\n        }\r\n\r\n        else trip.members = []\r\n        const newTrip = await this.props.addTrip(trip)\r\n        this.props.history.push(`/trip/${newTrip._id}/tripRoute`)\r\n    }\r\n\r\n    // getRandomLatLng() {\r\n    //     const LL = utils.getRandomLatLng()\r\n    //     return LL\r\n    // }\r\n\r\n\r\n    handleAddress = (name) => {\r\n        this.setState({ currTrip: { ...this.state.currTrip, name } })\r\n    }\r\n\r\n    handleSelect = async (value) => {\r\n        const results = await geocodeByAddress(value);\r\n        const latlng = await getLatLng(results[0])\r\n        this.setState({ currTrip: { ...this.state.currTrip, location: latlng, name: value } })\r\n    }\r\n\r\n    handleInput = (ev, name) => {\r\n        let value;\r\n        let targetName;\r\n        if (ev.target && ev.target.name === 'tripName') {\r\n            this.setState({ ...this.state, tripName: ev.target.value })\r\n            return\r\n        }\r\n        if (ev.target) {\r\n            value = ev.target.value;\r\n            targetName = ev.target.name\r\n        }\r\n        else {\r\n            value = new Date(ev).getTime();\r\n           \r\n            targetName = name\r\n        }\r\n\r\n        this.setState({ ...this.state, currTrip: { ...this.state.currTrip, [targetName]: value } })\r\n    }\r\n\r\n\r\n    formatDate = (date) => {\r\n        return `${new Date(date).getDate()}/${new Date(date).getMonth() + 1}/${new Date(date).getFullYear()}`\r\n    }\r\n    render() {\r\n        const startDate = (this.state.destinations.length && this.state.destinations[this.state.destinations.length - 1].endDate) ||\r\n            Date.now()\r\n        return (\r\n            <div className=\"flex add-destination-form-wraper\">\r\n                <form className=\"flex column add-destination-form\" onSubmit={this.onSetDestinations}>\r\n                    <h3>Create your trip</h3>\r\n                    <div className=\"flex column\">\r\n                        <input className=\"styled-input\" type=\"text\"\r\n                            name=\"tripName\"\r\n                            placeholder=\"Enter Trip Name\"\r\n                            id=\"add-dest-name\"\r\n                            value={this.state.tripName}\r\n                            required\r\n                            onChange={this.handleInput}\r\n                        />\r\n                    </div>\r\n                    {/* <GooglePlaces\r\n                        handleSelect={this.handleSelect}\r\n                        handleAddress={this.handleAddress}\r\n                        address={this.state.currTrip.name}\r\n                        location={this.state.currTrip.location}\r\n                    /> */}\r\n                    <div className=\"flex column\">\r\n                        <input className=\"styled-input\" type=\"text\"\r\n                            name=\"name\"\r\n                            placeholder=\"Enter City Name\"\r\n                            id=\"add-dest-city\"\r\n                            value={this.state.currTrip.name}\r\n                            required\r\n                            onChange={this.handleInput}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex\">\r\n                        <div className=\"flex column\">\r\n                            <label htmlFor=\"startdate-dest-input\">Start At</label>\r\n                            <DatePicker\r\n                                minDate={startDate}\r\n                                id=\"startdate-dest-input\"\r\n                                name=\"startDate\"\r\n                                className=\"styled-input\"\r\n                                required\r\n                                // selected={this.state.currTrip.startDate || Date.now()}\r\n                                selected={this.state.destinations.length ? startDate : Date.now()}\r\n                                onChange={date => { this.handleInput(date, 'startDate') }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"flex column\">\r\n                            <label htmlFor=\"enddate-dest-input\">End At</label>\r\n                            <DatePicker\r\n                                minDate={this.state.currTrip.startDate || Date.now()}\r\n                                id=\"enddate-dest-input\"\r\n                                name=\"endDate\"\r\n                                className=\"styled-input\"\r\n                                required\r\n                                selected={this.state.currTrip.endDate || Date.now()}\r\n                                onChange={date => { this.handleInput(date, 'endDate') }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <ErrorMsg />\r\n                    <button className=\"styled-button\" onSubmit={this.onSetDestinations}>Add destination</button>\r\n                    {this.state.destinations.length ? <ol className=\"trip-list-add-form flex column\">\r\n                        {this.state.destinations.map(dest => <li key={utils.makeId()} className=\"flex justify-between\">\r\n                            <p>{dest.name}</p>\r\n                            <div className=\"flex\">\r\n                                <p>{this.formatDate(dest.startDate)}</p> -\r\n                                <p>{this.formatDate(dest.endDate)}</p>\r\n                            </div>\r\n                        </li>)}\r\n                    </ol> : ''}\r\n                    <button className=\"styled-button\" onClick={this.onSaveDestination}>Ready To Plan!</button>\r\n                </form>\r\n                <div className=\"add-dest-img-wraper\">\r\n                    <img src=\"https://images.unsplash.com/photo-1484804959297-65e7c19d7c9f?ixlib=rb-1.2.1\" alt=\"\" />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userReducer.loggedInUser\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    addTrip,\r\n    showMsg,\r\n    closeMsg\r\n}\r\n\r\nexport const AddTrip = connect(mapStateToProps, mapDispatchToProps)(withRouter(_AddTrip));","import React, { Component } from 'react'\r\n\r\nimport PlacesAutocomplete from 'react-places-autocomplete';\r\n\r\n\r\nexport class GooglePlaces extends Component {\r\n\r\n    state = {\r\n        address: '',\r\n        coordinates: { lat: null, lng: null },\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <PlacesAutocomplete value={this.props.address} onChange={this.props.handleAddress} onSelect={this.props.handleSelect}>\r\n                    {({ getInputProps, suggestions, getSuggestionItemProps, loading }) => {\r\n                        return <div> <input\r\n                            {...getInputProps({\r\n                                placeholder: 'Enter destination (city)...',\r\n                                className: 'styled-input',\r\n                            })}\r\n                        />\r\n                            <div className=\"places-list\">\r\n                                {loading ? <p>Loading . . .</p> : null}\r\n                                {suggestions.map((suggestion) => {\r\n\r\n                                    const style = {\r\n                                        backgroundColor: suggestion.active ? '#f097ee' : '#fff',\r\n                                        display: suggestion ? 'inherit' : 'none',\r\n                                        padding: suggestion ? '5px 10px' : 'none',\r\n                                        borderRadius: '3px',\r\n                                        cursor: 'pointer',\r\n                                        fontSize: '0.8rem',\r\n                                        width:'100%',\r\n                                    }\r\n                                    return (<div {...getSuggestionItemProps(suggestion, { style })}>\r\n                                        {suggestion.description}\r\n                                    </div>)\r\n\r\n                                })}\r\n                            </div>\r\n\r\n                        </div>\r\n                    }}\r\n                </PlacesAutocomplete>\r\n\r\n            </div >\r\n        )\r\n    }\r\n}\r\n","import httpService from './httpService';\r\nimport { utils } from './utils';\r\nimport { storageService } from './asyncStorageService'\r\n\r\n\r\nexport const reviewService = {\r\n    add,\r\n    query,\r\n    remove\r\n};\r\n\r\n\r\nasync function query(filterBy) {\r\n\r\n    if (filterBy) var queryStr = `?tripId=${filterBy.tripId}`;\r\n    // const reviews = await storageService.query(`review`);\r\n    // return reviews.filter(review => review.aboutTrip === filterBy.tripId)\r\n    return httpService.get(`review${queryStr}`);\r\n\r\n}\r\n\r\nfunction remove(reviewId) {\r\n    return httpService.delete(`review/${reviewId}`);\r\n}\r\nasync function add(review) {\r\n    review.createdAt = Date.now();\r\n    const addedReview = await httpService.post(`review`, review);\r\n    return addedReview\r\n}\r\n","import { reviewService } from '../../services/reviewService';\r\n\r\n\r\nexport const reviewActions = {\r\n    loadReviews,\r\n    addReview\r\n}\r\n\r\nfunction loadReviews(tripId) {\r\n    return async dispatch => {\r\n        try {\r\n            const reviews = await reviewService.query(tripId);\r\n            dispatch({ type: 'SET_REVIEWS', reviews });\r\n            return reviews\r\n\r\n        } catch (err) {\r\n            console.log('ReviewActions: err in loadReviews', err);\r\n        }\r\n    };\r\n}\r\n\r\nasync function addReview(review) {\r\n    await reviewService.add(review)\r\n    return async dispatch => {\r\n        try {\r\n            const addedReview = await reviewService.add(review);\r\n            dispatch({ type: 'REVIEW_ADD', review: addedReview });\r\n        }\r\n        catch (err) {\r\n            console.log('ReviewActions: err in addReview', err);\r\n        }\r\n    }\r\n}\r\n","import { withRouter } from 'react-router-dom'\r\nimport { utils } from '../../services/utils'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { reviewActions } from '../../store/actions/reviewActions'\r\n\r\nimport React, { Component } from 'react'\r\n\r\nclass _TripPreview extends Component {\r\n\r\n    async componentDidMount() {\r\n        let reviews = await this.props.loadReviews({ tripId: this.props.trip._id })\r\n        if (!reviews) reviews = []\r\n        this.setState({ reviews })\r\n\r\n    }\r\n\r\n\r\n    handleClick = () => {\r\n        // let isMember;\r\n        // if(this.props.loggedInUser){\r\n        //    isMember = this.props.trip.members.find(member=>member.id===this.props.loggedInUser._id)\r\n        // }\r\n        // if(isMember){\r\n            //     return\r\n            // }\r\n            this.props.history.push(`/trip/${this.props.trip._id}/triproute`)\r\n    }\r\n\r\n    getTripPrice = (activities) => {\r\n        let price = activities.reduce((acc, currValue) => {\r\n            acc = acc + currValue.price.amount\r\n            return acc\r\n        }, 0)\r\n        return price\r\n    }\r\n\r\n    getReviewsAvg = () => {\r\n        try {\r\n            const rating = this.state.reviews.reduce((acc, currRev) => {\r\n                if (this.state.reviews.length) acc = acc + (+currRev.rating)\r\n                else acc = 0\r\n                return acc\r\n            }, 0)\r\n            return rating ? (rating / this.state.reviews.length).toFixed(1) : 0\r\n        }\r\n        catch (err) {\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { trip, addClass } = this.props\r\n        if (!trip) return <p>Loading Trip . . .</p>\r\n        const price = this.getTripPrice(trip.activities)\r\n        const days = utils.calculateDays(trip.destinations[0].startDate, trip.destinations[trip.destinations.length - 1].endDate)\r\n        const style = (this.props.style ? this.props.style : '')\r\n        const reviews = this.getReviewsAvg()\r\n\r\n        return (\r\n            <div style={{ pointerEvents: (style.pointerEvents ? style.pointerEvents : 'inherit') }} onClick={this.handleClick} className={'trip-preview flex column ' + (addClass ? addClass : '')} >\r\n                < div className=\"img-wraper\" >\r\n                    <img src={trip.imgUrl} alt=\"\" />\r\n                </div>\r\n                <div className=\"trip-preview-details\">\r\n                    <h3>{trip.tripName}</h3>\r\n                    <div className=\"flex details-container\">\r\n                        {trip.createdBy && < div className=\"flex align-center column img-container\">\r\n                            <img className=\"user-img\" src={trip.createdBy.imgUrl} alt=\"user-img\" />\r\n                            <p> {trip.createdBy.username}</p>\r\n                        </div>}\r\n                        <div className=\"flex justify-between column\">\r\n                            <p><i className=\"fas fa-hourglass-half\"></i>{days} days</p>\r\n                            <p>Est Price: <i className=\"fas fa-dollar-sign\"></i>{price}</p>\r\n                            <div className=\"flex rating-star\">\r\n                                <img src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600689776/450716_preview_uyyiz1.png\" alt=\"\" />\r\n                                <div className=\"flex justify-between\">\r\n                                    {reviews ? <span>{reviews} <span>({this.state.reviews.length} reviews) </span></span> : '(0)'}\r\n                                </div>\r\n\r\n                            </div>\r\n                            <p>{`Trollied by ${utils.getRandomName()} and ${utils.getRandomInt(50, 220)} others`}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        reviews: state.reviewReducer.reviews,\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadReviews: reviewActions.loadReviews\r\n}\r\n\r\nexport const TripPreview = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripPreview))\r\n\r\n\r\n\r\n","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport { TripPreview } from './TripPreview'\r\nimport { connect } from 'react-redux';\r\nimport { loadTrips } from '../../store/actions/tripActions';\r\n\r\n\r\nclass _TripList extends Component {\r\n\r\n    async componentDidMount() {\r\n        if (!this.props.trips.length) {\r\n            await this.props.loadTrips()\r\n        }\r\n    }\r\n    render() {\r\n        const { trips, addClass, showModal } = this.props\r\n        if (!trips.length) return <p>Loading Trips . . . </p>\r\n        return (\r\n            <div className={'trip-list trips-container ' + (addClass ? addClass : '')}>\r\n\r\n                {trips.length ? trips.map((trip, idx) =>\r\n                    <TripPreview key={trip._id} trip={trip} showModal={showModal} addClass={addClass} img={utils.getRandomPic()} />\r\n                ) :\r\n                    <TripPreview key={trips._id} trip={trips} addClass={addClass} img={utils.getRandomPic()} />\r\n                }\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        trips: state.tripReducer.trips\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadTrips\r\n}\r\n\r\nexport const TripList = connect(mapStateToProps, mapDispatchToProps)(_TripList);","import React from 'react';\r\nimport { Swiper, SwiperSlide } from 'swiper/react';\r\nimport SwiperCore, { EffectCoverflow, Autoplay, EffectFade, Navigation, Pagination, Scrollbar, A11y } from 'swiper';\r\n\r\nimport 'swiper/swiper-bundle.css';\r\nimport 'swiper/components/effect-fade/effect-fade.scss';\r\nimport { TripList } from './TripList';\r\nimport { TripPreview } from './TripPreview';\r\nimport { utils } from '../../services/utils';\r\n\r\n\r\n\r\nSwiperCore.use([EffectCoverflow, Autoplay, EffectFade, Navigation, Pagination, Scrollbar, A11y]);\r\n\r\n\r\n\r\nconst coverflow = {\r\n    rotate: 50,\r\n    stretch: 0,\r\n    depth: 100,\r\n    modifier: 2,\r\n    // slideShadows: true,\r\n}\r\n\r\nexport function TripSlider({ trips }) {\r\n\r\n\r\n    return (\r\n        <Swiper\r\n            effect=\"coverflow\"\r\n            slidesPerView={\"auto\"}\r\n            // effectCoverflow={true}\r\n            navigation\r\n            centeredSlides={ true}\r\n            // autoplay={true}\r\n            delay={2500}\r\n            coverflowEffect= {{\r\n                rotate: 30,\r\n                depth: 200\r\n              }}\r\n\r\n        pagination={{ clickable: true }}\r\n        >\r\n\r\n\r\n            {\r\n                trips.map((i, el) => {\r\n                    return <SwiperSlide key={utils.makeId()}>\r\n                        <TripPreview trip={i}  key={i._id} addClass={'slider'} img={utils.getRandomPic()}/> \r\n                    </SwiperSlide>;\r\n                })\r\n            }\r\n        </Swiper >\r\n    );\r\n};","import React from 'react'\r\n\r\nexport function UserFlow() {\r\n    return (\r\n        <div className=\"flex column align-center user-flow\" id=\"userFlow\" >\r\n            <div className=\"flex align-center\">\r\n                <div>\r\n                    <p className=\"flow-headline\">Choose a trip</p>\r\n                    <p className=\"flow-content\">Choose from one of our amazing planned trips</p>\r\n                </div>\r\n                <img src=\"https://res.cloudinary.com/roidinary/image/upload/v1600869772/undraw_traveling_t8y2_xnd0ne.svg\" alt=\"choose-travel\" />\r\n            </div>\r\n            <div className=\"flex align-center\">\r\n                <img src=\"https://res.cloudinary.com/roidinary/image/upload/v1600869761/undraw_travel_plans_li01_k6igg6.svg\" alt=\"\" />\r\n                <div className=\"flow-text\">\r\n                    <p className=\"flow-headline\">Personalize it</p>\r\n                    <p className=\"flow-content\">Personalize <span style={{fontWeight:'bold'}}>destinations </span>on Route and <span style={{fontWeight:'bold'}}>activities </span>on Assembly </p>\r\n                </div>\r\n            </div>\r\n            <div className=\"flex align-center\">\r\n                <div>\r\n                    <p className=\"flow-headline\">Add your friends</p>\r\n                    <p className=\"flow-content\">invite friends to plan together on the same document</p>\r\n                </div>\r\n                <img src=\"https://res.cloudinary.com/roidinary/image/upload/v1600870015/undraw_social_friends_nsbv_c9ovrw.svg\" alt=\"\" />\r\n            </div>\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { AddTrip } from '../cmps/Home/AddTrip';\r\nimport { TripSlider } from '../cmps/Home/TripSlider';\r\nimport { UserFlow } from '../cmps/Home/UserFlow';\r\nimport { loadTrips } from '../store/actions/tripActions'\r\nimport { HashLink as Link } from 'react-router-hash-link';\r\n\r\n\r\n\r\nclass _HomePage extends Component {\r\n    state = {\r\n        trips: ''\r\n    }\r\n\r\n\r\n    async componentDidMount() {\r\n        await this.props.loadTrips()\r\n    }\r\n\r\n    // getTripsForDisplay = () => {\r\n    //     this.props.trips.filter(trip=> trip)\r\n    // }\r\n\r\n\r\n    render() {\r\n        if (!this.props.trips[0]) return <p> </p>\r\n        return (\r\n\r\n            <div className=\"home-page  main-container \">\r\n                <div className=\"home-page-hero full\" >\r\n                    <div className=\"description-section\">\r\n                        <h3>Explore planned trips of professional travelers\r\n                            </h3>\r\n                        <h3>and personalize them</h3>\r\n                        <Link smooth to=\"#userFlow\" scroll={el => el.scrollIntoView({ behavior: 'smooth', block:  'center'  })}>\r\n                            <button className=\"styled-button\"> Get Started</button>\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"main-home-page full\">\r\n                    <div className=\"flow-container\">\r\n                        <UserFlow id=\"userFlow\" />\r\n                        <Link smooth to=\"#top-rated-trips\" scroll={el => el.scrollIntoView({ behavior: 'smooth', block: 'nearest'})}>\r\n                            <button className=\"styled-button\"> Let's Trolly!</button>\r\n                        </Link>\r\n                    </div>\r\n                    <div className=\"slideShow-area\" id=\"top-rated-trips\">\r\n                        <div id=\"top-rated-trips\"></div>\r\n                        <h2 className=\"\" >Top rated planned trips</h2>\r\n                        <section className=\"slideShow\" >\r\n                            <TripSlider trips={this.props.trips.slice(0, 4)} />\r\n                            <Link to=\"/trip\"><button className=\"styled-button to-trip-list\"> Show me more</button></Link>\r\n                        </section>\r\n                    </div>\r\n                    <AddTrip />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        trips: state.tripReducer.trips\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadTrips\r\n}\r\n\r\nexport const HomePage = connect(mapStateToProps, mapDispatchToProps)(_HomePage);","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\n\r\nexport class TripFilter extends Component {\r\n\r\n\r\n    render() {\r\n        const { onsetFilter, mostOccDests } = this.props\r\n        return (        \r\n            <div className=\"trip-filter flex\" style={this.props.style}>\r\n                <img src=\"https://res.cloudinary.com/idanrozen/image/upload/v1601236322/search_ejr7qx.png\" alt=\"\"/>\r\n                <input autoComplete=\"off\" placeholder=\"Search destination\" className=\"styled-input\" name=\"name\" onChange={this.props.handleInput} list=\"dest-filter\" />\r\n                <datalist onChange={this.props.handleInput} id=\"dest-filter\">\r\n                    {mostOccDests.map(dest => {\r\n                       return <option key={utils.makeId()} value={`${dest}`}></option>\r\n                    })}\r\n                </datalist>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { TripFilter } from '../cmps/Home/TripFilter';\r\nimport { TripList } from '../cmps/Home/TripList';\r\nimport { showModal } from '../store/actions/modalActions';\r\nimport { loadTrips } from '../store/actions/tripActions';\r\n\r\n\r\nclass _TripStock extends Component {\r\n    state = {\r\n        filterBy: {\r\n            name: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.loadTrips(this.state.filterBy)\r\n    }\r\n\r\n    getMostOccDests = () => {\r\n        const { trips } = this.props\r\n        let destinations = [];\r\n        trips.forEach(trip => {\r\n            destinations = destinations.concat(trip.destinations)\r\n        })\r\n\r\n        const numOfOccMap = destinations.reduce((acc, dest) => {\r\n            acc[dest.name] = (acc[dest.name]) ? acc[dest.name] + 1 : 1\r\n            return acc\r\n        }, {})\r\n        \r\n        let numOfOccArr = Object.entries(numOfOccMap)\r\n        numOfOccArr.sort((dest1, dest2) => {\r\n            return dest2[1] - dest1[1]\r\n        })\r\n\r\n        return numOfOccArr.slice(0, 5).map(destOcc => {\r\n            let destName = destOcc[0][0].toLocaleUpperCase() + destOcc[0].substring(1)\r\n            return destName\r\n        })\r\n    }\r\n\r\n    // renderSrcOpt = () => {\r\n\r\n    // }\r\n\r\n    handleInput = ({ target }) => {\r\n        const field = target.name;\r\n        const value = target.value;\r\n        this.setState({ filterBy: { ...this.state.filterBy, [field]: value } }, () => {\r\n            this.props.loadTrips(this.state.filterBy)\r\n        });\r\n    }\r\n\r\n    getTripsForDisplay = () => {\r\n        const tripList = this.props.trips.filter(trip => {\r\n            return trip.destinations[0].name.includes(this.state.name)\r\n        })\r\n        return tripList\r\n    }\r\n\r\n    render() {\r\n        const trips = this.props.trips\r\n        const mostOccDests = this.getMostOccDests()\r\n        this.getMostOccDests()\r\n        return (\r\n            <div className=\"trip-stock\">\r\n                <h2>All Trips plans</h2>\r\n                <TripFilter mostOccDests={mostOccDests} handleInput={this.handleInput} onsetFilter={this.onsetFilter} />\r\n                <TripList showModal={this.props.showModal} trips={trips} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n\r\n    return {\r\n        trips: state.tripReducer.trips\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadTrips,\r\n    showModal\r\n}\r\n\r\nexport const TripStock = connect(mapStateToProps, mapDispatchToProps)(_TripStock);","import React from 'react'\r\nimport { Formik } from 'formik';\r\n\r\n\r\nexport class Login extends React.Component {\r\n    state = {\r\n        msg: ''\r\n\r\n    }\r\n    onSubmit = async (ev) => {\r\n        ev.preventDefault()\r\n        const { email, password } = ev.target\r\n        const userCreds = { email: email.value, password: password.value }\r\n        const user = await this.props.handleForm(userCreds)\r\n        if (!user) this.setState({ msg: 'wrong username or password' })\r\n        else{\r\n            this.props.closeModal()\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"login-form flex align-center justify-center column\" onSubmit={this.onSubmit} >\r\n                <input className=\"styled-input\" type=\"email\" placeholder=\"email\" name=\"email\"></input>\r\n                <input className=\"styled-input\" type=\"password\" placeholder=\"password\" name=\"password\"></input>\r\n                <button className=\"styled-button\">Login</button>\r\n                <p>not a user? please <span  onClick={()=>this.props.handleClick('signup')}>sign up</span></p>\r\n                {this.state.msg && <p>{this.state.msg}</p>}\r\n            </form>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport { Formik } from 'formik';\r\n\r\n\r\nexport class Signup extends React.Component {\r\n    state = {\r\n        username: '',\r\n        email: '',\r\n        password: '',\r\n        imgUrl: 'https://res.cloudinary.com/roidinary/image/upload/v1600790523/Untitled-1_xumtnf.jpg'\r\n    }\r\n    handleChange=(ev)=>{\r\n        const {value,name}=ev.target;\r\n        this.setState({...this.state,[name]:value})\r\n    }\r\n    onSubmit=(ev)=>{\r\n        ev.preventDefault()\r\n        this.props.handleForm(this.state,'signup',this.props.tripToRed)\r\n        this.props.closeModal()\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form onSubmit={this.onSubmit} className=\"flex column align-center\">\r\n                <input\r\n                    type='text'\r\n                    name='username'\r\n                    value={this.state.username}\r\n                    placeholder='Username'\r\n                    onChange={this.handleChange}\r\n                    className='styled-input'\r\n                />\r\n                <input\r\n                    type='email'\r\n                    name='email'\r\n                    value={this.state.email}\r\n                    placeholder='email'\r\n                    onChange={this.handleChange}\r\n                    className='styled-input'\r\n                />\r\n                <input\r\n                    type='password'\r\n                    name='password'\r\n                    value={this.state.password}\r\n                    placeholder='password'\r\n                    onChange={this.handleChange}\r\n                    className='styled-input'\r\n                />\r\n                <button className=\"styled-button\">Sign Up</button>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Login } from './Login';\r\nimport { Signup } from './Signup';\r\nimport { signup, login } from '../store/actions/userActions'\r\nimport { closeModal, showModal } from '../store/actions/modalActions'\r\nimport { loadTrip, addTrip } from '../store/actions/tripActions'\r\nimport { socketService } from '../services/socketService'\r\n\r\nclass _LoginSignupPage extends Component {\r\n    state = {\r\n        login: true\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.page !== this.state.login) {\r\n            this.setState({ login: this.props.page })\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.props.page !== this.state.login) {\r\n            this.setState({ login: this.props.page })\r\n        }\r\n    }\r\n    handleForm = async (props, action, tripIdToRed) => {\r\n        if (action === 'signup') {\r\n            if (tripIdToRed) {\r\n                const [tripToRed, user] = await Promise.all([this.props.loadTrip(tripIdToRed), this.props.signup(props)])\r\n                tripToRed.members.push({ username: user.username, imgUrl: user.imgUrl, id: user._id })\r\n                await this.props.addTrip(tripToRed)\r\n                socketService.emit('tripToUpdate', tripToRed._id);\r\n\r\n                this.props.closeModal()\r\n                return user\r\n            }\r\n            return await this.props.signup(props)\r\n        } else {\r\n            var user = await this.props.login(props)\r\n            if (!user) return\r\n            return user\r\n        }\r\n    }\r\n    closeModal=()=> {\r\n        this.props.closeModal()\r\n    }\r\n    render() {\r\n        const tripToRed = this.props.tripId\r\n        return (\r\n            this.state.login ? <Login handleForm={this.handleForm} handleClick={this.props.handleClick}\r\n                closeModal={this.closeModal} /> :\r\n                <Signup handleForm={this.handleForm} handleClick={this.props.handleClick}\r\n                    closeModal={this.closeModal} tripId={this.props.tripId} tripToRed={tripToRed} />\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    signup,\r\n    login,\r\n    closeModal,\r\n    showModal,\r\n    loadTrip,\r\n    addTrip\r\n\r\n}\r\n\r\nexport const LoginSignupPage = connect(mapStateToProps, mapDispatchToProps)(_LoginSignupPage);\r\n","function on(eventName, listener) {\r\n    const callListener = ({ detail }) => {\r\n        listener(detail)\r\n    }\r\n    window.addEventListener(eventName, callListener)\r\n    return () => {\r\n        window.removeEventListener(eventName, callListener)\r\n    }\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n    window.dispatchEvent(new CustomEvent(eventName, { detail: data }));\r\n}\r\n\r\n\r\nexport const eventBus = { on, emit }","export const ItemTypes = {\r\n    ACTIVITIE: 'activitie',\r\n    DESTINATION:'destination'\r\n}","\r\nimport React from 'react'\r\nimport { useDrag } from 'react-dnd'\r\nimport { utils } from '../../services/utils'\r\nimport { ItemTypes } from '../../services/dndItems.js'\r\n\r\nexport function ActivitiePreview({ act, onRemoveAct, onEdit, destinations, onOpenDetails }) {\r\n\r\n    const [{ isDragging }, drag] = useDrag({\r\n        item: {\r\n            type: ItemTypes.ACTIVITIE,\r\n            id: act.id\r\n        },\r\n        collect: monitor => ({\r\n            isDragging: !!monitor.isDragging()\r\n        })\r\n    })\r\n\r\n    \r\n\r\n    // const startTime = utils.getTimeDayStr(act.at)\r\n    // const endTime = utils.getTimeDayStr(act.at + (+act.duration / 2) * 60 * 60 * 1000)\r\n    const isFirstCol = (act.col === 0) ? 'first-col' : ''\r\n    const isDayHeadClass = (act.literalDay) ? 'literal-day' : ''\r\n    const isDrag = (isDragging) ? 'is-drag' : ''\r\n    const isLenOne = (act.duration === 1) ? 'len-one' : ''\r\n    const dest= destinations.findIndex(dest => act.destination === dest.name)\r\n\r\n    return (\r\n        <div ref={drag} className={`activity-prev-assembly activity-assembly ${isLenOne} ${isDayHeadClass} ${isFirstCol} ${isDrag}`} style={{ gridRow: `${act.row + 1 || 'auto'}/span ${act.duration}` }} key={utils.makeId()}>\r\n            <div className={'dest-color dest-'+dest}></div>\r\n            <div className=\"activity-name-container\">\r\n            <h5>{act.name}</h5>\r\n            </div>\r\n            <div className=\"activity-assembly-details column\">\r\n                {/* <p>{act.at && `${startTime}-${endTime}`}</p> */}\r\n                {/* <p>{act.destination}</p> */}\r\n                {/* {act.price.amount ? <p>{act.price.currency}{act.price.amount}</p> : ''} */}\r\n                <div className=\"activity-assembly-controls flex\">\r\n                    {/* <button onClick={() => { onEdit(act) }} className=\"edit-activity \"><i className=\"fas fa-edit\"></i></button> */}\r\n                    <button onClick={() => { onOpenDetails(act) }}><i className=\"fas fa-info\"></i></button>\r\n                    <button onClick={() => { onRemoveAct(act.id) }} className=\"delete-activity \"><i className=\"fas fa-trash\"></i></button>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    )\r\n}\r\n","\r\nimport React from 'react'\r\nimport { useDrop } from 'react-dnd'\r\nimport { utils } from '../../services/utils'\r\nimport { ItemTypes } from '../../services/dndItems'\r\nexport function OpenDaySlot({ act, getRowIdx, onDragMove }) {\r\n\r\n    const [{ isOver }, drop] = useDrop({\r\n        accept: ItemTypes.ACTIVITIE,\r\n        drop: (item, monitor) => {\r\n            onDragMove(act, item.id)\r\n        },\r\n\r\n        collect: monitor => ({\r\n            isOver: !!monitor.isOver()\r\n        })\r\n    })\r\n\r\n    const rowIdx = null\r\n    const isFirstCol = (act.col === 0) ? 'first-col' : ''\r\n    const isDayHeadClass = (act.literalDay) ? 'literal-day' : ''\r\n    const _isOver = (isOver) ? 'is-over' : ''\r\n    // if (isOver) {\r\n    //     console.log(act);\r\n    // }\r\n   \r\n    return (\r\n        <React.Fragment>\r\n            {act.literalDay && <div  className={`activity-prev-assembly empty-assembly ${isFirstCol} ${isDayHeadClass}  ${_isOver}`} style={{ gridRow: `${rowIdx || 'auto'}/span 1` }} key={utils.makeId()}>\r\n                {act.date}\r\n            </div>}\r\n            {!act.literalDay && <div ref={drop} className={`activity-prev-assembly empty-assembly ${isFirstCol} ${isDayHeadClass}  ${_isOver}`} style={{ gridRow: `${rowIdx || 'auto'}/span 1` }} key={utils.makeId()}>\r\n                {act.date}\r\n            </div>}\r\n        </React.Fragment>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport { ActivitiePreview } from './ActivitiePreview'\r\nimport { OpenDaySlot } from './OpenDaySlot'\r\n\r\nexport function DayActivities({ day, getRowIdx, onRemoveAct, onEdit, destinations, onDragMove, onOpenDetails }) {\r\n\r\n    function reCalcPos(day) {\r\n        let newDay = []\r\n        let i = 0;\r\n        while (i < 35) {\r\n            if (!day[i].id) {\r\n                newDay.push(day[i])\r\n                i++\r\n\r\n            } else {\r\n                newDay.push(day[i])\r\n                i += day[i].duration\r\n            }\r\n        }\r\n        return newDay\r\n    }\r\n    let newDay = reCalcPos(day)\r\n\r\n   \r\n    return (\r\n        <div className=\"day-list-assembly\">\r\n            {newDay.map((act) => {\r\n                if (act.id) {\r\n                    return <ActivitiePreview\r\n                        destinations={destinations} onEdit={onEdit} onRemoveAct={onRemoveAct}\r\n                        getRowIdx={getRowIdx} key={utils.makeId()} act={act} onOpenDetails={onOpenDetails} />\r\n\r\n                } else {\r\n                    return <OpenDaySlot\r\n                        destinations={destinations} onEdit={onEdit} onRemoveAct={onRemoveAct}\r\n                        getRowIdx={getRowIdx} key={utils.makeId()} act={act} onDragMove={onDragMove} />\r\n                }\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\n\r\nexport function DayTimeLine() {\r\n\r\n\r\n    return (\r\n        <div className=\"time-line-assembly\">\r\n\r\n            {(function () {\r\n                let times = []\r\n                for (let i = 0; i < 35; i++) {\r\n                    let time = <div key={utils.makeId()} className=\"time-assembly\">\r\n                        {(i % 2 === 0) && <span>{`${7 + i / 2}:00`}</span>}\r\n                    </div>\r\n                    times.push(time)\r\n                }\r\n                return times\r\n\r\n            })()}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\n// var gFreeDays = 14\r\nexport function DestNamePrev({ dest, updateFreeDays, freeDays, destinations }) {\r\n    \r\n    const idx = destinations.findIndex(_dest => _dest.name === dest.name)\r\n    const display = (dest.duration) ? '' : 'none'\r\n    return (\r\n\r\n        <div className={`dest-name-preview dest-head-${idx} `} style={{ gridColumn: `span ${dest.duration}`, display: display }}>\r\n            {dest.name}\r\n        </div>\r\n    )\r\n}\r\n","import { utils } from '../../services/utils'\r\nimport { DestNamePrev } from './DestNamePrev'\r\nimport React from 'react'\r\n\r\n\r\nexport function DestinationsHeader({ destinations, allDestinations, daysCount }) {\r\n    destinations.sort((dest1, dest2) => dest1.time.startDate - dest2.time.startDate)\r\n    return (\r\n        <div className=\"destinations-header\" style={{gridTemplateColumns: `repeat(${daysCount*2}, minmax(25px, 1fr))`}}>\r\n            {destinations.map((dest, idx) => {\r\n                return <DestNamePrev destinations={allDestinations} idx={idx}  key={utils.makeId()} dest={dest} />\r\n            })}\r\n        </div>\r\n    )\r\n\r\n}\r\n","import React, { Component } from 'react'\r\nimport { eventBus } from '../../services/eventBusService';\r\nimport { utils } from '../../services/utils';\r\nimport { ErrorMsg } from '../MainCmps/ErrorMsg';\r\nimport { DayActivities } from './DayActivities'\r\nimport { DayTimeLine } from './DayTimeLine';\r\nimport { DestinationsHeader } from './DestinationsHeader';\r\n\r\nexport class TripAssembly extends Component {\r\n\r\n    state = {\r\n        activities: null,\r\n        weekMat: null,\r\n        page: 0,\r\n        startDate: null,\r\n        endDate: null,\r\n        tripLength: '',\r\n        actsToDisplay: null,\r\n        minDestinations: null,\r\n        daysCount: 7\r\n    }\r\n    removeBus;\r\n    async componentDidMount() {\r\n\r\n        const _removeBus = eventBus.on('markDay', (day) => {\r\n            this.setChosenDay(day)\r\n            return\r\n        })\r\n        this.removeBus = _removeBus\r\n\r\n        this.initiateAssembly()\r\n        \r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.trip === this.props.trip) return\r\n        this.initiateAssembly(this.state.daysCount, this.state.page)\r\n    }\r\n\r\n    setChosenDay = async (day) => {\r\n        const linearDaysDates = this.getLinearTripDays().map(timeStamp => {\r\n            const date = new Date(timeStamp)\r\n            return date.toLocaleDateString()\r\n        })\r\n        const currDayDate = day.day.toLocaleDateString()\r\n        const page = linearDaysDates.findIndex(date => {\r\n            return date === currDayDate\r\n        })\r\n        this.props.openSideBar()\r\n        this.initiateAssembly(1, page)\r\n\r\n    }\r\n\r\n    initiateAssembly = async (daysCount = 7, page = 0) => {\r\n        const { destinations, activities } = this.props.trip\r\n        const windowWidth = window.window.innerWidth\r\n        if (daysCount === 7) {\r\n            if (windowWidth <= 900) {\r\n                daysCount = 5\r\n            }\r\n            if (windowWidth <= 650) {\r\n                daysCount = 3\r\n            }\r\n            if (windowWidth <= 530) {\r\n                daysCount = 2\r\n            }\r\n        }\r\n\r\n        let startDate, endDate\r\n        [startDate, endDate] = [destinations[0].startDate, destinations[destinations.length - 1].endDate]\r\n        const tripLength = utils.calculateDays(startDate, endDate)\r\n        await this.setState({ ...this.state, tripLength, startDate, endDate, activities, daysCount, page, daysCount }, () => this.loadWeekMat())\r\n\r\n        await this.setState({ minDestinations: this.getMinDestinations() })\r\n    }\r\n\r\n\r\n    omponentWillUnmount() {\r\n        this.removeBus()\r\n    }\r\n\r\n\r\n    loadWeekMat = () => {\r\n        const { activities } = this.props.trip;\r\n        const actsDaysMap = this.mapActsToDays(activities);\r\n        const WeeklyActsToDisplay = actsDaysMap.slice(this.state.page * this.state.daysCount, this.state.page * this.state.daysCount + this.state.daysCount)\r\n        const destTimeStamp = WeeklyActsToDisplay[0][1][0].at\r\n        const startDate = utils.getDateDay(destTimeStamp)\r\n        let weekMat = utils.createMat(this.state.daysCount, 35);\r\n        let col = 0\r\n\r\n        let prevDate = WeeklyActsToDisplay[0][0]\r\n        for (let i = 0; i < WeeklyActsToDisplay.length; i++) {\r\n            let currDate, currDayActs\r\n            [currDate, currDayActs] = [WeeklyActsToDisplay[i][0], WeeklyActsToDisplay[i][1]];\r\n            if (prevDate > currDate) {\r\n                currDate += this.getDaysInMonth(destTimeStamp)\r\n            }\r\n            prevDate = currDate\r\n            col = currDate - startDate\r\n            currDayActs.forEach(act => {\r\n                if (!act.freeDay) {\r\n                    let row = this.getRowIdx(act.at)\r\n                    act = { ...act, col, row }\r\n                    weekMat[row][col] = act\r\n                }\r\n            })\r\n        }\r\n        weekMat = this.showDaysName(destTimeStamp, weekMat)\r\n        this.setState({ weekMat, actsToDisplay: WeeklyActsToDisplay })\r\n    }\r\n\r\n    onRemoveAct = (actId) => {\r\n        this.props.showModal('removeActivity', { removeAct: this.removeAct, actId, })\r\n    }\r\n\r\n    removeAct = async (actId) => {\r\n        let { activities } = this.state;\r\n        activities = await activities.filter((_act => _act.id !== actId))\r\n        await this.props.updateTripAct(activities)\r\n        await this.setState({ activities })\r\n        await this.props.closeModal()\r\n    }\r\n\r\n    showDaysName(startTime, mat) {\r\n        for (let j = 0; j < this.state.daysCount; j++) {\r\n            const _time = startTime + j * 24 * 60 ** 2 * 1000\r\n            const time = new Date(_time)\r\n            mat[0][j] = { duration: 1, literalDay: utils.getWeekDay(_time), date: time.toLocaleDateString(), time }\r\n        }\r\n        return mat\r\n    }\r\n\r\n\r\n\r\n\r\n    isOccTimeSlot = (activity) => {\r\n        const { activities } = this.state\r\n        const currStartTime = activity.at\r\n\r\n        const currEndTime = currStartTime + activity.duration * 30 * 60 * 1000\r\n        for (let i = 0; i < activities.length; i++) {\r\n            const act = activities[i]\r\n            const checkedStartTime = act.at\r\n            const checkedEndTime = act.at + act.duration * 30 * 60 * 1000\r\n            if (activity.id && activity.id === act.id) continue\r\n\r\n            if (\r\n                (((currStartTime > checkedStartTime) && (currStartTime < checkedEndTime)) ||\r\n                    ((currEndTime > checkedStartTime) && (currEndTime < checkedEndTime))) ||\r\n\r\n                ((checkedStartTime > currStartTime) && (checkedStartTime < currEndTime)) ||\r\n                ((checkedEndTime > currStartTime) && (checkedEndTime < currEndTime))\r\n\r\n            ) {\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n\r\n    mapActsToDays = () => {\r\n        const { activities, destinations } = this.props.trip;\r\n        activities.sort((act1, act2) => act1.at - act2.at)\r\n        let map = activities.reduce((acc, activity) => {\r\n\r\n            let day = utils.getDateDay(activity.at)\r\n            if (!acc[day]) acc[day] = []\r\n            acc[day].push(activity)\r\n            return acc\r\n\r\n        }, {})\r\n        map = this.sortDateMap(map)\r\n        return map\r\n    }\r\n\r\n\r\n\r\n    getCol = (mat, col) => {\r\n        const MatColumn = (_mat, n) => _mat.map(x => x[n]);\r\n        return MatColumn(mat, col);\r\n    }\r\n\r\n    sortDateMap(map) {\r\n        let arrSorted = [];\r\n        for (let day in map) {\r\n\r\n            arrSorted.push([+day, map[day]]);\r\n        }\r\n        const linearDays = this.getLinearTripDays();\r\n        for (let i = 0; i < linearDays.length; i++) {\r\n            let currDay = utils.getDateDay(linearDays[i])\r\n            let isInclude = arrSorted.find((day) => day[0] === currDay)\r\n            if (!isInclude) {\r\n                arrSorted.push([currDay, [{ at: linearDays[i], freeDay: true }]])\r\n            }\r\n\r\n        }\r\n        arrSorted.sort(function (day1, day2) {\r\n            return day1[1][0].at - day2[1][0].at;\r\n        });\r\n\r\n        return arrSorted\r\n\r\n    }\r\n    onEdit = (act) => {\r\n        this.props.showModal('editActivity', { saveAct: this.saveAct, act, isOccTimeSlot: this.isOccTimeSlot, destinations: this.props.trip.destinations })\r\n    }\r\n\r\n    onOpenDetails = (act) => {\r\n        this.props.showModal('activityDetails', { saveAct: this.saveAct, act, isOccTimeSlot: this.isOccTimeSlot, destinations: this.props.trip.destinations })\r\n\r\n    }\r\n\r\n    onDragMove = ({ pos }, id) => {\r\n\r\n        const activity = this.state.activities.find(act => act.id === id)\r\n        const dest = this.props.trip.destinations.find(_dest => _dest.name === activity.destination)\r\n\r\n        let newTime = this.getTimeFromIdx(pos)\r\n    \r\n        let destStart = utils.setToHourMinuets(dest.startDate, 6, 0)\r\n        let desEnd = utils.setToHourMinuets(dest.endDate, 23, 59)\r\n        if (newTime < destStart || newTime > desEnd) {\r\n            this.props.showMsg({ type: 'invalid-move', msg: 'Cannot move activities to another destination!' })\r\n            return\r\n        }\r\n        if (!newTime) return\r\n        const actCopy = { ...activity, at: newTime }\r\n\r\n        if (this.isOccTimeSlot(actCopy)) {\r\n            this.props.showMsg({ type: 'invalid-move', msg: 'You aleardy have plans for that date! please choose a different one.' })\r\n            return\r\n        }\r\n\r\n        activity.at = newTime\r\n        this.saveAct(activity)\r\n    }\r\n\r\n    getTimeFromIdx = ({ i, j }) => {\r\n        const { page } = this.state\r\n        const currWeekDates = this.getLinearTripDays()\r\n        if (j + page * this.state.daysCount >= currWeekDates.length) {\r\n\r\n            return false\r\n        }\r\n\r\n        const currDayDate = new Date(currWeekDates[j + page * this.state.daysCount])\r\n        if (i % 2 !== 0) {\r\n            currDayDate.setHours(7 + (i - 1) / 2, 0)\r\n        } else {\r\n            currDayDate.setHours(6 + i / 2, 30)\r\n\r\n        }\r\n\r\n        return currDayDate.getTime()\r\n    }\r\n\r\n    saveAct = (act) => {\r\n        let { activities } = this.state;\r\n        if (act.id) {\r\n            activities = activities.map(_act => {\r\n                return (_act.id === act.id) ? act : _act\r\n            })\r\n        } else {\r\n            act.id = utils.makeId()\r\n            activities.push(act)\r\n        }\r\n        this.props.closeModal()\r\n\r\n        this.props.updateTripAct(activities)\r\n        this.setState({ activities })\r\n        this.loadWeekMat()\r\n    }\r\n\r\n\r\n    getDaysInMonth(timeStamp) {\r\n        let time = new Date(timeStamp)\r\n        let year, month;\r\n        [month, year] = [time.getMonth(), time.getFullYear()]\r\n\r\n        return new Date(year, month + 1, 0).getDate();\r\n    }\r\n\r\n\r\n    getWeekDests = () => {\r\n        const { page, daysCount } = this.state\r\n        var { destinations } = this.props.trip\r\n        const linearDays = this.getLinearTripDays()\r\n        let minDay = linearDays[page * (daysCount)]\r\n        let idxMaxDay = page * daysCount\r\n        if (idxMaxDay + daysCount - 1 >= linearDays.length) {\r\n            idxMaxDay = linearDays.length - 1\r\n        } else {\r\n            idxMaxDay += daysCount - 1\r\n        }\r\n        let maxDay = linearDays[idxMaxDay]\r\n        minDay = new Date(minDay)\r\n        maxDay = new Date(maxDay)\r\n        minDay = utils.setToHourMinuets(minDay, 7, 0)\r\n        maxDay = utils.setToHourMinuets(maxDay, 23, 59)\r\n        return destinations.filter(dest => {\r\n            let destStart = new Date(dest.startDate)\r\n            let destEnd = new Date(dest.endDate)\r\n            destStart = utils.setToHourMinuets(destStart, 10, 0)\r\n            destEnd = utils.setToHourMinuets(destEnd, 10, 0)\r\n\r\n            return ((destStart >= minDay && destStart <= maxDay) ||\r\n                (destEnd >= minDay && destEnd <= maxDay)\r\n            )\r\n\r\n        })\r\n    }\r\n\r\n    getMinDestinations = () => {\r\n\r\n        const destinations = this.getWeekDests()\r\n        const minDestinations = []\r\n        const destsHeadLength = this.mapDestsToHeaderLength()\r\n        const destsNames = Object.keys(destsHeadLength)\r\n        const destsLength = Object.values(destsHeadLength)\r\n        for (let i = 0; i < destsNames.length; i++) {\r\n\r\n            const time = destinations.find(dest => {\r\n                return dest.name === destsNames[i]\r\n            })\r\n\r\n            minDestinations.push({ name: destsNames[i], duration: destsLength[i], time })\r\n        }\r\n        return minDestinations\r\n\r\n\r\n    }\r\n\r\n\r\n    mapDestsToHeaderLength = () => {\r\n        const { trip } = this.props\r\n        const { page } = this.state\r\n        const { destinations } = this.props.trip\r\n        const tripStart = trip.destinations[0].startDate\r\n        const tripEnd = trip.destinations[trip.destinations.length - 1].endDate\r\n        const destinationsTimes = trip.destinations.map((destination, idx) => {\r\n            return { start: new Date(destination.startDate), end: new Date(destination.endDate), idx }\r\n        })\r\n        const currWeekDests = utils.calculateDates(tripStart, tripEnd, destinationsTimes).slice(page * this.state.daysCount, page * this.state.daysCount + this.state.daysCount)\r\n        let currDestName;\r\n        let currDest;\r\n        return currWeekDests.reduce((acc, { td }, idx) => {\r\n\r\n            if (td.full || td.full === 0) {\r\n                currDest = destinations[td.full]\r\n                currDestName = currDest.name\r\n                acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 2 : 2\r\n            } else {\r\n                if (((td.start || td.start === 0) && (!td.end && td.end !== 0))) {\r\n                    currDest = destinations[td.start]\r\n                    currDestName = currDest.name\r\n                    acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 2 : 2\r\n                } else {\r\n\r\n                    if (td.start || td.start === 0) {\r\n                        currDest = destinations[td.start]\r\n                        currDestName = currDest.name\r\n\r\n                        acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 1 : 1\r\n\r\n                    }\r\n                    if (td.end || td.end === 0) {\r\n                        currDest = destinations[td.end]\r\n                        currDestName = currDest.name\r\n\r\n                        acc[currDestName] = (acc[currDestName]) ? acc[currDestName] + 1 : 1\r\n\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n\r\n            return acc\r\n        }, {})\r\n\r\n    }\r\n\r\n    getLinearTripDays = () => {\r\n        const linearDays = []\r\n        let { startDate, tripLength } = this.state\r\n        let ttime = new Date(startDate)\r\n        for (let i = 0; i < tripLength; i++) {\r\n            linearDays.push(startDate + i * 24 * 60 * 60 * 1000)\r\n        }\r\n        return linearDays\r\n    }\r\n\r\n    getDestsWithActs = (destinations, allActs) => {\r\n        destinations = destinations.filter((dest) => {\r\n            return this.isActInDests(dest, allActs)\r\n        })\r\n        return destinations\r\n\r\n    }\r\n\r\n    isActInDests(dest, allActs) {\r\n        for (let acts of allActs) {\r\n            let currActs = acts[1]\r\n            for (let act of currActs) {\r\n                if (act.destination === dest.name) return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    getRowIdx = (timeStamp) => {\r\n        const time = new Date(timeStamp)\r\n        const hour = time.getHours()\r\n        const minuets = time.getMinutes()\r\n        let slot;\r\n        if (minuets === 0) {\r\n            slot = (hour - 6) * 2 - 1\r\n\r\n        } else {\r\n            slot = (hour - 6) * 2\r\n        }\r\n\r\n        return slot\r\n    }\r\n\r\n\r\n    onTogglePage = async (direction) => {\r\n        const { tripLength, page } = this.state\r\n        let pageCount = Math.ceil(tripLength / this.state.daysCount)\r\n        let newPage;\r\n        if (direction === 'next') {\r\n            newPage = (page + 1) % pageCount\r\n\r\n        } else {\r\n            newPage = (page - 1 < 0) ? pageCount - 1 : page - 1\r\n        }\r\n        await this.setState({ page: newPage })\r\n        await this.loadWeekMat()\r\n        this.setState({ minDestinations: this.getMinDestinations() })\r\n    }\r\n\r\n    getDayNumOfAct = (day) => {\r\n        return day.reduce((acc, act) => {\r\n            acc += (act.id) ? 1 : 0\r\n            return acc\r\n        }, 0)\r\n    }\r\n\r\n    getTwoDig = (num) => {\r\n        let numStr = num + ''\r\n        return (numStr.length === 1) ? '0' + numStr : numStr\r\n    }\r\n\r\n    renderDayActivities(mat) {\r\n        const actPreviews = []\r\n\r\n        for (let i = 0; i < mat[0].length; i++) {\r\n\r\n            var col = this.getCol(mat, i)\r\n            actPreviews.push(<DayActivities onDragMove={this.onDragMove} getTimeFromIdx={this.getTimeFromIdx} destinations={this.props.trip.destinations} onEdit={this.onEdit} onOpenDetails={this.onOpenDetails} onRemoveAct={this.onRemoveAct} getRowIdx={this.getRowIdx} key={utils.makeId()} day={col} />\r\n            )\r\n        }\r\n\r\n        return actPreviews\r\n    }\r\n    setFullAssembly = () => {\r\n        this.initiateAssembly(7, 0)\r\n    }\r\n\r\n    render() {\r\n        const { weekMat, minDestinations, daysCount } = this.state\r\n        const { destinations } = this.props.trip\r\n        if (!weekMat || !minDestinations) return <div>Loading...</div>\r\n        const dayActs = this.renderDayActivities(weekMat)\r\n        this.mapDestsToHeaderLength()\r\n        return (\r\n            <div className=\"assembly-container\">\r\n\r\n\r\n                {/* <section className=\"paging-assembly\"> */}\r\n                {/* <span>{this.state.page + 1}</span> */}\r\n                {/* </section> */}\r\n                {daysCount !== 1 && <div className=\"destinations-header-wraper\">\r\n                    <div className=\"toggle-page prev\" onClick={() => this.onTogglePage('prev')}><i className=\"fas fa-chevron-circle-left\"></i></div>\r\n\r\n                    <div className=\"toggle-page next\" onClick={() => this.onTogglePage('next')}><i className=\"fas fa-chevron-circle-right\"></i></div>\r\n                </div>}\r\n                {daysCount === 1 && <section className=\"full-assembly \">\r\n                    <button className=\"styled-button\" onClick={this.setFullAssembly}>Back</button>\r\n                </section>}\r\n                <DestinationsHeader daysCount={daysCount} allDestinations={destinations} destinations={minDestinations} />\r\n                <div className={'trip-assembly-main full'} style={{ gridTemplateColumns: `repeat(${daysCount}, minmax(70px, 1fr))` }}>\r\n                    <DayTimeLine />\r\n                    {dayActs}\r\n                </div >\r\n                <button className='editActivity styled-button' onClick={() => this.props.showModal('editActivity', { saveAct: this.saveAct, isOccTimeSlot: this.isOccTimeSlot, act: null, destinations: this.props.trip.destinations })}>add activity</button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import React from 'react'\r\nexport function MembersPreview({ member }) {\r\n    const url=member.imgUrl||'https://res.cloudinary.com/roidinary/image/upload/v1600790523/Untitled-1_xumtnf.jpg'\r\n    return (\r\n        <div className=\"member-preview\" >\r\n            <img className=\"image-preview\" src={url}></img>\r\n            <div className=\"is-active-circle\"></div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport { GooglePlaces } from '../MainCmps/GooglePlaces'\r\nimport {\r\n    geocodeByAddress,\r\n    // geocodeByPlaceId,\r\n    getLatLng,\r\n} from 'react-places-autocomplete';\r\n\r\nexport class AddDestination extends React.Component {\r\n    state = {\r\n        addDestOpen: false,\r\n        destination: {\r\n            name: '',\r\n            days: '',\r\n            location: null\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.setState({\r\n            destination: {\r\n                name: '',\r\n                days: '',\r\n                location: null\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    handleAddress = (name) => {\r\n        this.setState({ destination: { ...this.state.destination, name } })\r\n    }\r\n\r\n    handleSelect = async (value) => {\r\n        try {\r\n            const results = await geocodeByAddress(value);\r\n            const latlng = await getLatLng(results[0])\r\n            this.setState({ destination: { ...this.state.destination, location: latlng, name: value }})\r\n\r\n        }\r\n        catch (err) {\r\n            console.log(err, 'err');\r\n        }\r\n    }\r\n\r\n    handleChange = (ev) => {\r\n        const { name, value } = ev.target;\r\n        this.setState({ destination: { ...this.state.destination, [name]: value } })\r\n\r\n    }\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        this.toggleAddDestination()\r\n        this.props.addDestination(this.state.destination)\r\n        this.setState({\r\n            destination:{\r\n                name: '',\r\n                days: '',\r\n                location: null\r\n            }\r\n        })\r\n\r\n    }\r\n    toggleAddDestination = () => {\r\n        this.setState({ addDestOpen: !this.state.addDestOpen })\r\n    }\r\n\r\n    render() {\r\n        const addDestOpen = this.state.addDestOpen ? 'form-open' : ''\r\n        return (\r\n            <React.Fragment>\r\n                <i className=\"fas fa-plus add-destination-button\" onClick={this.toggleAddDestination}></i>\r\n                <div className={`add-destination column ${addDestOpen}`}>\r\n                    <div className=\"styled-header\">Add destination</div>\r\n                    <form onSubmit={this.onSubmit} className={`add-destination-form  `}>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Enter destination\"\r\n                            // className=\"styled-input\"\r\n                            name=\"name\"\r\n                            value={this.state.destination.name}\r\n                            onChange={this.handleChange}\r\n                        ></input>\r\n                        {/* <GooglePlaces\r\n                            handleSelect={this.handleSelect}\r\n                            handleAddress={this.handleAddress}\r\n                            address={this.state.destination.name}\r\n                            location={this.state.destination.location}\r\n                        /> */}\r\n\r\n\r\n                        <input\r\n                            type=\"number\"\r\n                            placeholder=\"Number of days\"\r\n                            // className=\"styled-input\"\r\n                            name=\"days\"\r\n                            value={this.state.destination.days}\r\n                            onChange={this.handleChange}\r\n                        ></input>\r\n                        <button className=\"styled-button\">Add!</button>\r\n                    </form>\r\n                    <div className=\"add-destination-footer\"></div>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n\r\n\r\n}\r\n","import React from 'react'\r\nimport { utils } from '../../services/utils'\r\n\r\nexport function WeekPreview({ dates,showDay }) {\r\n    function hotDog(date) {\r\n        if (!date.td) return\r\n        const keys = Object.keys(date.td)\r\n        return keys.map(key => {\r\n            const className = `dest-${date.td[key]} ${key}`\r\n            return <div key={utils.makeId()} className={className}></div>\r\n        })\r\n\r\n    }\r\n\r\n    return (\r\n        <tr key={utils.makeId()}>\r\n            {dates.map((date, idx) => <td onClick={()=>showDay(date)} className={`${!date.td?'faded':''}`} key={idx}>{new Date(date.day).getDate()}{hotDog(date)}</td>)}\r\n        </tr>\r\n    )\r\n\r\n}\r\n","import React from 'react'\r\n\r\nimport { utils } from '../../services/utils'\r\nimport { WeekPreview } from './WeekPreview'\r\n\r\n\r\nexport function RouteCalendar({ trip,showDay }) {\r\n\r\n    function generateCalendar() {\r\n        const tripStart = trip.destinations[0].startDate\r\n        const tripEnd = trip.destinations[trip.destinations.length - 1].endDate\r\n        const destinationsTimes = trip.destinations.map((destination,idx) => {\r\n            return { start: new Date(destination.startDate), end: new Date(destination.endDate) , idx }\r\n        })\r\n        const calendarData = calculateDates(tripStart, tripEnd, destinationsTimes)\r\n        const fullCalendarData = getDaysAround(calendarData, tripStart, tripEnd)\r\n        return fullCalendarData\r\n    }\r\n    function getDaysAround(data, start, end) {\r\n        let fullCalendarData = getFirstSunday(start, data)\r\n        fullCalendarData = getLastSaturday(end, data)\r\n        return fullCalendarData\r\n\r\n    }\r\n\r\n    function getFirstSunday(date, calendarData) {\r\n        let currDay = new Date(date)\r\n        while (currDay.getDay() > 0) {\r\n            currDay = new Date(currDay.getTime() - (1000 * 60 * 60 * 24))\r\n            calendarData.unshift({ day: currDay })\r\n        }\r\n        return calendarData\r\n\r\n    }\r\n    function getLastSaturday(date, calendarData) {\r\n        let currDay = new Date(date)\r\n        while (currDay.getDay() < 6) {\r\n            currDay = new Date(currDay.getTime() + (1000 * 60 * 60 * 24))\r\n            calendarData.push({ day:currDay })\r\n        }\r\n        return calendarData\r\n    }\r\n\r\n\r\n\r\n    function renderTable(data) {\r\n        const weekCmps = []\r\n        if (data.length % 7 !== 0) return null\r\n        let weeksCount = data.length / 7;\r\n        while (weeksCount) {\r\n            weekCmps.push(<WeekPreview showDay={showDay} key={utils.makeId()} dates={data.splice(0, 7)}  />)\r\n            weeksCount--\r\n        }\r\n        return weekCmps\r\n\r\n    }\r\n\r\n    function calculateDates(start, end, destinations) {\r\n        let nextDay = new Date(start)\r\n        let dates = [{ day: nextDay, td:{'start':0} }]\r\n        while (nextDay.getDate() !== new Date(end).getDate()) {\r\n            nextDay = new Date(nextDay.getTime() + (1000 * 60 * 60 * 24))\r\n            dates.push({ day: nextDay, td:''})\r\n            destinations.forEach(dest=>{\r\n                if(dest.start.getDate()===nextDay.getDate()&& dest.start.getMonth()===nextDay.getMonth()){\r\n                    dates[dates.length-1].td={...dates[dates.length-1].td,'start':dest.idx}\r\n                }else if(dest.start<nextDay && nextDay.setHours(12)<dest.end.setHours(11) ){\r\n                    dates[dates.length-1].td={...dates[dates.length-1].td,'full':dest.idx}\r\n                }else if(dest.end.getDate()===nextDay.getDate()&& dest.end.getMonth()===nextDay.getMonth()){\r\n                    dates[dates.length-1].td={...dates[dates.length-1].td,'end':dest.idx}\r\n                }\r\n            })\r\n        }\r\n        return dates\r\n    }\r\n\r\n\r\n    const calendarData = generateCalendar()\r\n    return (\r\n        <table className=\"route-calendar\">\r\n            <thead className=\"table-header\">\r\n                <tr >\r\n                    <th>\r\n                        S\r\n                    </th>\r\n                    <th>\r\n                        M\r\n                    </th>\r\n                    <th>\r\n                        T\r\n                    </th>\r\n                    <th>\r\n                        W\r\n                    </th>\r\n                    <th>\r\n                        T\r\n                    </th>\r\n                    <th>\r\n                        F\r\n                    </th>\r\n                    <th>\r\n                        S\r\n                    </th>\r\n                </tr>\r\n\r\n            </thead>\r\n            <tbody>\r\n                {renderTable(calendarData) || 'w'}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { useDrag } from 'react-dnd'\r\n\r\nimport { useDrop } from 'react-dnd'\r\n\r\nimport { ItemTypes } from '../../services/dndItems.js'\r\nimport { utils } from '../../services/utils'\r\n\r\nexport function RouteTimeLinePreview({ destination, idx, isLast, updateDestinations}) {\r\n    const [{ isDragging }, drag] = useDrag({\r\n        item: {\r\n            type: ItemTypes.DESTINATION,\r\n            id: idx\r\n        },\r\n        collect: monitor => ({\r\n            isDragging: !!monitor.isDragging()\r\n        })\r\n    })\r\n    const [{ isOver }, drop] = useDrop({\r\n        accept: ItemTypes.DESTINATION,\r\n        drop: (item, monitor) => {\r\n            if(item.id===idx)return\r\n            updateDestinations(item.id, idx)\r\n        },\r\n        collect: monitor => ({\r\n            isOver: !!monitor.isOver()\r\n        })\r\n    })\r\n    if(isDragging===true){\r\n    }\r\n\r\n    const _isOver = (isOver)?'is-dragging':''\r\n    const letFire = isDragging? 'on':'';\r\n    return (\r\n        <React.Fragment>\r\n            { <div className={`fire-ring ${letFire}`}></div>}\r\n            <div ref={drop} className=\"time-line-area flex align-center\">\r\n                <div className=\"route-time-line-context flex align-center \">\r\n                    <div ref={drag} className={`index-ball dest-${idx} flex align-center justify-center  ${_isOver} `} ><p>{idx + 1}</p></div>\r\n                    <div className=\"time-line-text\">\r\n                        <p>{destination.name}</p>\r\n                        <p>{utils.calculateDays(destination.startDate, destination.endDate) - 1} Nights</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            { !isLast && <div className=\"line\"></div>}\r\n        </React.Fragment>\r\n    )\r\n}","import React from 'react'\r\n\r\nimport { utils } from '../../services/utils'\r\nimport { RouteTimeLinePreview } from './RouteTimeLinePreview'\r\n\r\nexport function RouteTimeLine({ trip, updateDestinations }) {\r\n    // export class RouteTimeLine extends React.Component {\r\n  \r\n    return (\r\n        <div  className=\"route-time-line\">\r\n            {trip.destinations.map((destination, idx) => {\r\n                return (\r\n                    <RouteTimeLinePreview\r\n                        key={utils.makeId()}\r\n                        destination={destination}\r\n                        idx={idx}\r\n                        isLast={(idx + 1) === trip.destinations.length ? true : false}\r\n                        updateDestinations={updateDestinations}\r\n                    />)\r\n            })}\r\n        </div>\r\n    )\r\n\r\n}\r\n","// import { GoogleApiWrapper } from 'google-maps-react';\r\nimport React from 'react'\r\nimport { useDrop } from 'react-dnd'\r\n\r\nimport { ItemTypes } from '../../services/dndItems.js'\r\nimport { MembersPreview } from '../TripApp/MemberPreview';\r\nimport { AddDestination } from './AddDestiantion';\r\nimport { RouteCalendar } from './RouteCalendar'\r\nimport { RouteTimeLine } from './RouteTimeLine'\r\n\r\nexport function TripRoute({ trip, updateDestinations, showModal, addDestination, toggleChat,  showDay ,setDestsMarkers}) {\r\n    const [{isOn}, drop] = useDrop({\r\n        accept: ItemTypes.DESTINATION,\r\n        drop: (item, monitor) => {\r\n            updateDestinations(item.id, -1)\r\n        },\r\n        collect: monitor => ({\r\n            isOver: !!monitor.isOver()\r\n        })\r\n    })\r\n    return (\r\n        <div className=\"trip-route flex column\">\r\n            <div className=\"members-preview flex justify-between align-center\">\r\n                {trip.members.map((member, idx) => <MembersPreview key={idx} member={member} />)}\r\n                <button className=\"ustyled-button add-user-btn\" onClick={() => showModal('add-member', trip._id)}><i className=\"fas fa-user-plus \"></i></button>\r\n            </div>\r\n            <RouteCalendar trip={trip} showDay={showDay} />\r\n            <div className=\"all-destinations-area\">\r\n                <div className=\"trip-bar-icons trip-bar-destinations-icons flex justify-between\">\r\n                    <AddDestination addDestination={addDestination} />\r\n                    <i ref={drop} className={`fas fa-trash `}></i>\r\n                    <i className=\"fas fa-map-marked-alt\" onClick={setDestsMarkers}></i>\r\n\r\n                </div>\r\n                <RouteTimeLine trip={trip} updateDestinations={updateDestinations}  />\r\n            </div>\r\n            <div className=\"trip-bar-icons flex justify-between flex1 align-end\">\r\n                <img onClick={()=>showModal('trip-reviews')} className=\"reviews-btn\" src=\"https://res.cloudinary.com/idanrozen/image/upload/v1601286406/6719970451595452853_wdwgqc.svg\" alt=\"\"/>\r\n                <i className=\"fas fa-comments\" onClick={toggleChat} ></i>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n\r\n\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { socketService } from '../../services/socketService';\r\n\r\nclass _Chat extends Component {\r\n    state = {\r\n        msg: {\r\n            from: this.props.loggedInUser ? this.props.loggedInUser.username : 'Traveler',\r\n            txt: ''\r\n        },\r\n        msgs: [],\r\n        isTyping: ''\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        socketService.on('chat addMsg', this.addMsg);\r\n        socketService.on('isTyping', this.userTyping);\r\n        socketService.on('notTyping', this.userTyping);\r\n\r\n        // socketService.emit('chat history');\r\n        // socketService.on('load history', this.loadHistory)\r\n    }\r\n    componentWillUnmount() {\r\n        socketService.off('chat addMsg', this.addMsg);\r\n        socketService.off('isTyping', this.userTyping);\r\n        socketService.off('notTyping', this.userTyping);\r\n\r\n\r\n        // socketService.off('chat history', this.loadHistory)\r\n        socketService.terminate();\r\n    }\r\n    loadHistory = history => {\r\n        this.setState({ msgs: history || [] });\r\n    }\r\n    addMsg = newMsg => {\r\n        this.setState(prevState => ({ msgs: [...prevState.msgs, newMsg] }));\r\n    }\r\n    sendMsg = ev => {\r\n        ev.preventDefault();\r\n        socketService.emit('chat newMsg', this.state.msg);\r\n        socketService.emit(\"stopTyping\", \"\");\r\n        // this.addMsg(this.state.msg)//remove\r\n        const user = this.props.loggedInUser ? this.props.loggedInUser.username : 'Traveler'\r\n        this.setState({ msg: { from: user, txt: '' } });\r\n    }\r\n    userTyping = isTyping => {\r\n        this.setState({ isTyping });\r\n    }\r\n\r\n    msgHandleChange = ev => {\r\n        const { name, value } = ev.target;\r\n        if ((value.trim()).length > 0) {\r\n            const user = this.props.loggedInUser ? this.props.loggedInUser.username : 'Traveler'\r\n            socketService.emit('user typing', user);\r\n\r\n        }\r\n        else {\r\n            socketService.emit(\"stopTyping\", \"\");\r\n        }\r\n        this.setState(prevState => {\r\n            return {\r\n                msg: {\r\n                    ...prevState.msg,\r\n                    [name]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n    render() {\r\n        \r\n        \r\n        return (\r\n            <div className={`chat-container flex column  ${this.props.chatOpen ? 'open' : ''}`}>\r\n                <div className=\"chat-header styled-header\">\r\n                    {this.props.trip.destinations[0].name} Chat\r\n                </div>\r\n\r\n                <ul className=\"chat-history\">\r\n                    {this.state.msgs.map((msg, idx) => (\r\n                        <li key={idx}>\r\n                            <div className=\"message-data\">{this.props.loggedInUser ? ((this.props.loggedInUser.username === msg.from) ? 'Me' : msg.from) : ((msg.from === 'Traveler') ? 'Traveler' : msg.from)}</div>\r\n\r\n\r\n\r\n                            <div className=\"message\">{msg.txt}</div>\r\n\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n\r\n                {this.props.loggedInUser ? \r\n                ((this.state.isTyping && this.state.isTyping !== this.props.loggedInUser.username) ? <p>{this.state.isTyping} is Typing</p> : '') \r\n                : ((this.state.isTyping && !this.state.msg.txt.trim().length) ? <p>{this.state.isTyping} is Typing</p> : '')}\r\n\r\n\r\n                <form className=\"chat-send flex align-center\" onSubmit={this.sendMsg}>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={this.state.msg.txt}\r\n                        onChange={this.msgHandleChange}\r\n                        name=\"txt\"\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"New message\"\r\n\r\n                    />\r\n                    <button><i className=\"far fa-paper-plane\"></i></button>\r\n                </form>\r\n\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userReducer.loggedInUser\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nexport const Chat = connect(mapStateToProps, mapDispatchToProps)(_Chat);","import React from 'react'\r\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\r\nimport { utils } from '../../services/utils';\r\n\r\n\r\nconst API_KEY = 'AIzaSyBXIyfwpDtmz9fLAQI-MUqWuhQtc-GQYoo';\r\n\r\nclass _MapContainer extends React.Component {\r\n    state = {\r\n        bounds: '',\r\n        markers: [],\r\n        selectedPlace: '',\r\n        activeMarker: {},\r\n        showingInfoWindow: false\r\n    }\r\n\r\n    initiateMarkerABounds() {\r\n        const markers = [];\r\n        const bounds = new this.props.google.maps.LatLngBounds();\r\n        for (var i = 0; i < this.props.markers.length; i++) {\r\n            if (!this.props.markers[i].location || !this.props.markers[i].location.lng) continue\r\n            bounds.extend(new this.props.google.maps.LatLng(this.props.markers[i].location));\r\n            markers.push(this.props.markers[i])\r\n        }\r\n        return { markers, bounds }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { markers, bounds } = this.initiateMarkerABounds()\r\n        const BASE_IMG_URL = 'https://res.cloudinary.com/roidinary/image/upload/c_scale,w_40/v1601311538/'\r\n        const imgs = [\r\n            `${BASE_IMG_URL}location1_xebwou.png`,\r\n            `${BASE_IMG_URL}location2_lxtqsq.png`,\r\n            `${BASE_IMG_URL}location3_zly9ql.png`,\r\n            `${BASE_IMG_URL}location4_venppr.png`,\r\n            `${BASE_IMG_URL}location5_xervod.png`,\r\n            `${BASE_IMG_URL}location6_fql1xk.png`\r\n        ]\r\n        this.setState({ bounds, markers, imgs })\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.markers !== prevProps.markers) {\r\n            const { markers, bounds } = this.initiateMarkerABounds()\r\n            if (markers.length > 1 && this.state.map) {\r\n                this.state.map.fitBounds(bounds)\r\n            }\r\n            else {\r\n                if (this.state.map && markers[0] && markers[0].location && markers[0].location.lat) {\r\n                    this.state.map.panTo(this.props.markers[0].location)\r\n                    this.state.map.setZoom(10)\r\n\r\n                }\r\n            }\r\n            this.setState({ markers })\r\n        }\r\n    }\r\n    onMarkerClick = (props, marker, e) =>\r\n        this.setState({\r\n            selectedPlace: props,\r\n            activeMarker: marker,\r\n            showingInfoWindow: true\r\n        });\r\n    onMapClicked = (props) => {\r\n        if (this.state.showingInfoWindow) {\r\n            this.setState({\r\n                showingInfoWindow: false,\r\n                activeMarker: null\r\n            })\r\n        }\r\n    };\r\n\r\n    getMarkers() {\r\n        return this.state.markers.map((marker, idx) => {\r\n            return (<Marker key={utils.makeId()}\r\n                onClick={this.onMarkerClick}\r\n                title={marker.name}\r\n                name={marker.at || ''}\r\n                position={marker.location}\r\n                icon={this.state.imgs[idx]}\r\n            >\r\n\r\n            </Marker>)\r\n        })\r\n    }\r\n\r\n    containerStyle = {\r\n        width: '100%',\r\n        height: '300px',\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Map\r\n                google={this.props.google}\r\n                containerStyle={this.containerStyle}\r\n                zoom={10}\r\n                onClick={this.onMapClicked}\r\n                onReady={(mapProps, map) => {\r\n                    if (this.state.markers.length > 1) map.fitBounds(this.state.bounds)\r\n\r\n                    else {\r\n                        if (this.state.markers[0]) map.panTo(this.state.markers[0].location)\r\n                    }\r\n                    this.setState({ map })\r\n                }}\r\n                styles={\r\n\r\n                    [{\r\n                        featureType: \"all\",\r\n                        elementType: \"labels.text.fill\",\r\n                        stylers: [\r\n                            {\r\n                                saturation: 36\r\n                            },\r\n                            {\r\n                                color: \"#333333\"\r\n                            },\r\n                            {\r\n                                lightness: 40\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"all\",\r\n                        elementType: \"labels.text.stroke\",\r\n                        stylers: [\r\n                            {\r\n                                visibility: \"on\"\r\n                            },\r\n                            {\r\n                                color: \"#ffffff\"\r\n                            },\r\n                            {\r\n                                lightness: 16\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"all\",\r\n                        elementType: \"labels.icon\",\r\n                        stylers: [\r\n                            {\r\n                                visibility: \"off\"\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"administrative\",\r\n                        elementType: \"geometry.fill\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#fefefe\"\r\n                            },\r\n                            {\r\n                                lightness: 20\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"administrative\",\r\n                        elementType: \"geometry.stroke\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#fefefe\"\r\n                            },\r\n                            {\r\n                                lightness: 17\r\n                            },\r\n                            {\r\n                                weight: 1.2\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"landscape\",\r\n                        elementType: \"geometry\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#f5f5f5\"\r\n                            },\r\n                            {\r\n                                lightness: 20\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"landscape\",\r\n                        elementType: \"geometry.fill\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#d5d5d5\"\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"landscape.man_made\",\r\n                        elementType: \"geometry.fill\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#7574c0\"\r\n                            },\r\n                            {\r\n                                saturation: \"-37\"\r\n                            },\r\n                            {\r\n                                lightness: \"75\"\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"poi\",\r\n                        elementType: \"geometry\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#f5f5f5\"\r\n                            },\r\n                            {\r\n                                lightness: 21\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"poi.business\",\r\n                        elementType: \"geometry.fill\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#7574c0\"\r\n                            },\r\n                            {\r\n                                saturation: \"-2\"\r\n                            },\r\n                            {\r\n                                lightness: \"53\"\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"poi.park\",\r\n                        elementType: \"geometry\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#dedede\"\r\n                            },\r\n                            {\r\n                                lightness: 21\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"poi.park\",\r\n                        elementType: \"geometry.fill\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#7574c0\"\r\n                            },\r\n                            {\r\n                                lightness: \"69\"\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"road.highway\",\r\n                        elementType: \"geometry.fill\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#7574c0\"\r\n                            },\r\n                            {\r\n                                lightness: \"25\"\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"road.highway\",\r\n                        elementType: \"geometry.stroke\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#ffffff\"\r\n                            },\r\n                            {\r\n                                lightness: 29\r\n                            },\r\n                            {\r\n                                weight: 0.2\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"road.highway\",\r\n                        elementType: \"labels.text.fill\",\r\n                        stylers: [\r\n                            {\r\n                                lightness: \"38\"\r\n                            },\r\n                            {\r\n                                color: \"#000000\"\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"road.arterial\",\r\n                        elementType: \"geometry\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#ffffff\"\r\n                            },\r\n                            {\r\n                                lightness: 18\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"road.local\",\r\n                        elementType: \"geometry\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#ffffff\"\r\n                            },\r\n                            {\r\n                                lightness: 16\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"transit\",\r\n                        elementType: \"geometry\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#f2f2f2\"\r\n                            },\r\n                            {\r\n                                lightness: 19\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        featureType: \"water\",\r\n                        elementType: \"geometry\",\r\n                        stylers: [\r\n                            {\r\n                                color: \"#e9e9e9\"\r\n                            },\r\n                            {\r\n                                lightness: 17\r\n                            }\r\n                        ]\r\n                    }\r\n                    ]\r\n                }\r\n            >\r\n\r\n\r\n                {this.state.markers[0] && this.getMarkers()}\r\n                <InfoWindow\r\n                    marker={this.state.activeMarker}\r\n                    visible={this.state.showingInfoWindow}>\r\n                    <div>\r\n                        <h1>{this.state.selectedPlace.title}</h1>\r\n                        {this.state.selectedPlace.name && <p>{\r\n                            new Date(this.state.selectedPlace.name).getHours() + ':' + new Date(this.state.selectedPlace.name).getMinutes()\r\n                        }</p>}\r\n                    </div>\r\n                </InfoWindow>\r\n            </Map>\r\n        );\r\n    }\r\n}\r\n\r\nexport const MapContainer = GoogleApiWrapper({\r\n    apiKey: (API_KEY)\r\n})(_MapContainer)","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport {  withRouter } from 'react-router-dom'\r\nimport { loadTrip, addTrip,  setTrip } from '../store/actions/tripActions'\r\nimport { closeModal, showModal } from '../store/actions/modalActions'\r\nimport { TripAssembly } from '../cmps/TripAssembly/TripAssembly'\r\nimport { TripRoute } from '../cmps/TripRoute/TripRoute'\r\nimport { utils } from '../services/utils'\r\nimport { Chat } from '../cmps/TripApp/Chat'\r\nimport { socketService } from '../services/socketService'\r\nimport { MapContainer } from '../cmps/MainCmps/Map';\r\nimport { closeMsg, showMsg } from '../store/actions/msgActions'\r\nimport { ErrorMsg } from '../cmps/MainCmps/ErrorMsg'\r\nimport { eventBus } from '../services/eventBusService'\r\n// import locationCevtorRed from 'https://res.cloudinary.com/roidinary/image/upload/v1600377967/locationVectorRed_vzufx4.png'\r\n\r\nclass _TripApp extends Component {\r\n\r\n    state = {\r\n        chatOpen: false,\r\n        settingsOpen: false,\r\n        isSocketSetup: false,\r\n        markers: [],\r\n        sideBar: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { setTrip, loadTrip, addTrip } = this.props\r\n        socketService.setup();\r\n\r\n\r\n        const { id } = this.props.match.params\r\n        socketService.emit('enter trip', id);\r\n        try {\r\n            await loadTrip(id, true)\r\n            if (this.props.match.params.openSignup === 'true') {\r\n                this.props.showModal('signup', id)\r\n            }\r\n            const markers = this.getMarkersOfDests()\r\n            this.setState({ isSocketSetup: true, markers })\r\n\r\n        }\r\n        catch (err) {\r\n        }\r\n        // socketService.emit('tripToUpdate', newTrip);\r\n\r\n        socketService.on('tripUpdated', setTrip);\r\n\r\n    }\r\n\r\n    getMarkersOfDests() {\r\n        return this.props.trip.destinations.map(dest => {\r\n            return { location: dest.location, name: dest.name }\r\n        })\r\n    }\r\n    setDestsMarkers=()=>{\r\n        const markers = this.getMarkersOfDests()\r\n        this.setState({markers})\r\n    }\r\n    componentWillUnmount() {\r\n        socketService.off('tripUpdated', this.props.setTrip);\r\n    }\r\n\r\n    async componentDidUpdate(prevProps, prevState) {\r\n\r\n        if (prevProps.trip === this.props.trip) return\r\n        const markers = this.getMarkersOfDests()\r\n        this.setState({ markers })\r\n        \r\n\r\n        // socketService.emit('tripUpdated', this.props.trip);\r\n    }\r\n\r\n    updateDestinations = async (destIdxToMove, moveToIdx) => {\r\n        let destinations = [...this.props.trip.destinations]\r\n        let activities = [...this.props.trip.activities]\r\n        const moveDifference = utils.calculateDays(destinations[destIdxToMove].startDate, destinations[destIdxToMove].endDate)\r\n        const destTomove = destinations.splice(destIdxToMove, 1)[0]\r\n        const constant = (1000 * 60 * 60 * 24 * (moveDifference - 1))\r\n        if (moveToIdx === -1) {\r\n            activities = activities.reduce((acc, act, idx) => {\r\n                if (act.destination === destTomove.name) return acc\r\n                acc.push(act)\r\n                return acc\r\n            }, [])\r\n            destinations.forEach((dest, idx) => {\r\n                if (idx >= destIdxToMove) {\r\n                    dest.startDate = dest.startDate - constant\r\n                    dest.endDate = dest.endDate - constant\r\n                    activities.forEach(act => {\r\n                        if (act.destination === dest.name) act.at -= constant\r\n                    })\r\n                }\r\n            })\r\n\r\n        } else {\r\n            if (destIdxToMove > moveToIdx) {\r\n                const passDifference = utils.calculateDays(this.props.trip.destinations[moveToIdx].startDate, this.props.trip.destinations[destIdxToMove - 1].endDate)\r\n                const constant2 = (1000 * 60 * 60 * 24 * (passDifference - 1))\r\n                destTomove.startDate = destTomove.startDate - constant2;\r\n                destTomove.endDate = destTomove.endDate - constant2;\r\n                activities.forEach(act => {\r\n                    if (act.destination === destTomove.name) act.at -= constant2\r\n                })\r\n                destinations.splice(moveToIdx, 0, destTomove)\r\n                destinations.forEach((dest, idx) => {\r\n                    if (idx > moveToIdx && idx <= destIdxToMove) {\r\n                        dest.startDate = dest.startDate + constant\r\n                        dest.endDate = dest.endDate + constant\r\n                        activities.forEach(act => {\r\n                            if (act.destination === dest.name) act.at += constant\r\n                        })\r\n                    }\r\n                })\r\n            } else {\r\n                const passDifference = utils.calculateDays(this.props.trip.destinations[destIdxToMove + 1].startDate, this.props.trip.destinations[moveToIdx].endDate)\r\n                const constant2 = (1000 * 60 * 60 * 24 * (passDifference - 1))\r\n                destTomove.startDate = destTomove.startDate + constant2;\r\n                destTomove.endDate = destTomove.endDate + constant2;\r\n                activities.forEach(act => {\r\n                    if (act.destination === destTomove.name) act.at += constant2\r\n                })\r\n                destinations.splice(moveToIdx, 0, destTomove)\r\n                destinations.forEach((dest, idx) => {\r\n                    if (idx < moveToIdx && idx >= destIdxToMove) {\r\n                        dest.startDate = dest.startDate - constant\r\n                        dest.endDate = dest.endDate - constant\r\n                        activities.forEach(act => {\r\n                            if (act.destination === dest.name) act.at -= constant\r\n                        })\r\n                    }\r\n                })\r\n\r\n            }\r\n        }\r\n        const _newTrip = { ...this.props.trip, activities, destinations }\r\n        const newTrip = await this.props.addTrip(_newTrip)\r\n        socketService.emit('tripToUpdate', newTrip);\r\n\r\n    }\r\n\r\n    updateTripAct = async (activities) => {\r\n        let _newTrip = { ...this.props.trip, activities }\r\n        let newTrip = await this.props.addTrip(_newTrip)\r\n        socketService.emit('tripToUpdate', newTrip);\r\n\r\n    }\r\n\r\n    toggleChat = () => {\r\n        this.setState({ chatOpen: !this.state.chatOpen })\r\n    }\r\n    toggleSettings = () => {\r\n        this.setState({ settingsOpen: !this.state.settingsOpen })\r\n    }\r\n\r\n    addDestination = async (newDest) => {\r\n        const { destinations } = { ...this.props.trip }\r\n        newDest.startDate = destinations[destinations.length - 1].endDate\r\n        newDest.endDate = newDest.startDate + 1000 * 60 * 60 * 24 * (+newDest.days - 1)\r\n        newDest.id = utils.makeId()\r\n        destinations.push(newDest)\r\n        const _newTrip = { ...this.props.trip, destinations }\r\n        const newTrip = await this.props.addTrip(_newTrip)\r\n        socketService.emit('tripToUpdate', newTrip);\r\n\r\n\r\n        // const markers = this.getMarkersOfDests()\r\n        // console.log(markers);\r\n\r\n        // this.setState({ markers })\r\n    }\r\n\r\n    showDay = (day) => {\r\n        if (!day.td) return\r\n        const actToRender = this.props.trip.activities.reduce((acc, act) => {\r\n            if (new Date(act.at).getDate() === day.day.getDate()) {\r\n                acc.push({name:act.name,location:act.location,at:act.at})\r\n            }\r\n            return acc\r\n        }, [])\r\n        eventBus.emit('markDay', day)\r\n        this.setState({markers:actToRender})\r\n    }\r\n    openSideBar = () => {\r\n        this.setState({ sideBar: !this.state.sideBar })\r\n    }\r\n\r\n    render() {\r\n        const { trip } = this.props\r\n        const sideBarClass = this.state.sideBar ? 'open-side-bar' : ''\r\n        if (!trip|| !trip.destinations) return <div>Loading....</div>\r\n        return (\r\n            <div className=\"trip-app  \">\r\n                <ErrorMsg />\r\n                <div className=\"trip-app-area flex \">\r\n                    <button onClick={this.openSideBar} className={`side-bar-bars ${sideBarClass}`}><i className=\"fas fa-bars \" ></i></button>\r\n                    <div className={`trip-side-bar flex column ${sideBarClass} `}>\r\n                        <TripRoute\r\n                            trip={trip}\r\n                            addDestination={this.addDestination}\r\n                            updateDestinations={this.updateDestinations}\r\n                            showModal={this.props.showModal}\r\n                            toggleChat={this.toggleChat}\r\n                            showDay={this.showDay}\r\n                            openSideBar={this.openSideBar}\r\n                            setDestsMarkers={this.setDestsMarkers}\r\n                        />\r\n                    </div>\r\n                    <div className=\"trip-app-main full\">\r\n                        {this.state.markers[0] && <MapContainer markers={this.state.markers} />}\r\n                        <TripAssembly\r\n                            showMsg={this.props.showMsg}\r\n                            closeMsg={this.props.closeMsg}\r\n                            trip={trip} updateTripAct={this.updateTripAct}\r\n                            showModal={this.props.showModal}\r\n                            closeModal={this.props.closeModal}\r\n                            setTrip={this.props.setTrip}\r\n                            openSideBar={this.openSideBar}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                {this.state.isSocketSetup && <Chat chatOpen={this.state.chatOpen} trip={trip} />}\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        trip: state.tripReducer.currTrip\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadTrip,\r\n    showModal,\r\n    closeModal,\r\n    addTrip,\r\n    showMsg,\r\n    closeMsg,\r\n    setTrip\r\n\r\n\r\n\r\n}\r\nexport const TripApp = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripApp))\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nclass _UserTrips extends Component {\r\n    state = {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nexport const UserTrips = connect(mapStateToProps, mapDispatchToProps)(_UserTrips);","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils';\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nexport class EditActivity extends Component {\r\n    state = {\r\n        activitie: {\r\n            name: '',\r\n            at: '',\r\n            time: '',\r\n            labels: ['relax'],\r\n            duration: 1,\r\n            notes: '',\r\n            price: '',\r\n            destination: '',\r\n            id: null\r\n        },\r\n        minTime: '',\r\n        maxTime: ''\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { act, destinations } = this.props.props\r\n        let minTime;\r\n        let maxTime;\r\n\r\n        if (act) {\r\n            const destIdx = destinations.findIndex(dest => dest.name === act.destination)\r\n            minTime = utils.getIsoTime(destinations[destIdx].startDate)\r\n            maxTime = utils.getIsoTime(destinations[destIdx].endDate)\r\n            this.setState({\r\n\r\n                activitie: {\r\n                    ...act, name: act.name, price: act.price.amount, at: utils.getIsoTime(act.at),\r\n                    destination: act.destination\r\n                }, minTime, maxTime\r\n            })\r\n        } else {\r\n            minTime = utils.getIsoTime(destinations[0].startDate)\r\n            let minT = new Date(minTime)\r\n            // let newMinT = minT.setHours(7, 0)\r\n            maxTime = utils.getIsoTime(destinations[destinations.length - 1].endDate)\r\n            this.setState({ activitie: { ...this.state.activitie, destination: destinations[0].name }, minTime, maxTime })\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const { destinations } = this.props.props\r\n        const { destination } = this.state.activitie\r\n        if (prevState.activitie.destination === destination) return\r\n        if (destination && !this.state.activitie.id) {\r\n            const destIdx = destinations.findIndex(dest => dest.name === destination)\r\n            const minTime = utils.getIsoTime(destinations[destIdx].startDate)\r\n            const maxTime = utils.getIsoTime(destinations[destIdx].endDate)\r\n            this.setState({ minTime, maxTime })\r\n        }\r\n    }\r\n\r\n    handleTime = (time) => {\r\n        let tzoffset = (time).getTimezoneOffset() * 60000; //offset in milliseconds\r\n        let localISOTime = (new Date(time - tzoffset)).toISOString().slice(0, -1);\r\n        this.setState({ activitie: { ...this.state.activitie, at: localISOTime } })\r\n    }\r\n\r\n    handleChange = ({ target }) => {\r\n        const field = target.name;\r\n        let value = target.value;\r\n        if (target.type === 'checkbox') this.setState({ [field]: target.checked });\r\n        else if (target.type === 'number') this.setState({ activitie: { ...this.state.activitie, [field]: +value } });\r\n        else this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n    }\r\n\r\n    onSaveAct = (ev) => {\r\n        ev.preventDefault()\r\n        var { saveAct, isOccTimeSlot } = this.props.props\r\n        const { activitie } = this.state\r\n        if (!activitie.at) return\r\n        let datetime = new Date(activitie.at)\r\n        activitie.at = datetime.getTime()\r\n        if (isOccTimeSlot(activitie)) {\r\n            return\r\n        }\r\n        activitie.price = { amount: activitie.price, currency: '$' }\r\n        saveAct(this.state.activitie)\r\n    }\r\n    getValidTime = () => {\r\n        return new Date(this.state.activitie.at)\r\n    }\r\n\r\n    render() {\r\n        const { activitie, minTime, maxTime } = this.state\r\n        if (!activitie) return <div>Loading</div>\r\n        const { destinations } = this.props.props\r\n        let minT = new Date(minTime)\r\n        let maxT = new Date(maxTime)\r\n        let minTemp = minT.setHours(7, 0)\r\n        let currDate;\r\n        if (activitie.at) {\r\n            currDate = new Date(activitie.at)\r\n        } else {\r\n            currDate = new Date(minTemp)\r\n        }\r\n\r\n        let _min = currDate.setHours(7, 0)\r\n        let _max = currDate.setHours(23, 59)\r\n        let min = new Date(_min)\r\n        let max = new Date(_max)\r\n        return (\r\n\r\n            <form className=\"edit-activity-form flex column\" onSubmit={this.onSaveAct}>\r\n                <input className=\"styled-input\" placeholder=\"Enter activity Name\" name=\"name\" id=\"name\" value={this.state.activitie.name} onChange={this.handleChange}></input>\r\n                {!activitie.id && <div><i className=\"fas fa-map-marker\"></i><select value={this.state.activitie.destination} placeholder=\"destination\" name=\"destination\" id=\"dest-input\" onChange={this.handleChange}>\r\n                    {destinations.map((dest, idx) => {\r\n                        return <option key={utils.makeId()} value={dest.name}>{dest.name}</option>\r\n\r\n                    })}\r\n                </select></div>}\r\n                <div className=\"flex\">\r\n                <i className=\"far fa-clock\"></i>\r\n                    <div className=\"flex column\">\r\n                        <label htmlFor=\"start-time-activity-input\">Time</label>\r\n                        <DatePicker\r\n                            minDate={minT}\r\n                            maxDate={maxT}\r\n                            selected={this.getValidTime().getTime() || minTemp}\r\n                            value={this.getValidTime().getTime() || minTemp}\r\n                            minTime={min}\r\n                            maxTime={max}\r\n                            autoComplete=\"off\"\r\n                            className=\"styled-input\"\r\n                            showTimeSelect\r\n                            required\r\n                            showFullMonthYearPicker\r\n                            dateFormat=\"Pp\"\r\n                            onChange={time => this.handleTime(time)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex column justify-evenly align-baseline\">\r\n                        <label htmlFor=\"duration\">Duration (Half hours)</label>\r\n                        <input className=\"styled-input\" placeholder=\"duration\" id=\"duration\" type=\"number\" name=\"duration\" value={this.state.activitie.duration} onChange={this.handleChange}></input>\r\n                    </div>\r\n                </div>\r\n                <textarea placeholder=\"Add some notes\" onChange={this.handleChange} name=\"notes\" id=\"notes\" value={this.state.activitie.notes} ></textarea>\r\n                {/* <label htmlFor=\"price\" id=\"price\">Price</label> */}\r\n                <div className=\"flex\">\r\n                    <i className=\"fas fa-dollar-sign\"></i>\r\n                    <input className=\"styled-input\" type=\"number\" placeholder=\"price\" name=\"price\" id=\"price\" onChange={this.handleChange} placeholder=\"price\" value={this.state.activitie.price}></input>\r\n                </div>\r\n                <button className=\"styled-button\" onClick={this.onSaveAct}>Save</button>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { utils } from '../../services/utils';\r\nimport { ErrorMsg } from '../MainCmps/ErrorMsg';\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nexport class PrevEditActivity extends Component {\r\n    state = {\r\n        activitie: {\r\n            name: '',\r\n            at: '',\r\n            time: '',\r\n            labels: '',\r\n            duration: '',\r\n            notes: '',\r\n            price: '',\r\n            currency: '',\r\n            destination: '',\r\n            id: null\r\n        },\r\n        minTime: '',\r\n        maxTime: '',\r\n        isInputOpen: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { act, destinations } = this.props.props\r\n        let minTime;\r\n        let maxTime;\r\n\r\n        const destIdx = destinations.findIndex(dest => dest.name === act.destination)\r\n        minTime = utils.getIsoTime(destinations[destIdx].startDate)\r\n        maxTime = utils.getIsoTime(destinations[destIdx].endDate)\r\n        this.setState({\r\n\r\n            activitie: {\r\n                ...act, name: act.name, currency: act.price.currency, price: act.price.amount, at: utils.getIsoTime(act.at),\r\n                destination: act.destination\r\n            }, minTime, maxTime\r\n        })\r\n    }\r\n    handleTime = (time) => {\r\n        let tzoffset = (time).getTimezoneOffset() * 60000; //offset in milliseconds\r\n        let localISOTime = (new Date(time - tzoffset)).toISOString().slice(0, -1);\r\n        this.setState({ activitie: { ...this.state.activitie, at: localISOTime } })\r\n    }\r\n\r\n    handleChange = (ev) => {\r\n        const field = ev.target.name;\r\n        let value = ev.target.value;\r\n\r\n        if (field === 'at') {\r\n            let time = value.substring(value.length - 5)\r\n            let hours = +time.split(':')[0]\r\n            let minuets = +time.split(':')[1]\r\n            if (minuets <= 15) {\r\n                minuets = 0\r\n            } else if (minuets >= 45) {\r\n                minuets = 0\r\n                hours += 1\r\n            } else {\r\n                minuets = 30\r\n            }\r\n            if (hours >= 0 && hours < 7) {\r\n                this.props.showMsg({ type: 'input', msg: 'Please choose events between 7:00 AM and 11:30 PM' })\r\n                return\r\n            }\r\n            minuets = ((minuets + '').length === 1) ? ('0' + minuets) : (minuets + '')\r\n            hours = ((hours + '').length === 1) ? ('0' + hours) : (hours + '')\r\n            value = value.substring(0, value.length - 5) + `${hours}:${minuets}`\r\n            this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n        }\r\n\r\n        else if (field === 'duration') this.setState({ activitie: { ...this.state.activitie, [field]: +value } });\r\n        else this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n    }\r\n\r\n    handleContentEditable = (ev) => {\r\n        const field = ev.currentTarget.dataset.name\r\n        let value = ev.target.innerText\r\n        if (field === 'price') this.setState({ activitie: { ...this.state.activitie, [field]: +value } });\r\n        else this.setState({ activitie: { ...this.state.activitie, [field]: value } });\r\n\r\n    }\r\n\r\n    onSaveAct = (ev) => {\r\n        ev.preventDefault()\r\n        var { saveAct, isOccTimeSlot } = this.props.props\r\n        const { activitie } = this.state\r\n        let datetime = new Date(activitie.at)\r\n        activitie.at = datetime.getTime()\r\n        if (isOccTimeSlot(activitie)) {\r\n            this.props.showMsg({ type: 'input', msg: 'You aleardy have plans for that date! please choose a different one.' })\r\n            return\r\n        }\r\n        activitie.price = { amount: activitie.price, currency: '$' }\r\n        saveAct(this.state.activitie)\r\n    }\r\n    getValidTime = () => {\r\n        return new Date(this.state.activitie.at)\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        const startTime = utils.getTimeDayStr(new Date(this.state.activitie.at).getTime())\r\n        const endTime = utils.getTimeDayStr(new Date(this.state.activitie.at).getTime() + (this.state.activitie.duration / 2) * 60 * 60 * 1000)\r\n\r\n        const { activitie, minTime, maxTime } = this.state\r\n        if (!activitie) return <div>Loading</div>\r\n        const { destinations } = this.props.props\r\n        let minT = new Date(minTime)\r\n        let maxT = new Date(maxTime)\r\n        let minTemp = minT.setHours(7, 0)\r\n        let currDate;\r\n        if (activitie.at) {\r\n            currDate = new Date(activitie.at)\r\n        } else {\r\n            currDate = new Date(minTemp)\r\n        }\r\n\r\n        let _min = currDate.setHours(7, 0)\r\n        let _max = currDate.setHours(23, 59)\r\n        let min = new Date(_min)\r\n        let max = new Date(_max)\r\n\r\n        return (\r\n\r\n\r\n            <form className=\"preview-activity-form flex column\" >\r\n                <h2 contentEditable={true} suppressContentEditableWarning={true} data-placeholder=\"Enter activity name\" \r\n                spellCheck=\"false\" style={{direction:'ltr'}} data-name=\"name\" onBlur={this.handleContentEditable}>{this.state.activitie.name}</h2>\r\n                <div className=\"flex\">\r\n                    <small><i className=\"fas fa-map-marker\"></i> {this.state.activitie.destination}</small>\r\n                    <small><i className=\"far fa-clock\"></i>{`${startTime}-${endTime}`} <i onClick={() => { this.setState({ isInputOpen: !this.state.isInputOpen }) }} className=\"fas fa-edit\"></i></small>\r\n                </div>\r\n\r\n                <ErrorMsg />\r\n\r\n                <div className={`flex time-container ${this.state.isInputOpen ? 'openHeight' : ''} `}>\r\n                    <div className=\"flex column\">\r\n                        <h4 >Beginning time:</h4>\r\n                        <DatePicker\r\n                    minDate={minT}\r\n                    maxDate={maxT}\r\n                    selected={this.getValidTime().getTime()}\r\n                    value={this.getValidTime().getTime() || minTemp}\r\n                    minTime={min}\r\n                    maxTime={max}\r\n                    autoComplete=\"off\"\r\n                    className=\"styled-input prev-date-picker date\"\r\n                    showTimeSelect\r\n                    required\r\n                    dateFormat=\"Pp\"\r\n                    onChange={time => this.handleTime(time)}\r\n                />\r\n                    </div>\r\n                    <div className=\"flex column\">\r\n                        <h4 >Duration (Half hours)</h4>\r\n                        <input className=\"styled-input\" placeholder=\"duration\" id=\"duration\" type=\"number\" name=\"duration\" value={this.state.activitie.duration} onChange={this.handleChange}></input>\r\n                    </div>\r\n\r\n                </div>\r\n                {<img src={this.props.props.act.imgUrl} alt=\"https://teddytennis.com/cyprus/wp-content/uploads/sites/76/2017/11/placeholder.png\"/>}\r\n\r\n             \r\n                {/* <h4 htmlFor=\"notes\">Notes</h4> */}\r\n                <textarea placeholder=\"Add some notes\" onChange={this.handleChange} name=\"notes\" id=\"notes\" value={this.state.activitie.notes} ></textarea>\r\n                <div className=\"flex\">\r\n                    <h4>Price:</h4>\r\n                    <p>{this.state.activitie.currency}</p>\r\n                    <p contentEditable={true} suppressContentEditableWarning={true} data-name=\"price\" onBlur={this.handleContentEditable}>{this.state.activitie.price}</p>\r\n                </div>\r\n                <button className=\"styled-button\" onClick={this.onSaveAct}>Save</button>\r\n            </form >\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { ErrorMsg } from '../MainCmps/ErrorMsg'\r\n\r\nexport class AddReview extends React.Component {\r\n\r\n    state = {\r\n        reviewToAdd: {\r\n            content: '',\r\n            name: '',\r\n            rating: null,\r\n        }\r\n    }\r\n    elInput = React.createRef()\r\n\r\n    componentDidMount() {\r\n        this.elInput.current.focus()\r\n    }\r\n\r\n\r\n    onInputChange = (value, inputType) => {\r\n        this.setState({\r\n            reviewToAdd: { ...this.state.reviewToAdd, [inputType]: value }\r\n        })\r\n    }\r\n\r\n    onAddReview = (ev) => {\r\n        ev.preventDefault();\r\n        if (!this.state.reviewToAdd.rating) {\r\n            this.props.showMsg({ msg: 'You must rate this trip first', type: 'input' })\r\n            return\r\n        }\r\n        this.props.addReview(this.state.reviewToAdd)\r\n        this.setState({\r\n            reviewToAdd: {\r\n                content: '',\r\n                name: '',\r\n                rating: null,\r\n            }\r\n        })\r\n    }\r\n    setRating = (val) => {\r\n        this.setState({ reviewToAdd: { ...this.state.reviewToAdd, rating: val } }, ()=>{console.log(this.state)})\r\n    }\r\n\r\n    render() {\r\n        const classToAdd = this.props.isReviewOpen ? 'open' : '';\r\n        return (\r\n            <div className={`review-modal flex ${classToAdd}`}>\r\n                <form className=\"flex column \" onSubmit={this.onAddReview}>\r\n                    <ErrorMsg />\r\n\r\n                    <div className=\"flex\">\r\n                        <input className=\"styled-input\" placeholder=\"Enter your name\" type=\"text\" name=\"name\" required onChange={(ev) => { this.onInputChange(ev.target.value, ev.target.name) }} />\r\n                        {/* <select name=\"rating\" defaultValue=\"-1\" required onChange={(ev) => { this.onInputChange(ev.target.value, ev.target.name) }} >\r\n                            <option disabled value=\"-1\">Rate the trip</option>\r\n                            <option value=\"1\">1</option>\r\n                            <option value=\"2\">2</option>\r\n                            <option value=\"3\">3</option>\r\n                            <option value=\"4\">4</option>\r\n                            <option value=\"5\">5</option>\r\n                        </select> */}\r\n\r\n                        <div className=\"stars-rate flex\">\r\n                            <i className=\"fas fa-star star-5\" onClick={() => { this.setRating(5) }}></i>\r\n                            <i className=\"fas fa-star star-4\" onClick={() => { this.setRating(4) }}></i>\r\n                            <i className=\"fas fa-star star-3\" onClick={() => { this.setRating(3) }}></i>\r\n                            <i className=\"fas fa-star star-2\" onClick={() => { this.setRating(2) }}></i>\r\n                            <i className=\"fas fa-star star-1\" onClick={() => { this.setRating(1) }}></i>\r\n                        </div>\r\n                    </div>\r\n                    <ErrorMsg />\r\n                    <textarea id=\"content\" required name=\"content\" placeholder=\"Enter your review here\" ref={this.elInput} onChange={(ev) => { this.onInputChange(ev.target.value, ev.target.name) }}>\r\n                    </textarea>\r\n                    <button className=\"styled-button\">Save</button>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\n\r\n\r\nexport class LongTxt extends React.Component {\r\n\r\n    state = {\r\n        text: this.props.text,\r\n        isLongTxtShown: false\r\n    }\r\n\r\n    onReadMore = () => {\r\n        this.setState({ isLongTxtShown: !this.state.isLongTxtShown })\r\n    }\r\n\r\n    render() {\r\n        const  text  = this.state.text\r\n        var isLongTxtShown = this.state.isLongTxtShown\r\n        return (\r\n            <p>\r\n                {(text.length < 100 || (isLongTxtShown && text.length > 100)) ? text : text.substring(0, 100) + ' . . .'}\r\n                {text.length > 100 && <button className=\" styled-button expend-description\" onClick={this.onReadMore}>{this.state.isLongTxtShown ? 'Less' : 'More'}</button>}\r\n            </p >\r\n        )\r\n    }\r\n}\r\n","\r\nimport React from 'react'\r\nimport { utils } from '../../services/utils';\r\nimport { LongTxt } from '../MainCmps/LongText';\r\n\r\n\r\nexport function ReviewPreview({ review }) {\r\n\r\n\r\n    function getStars() {\r\n        let stars = [];\r\n        for (let i = 0; i < review.rating; i++) {\r\n            stars.push(<img className=\"rating-star\" key={utils.makeId()} src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600689776/450716_preview_uyyiz1.png\" alt=\"\" />)\r\n        }\r\n        for (let i = 0; i < 5 - review.rating; i++) {\r\n            stars.push(<img className=\"rating-star\" key={utils.makeId()} src=\"https://res.cloudinary.com/idanrozen/image/upload/v1600690459/450716_preview1_pvoieq.png\" alt=\"\" />)\r\n        }\r\n        return stars\r\n    }\r\n\r\n\r\n    const time = `${new Date(review.createdAt).getDate()}/${new Date(review.createdAt).getMonth() + 1}/${new Date(review.createdAt).getFullYear()}`\r\n    return (\r\n        < React.Fragment >\r\n            <div className=\"review-details flex justify-between \">\r\n                <h3>{review.name || 'Traveler'}</h3>\r\n                <div className=\"flex column\">\r\n                    <div>{getStars()} </div>\r\n                    <p>{time}</p>\r\n                </div>\r\n            </div>\r\n            {review.content && <LongTxt text={review.content} />}\r\n\r\n        </React.Fragment >\r\n    )\r\n}\r\n","import { ReviewPreview } from './ReviewPreview.jsx'\r\nimport React from 'react'\r\n\r\n\r\nexport function ReviewList({ reviews }) {\r\n    return (\r\n        <ul className=\"review-list flex column container\">\r\n            {(!reviews || !reviews.length)? 'No reviews have been written for this trip yet' : reviews.map((review,idx) =>\r\n                <li className=\"review flex column\" key={idx}>\r\n                    <ReviewPreview key={review._id} review={review} />\r\n                </li>\r\n\r\n            )}\r\n        </ul>\r\n    )\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { utils } from '../../services/utils'\r\nimport { TripPreview } from '../Home/TripPreview'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport { ReviewList } from './ReviewList'\r\nimport { AddReview } from './AddReview'\r\nimport { reviewActions } from '../../store/actions/reviewActions'\r\n\r\nclass _TripReviews extends Component {\r\n\r\n    state = {\r\n        isReviewOpen: false,\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const trip =this.props.trip\r\n        try {\r\n            await this.props.loadReviews({ tripId: trip._id })\r\n        }\r\n        catch (err) {\r\n        }\r\n    }\r\n\r\n    onToggleExpend = () => {\r\n        this.setState({ isReviewOpen: !this.state.isReviewOpen})\r\n    }\r\n\r\n\r\n    addReview = async (review) => {\r\n        review.trip = this.props.trip._id\r\n        await reviewActions.addReview(review)\r\n        await this.props.loadReviews({ tripId: this.props.trip._id })\r\n        this.onToggleExpend()\r\n    }\r\n\r\n    render() {\r\n        const { trip } = this.props\r\n        if (!trip) return <p> Loading . . .</p>\r\n\r\n        return (\r\n            <div className=\"reviews-page\">\r\n                <ReviewList reviews={this.props.reviews} />\r\n                <div className=\"flex reviews-btns-container\">\r\n                    <button className=\"review-btns styled-button\" onClick={this.onToggleExpend}>{this.state.isReviewOpen ? 'Close' : ' Add Review'}</button>\r\n                </div>\r\n                    <AddReview addReview={this.addReview} msg={this.props.msg} showMsg={this.props.showMsg} closeMsg={this.props.closeMsg}  isReviewOpen={this.state.isReviewOpen}/>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        reviews: state.reviewReducer.reviews,\r\n        trip: state.tripReducer.currTrip\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    addReview: reviewActions.addReview,\r\n    loadReviews: reviewActions.loadReviews\r\n}\r\n\r\nexport const TripReviews = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripReviews))\r\n","import React, { Component } from 'react'\r\nimport ReactDOM from 'react-dom';\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\r\n\r\nexport class AddMember extends Component {\r\n\r\n    state = {\r\n        value: '',\r\n        copied: false,\r\n        // emailToSend: {\r\n        //     subject: '',\r\n        //     body: '',\r\n        //     email: ''\r\n\r\n        // }\r\n    }\r\n\r\n    componentDidMount() {\r\n    this.setState({value:`http://localhost:3000/#/trip/${this.props.props}/triproute/true`})\r\n    }\r\n    \r\n\r\n    handleInput = (value, name) => {\r\n        this.setState({ emailToSend: { ...this.state.emailToSend, [name]: value } })\r\n    }\r\n\r\n    onAddMember(ev, mail) {\r\n        ev.preventDefault()\r\n        this.props.closeModal()\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n            return (\r\n            <div className=\"flex column share-trip\">\r\n                <h3>Share this link with your trip partners and start planning together!</h3>\r\n                <img src=\"https://thumbs.dreamstime.com/b/group-young-people-friends-celebrating-successful-hiking-expedition-group-young-people-friends-celebrating-successful-hiking-123552345.jpg\" alt=\"\"/>\r\n                <input disabled className=\"styled-input\" value={this.state.value}\r\n                    onChange={({ target: { value } }) => this.setState({ value, copied: false })} />\r\n\r\n                {/* <CopyToClipboard text={this.state.value}\r\n                    onCopy={() => this.setState({ copied: true })}>\r\n                    <span>Copy to clipboard with span</span>\r\n                </CopyToClipboard> */}\r\n\r\n                <CopyToClipboard text={this.state.value}\r\n                    onCopy={() => this.setState({ copied: true })}>\r\n                    <button className=\"styled-button\">Copy and share</button>\r\n                </CopyToClipboard>\r\n\r\n                {this.state.copied ? <span style={{ color: 'orange' }}>Copied!</span> : null}\r\n            </div>\r\n\r\n            // <div className={'add-member'}>\r\n            //     <form className=\"flex column\" onSubmit={(ev) => { this.onAddMember(ev, this.state.emailToSend) }}>\r\n            //         <div className=\"headline\">\r\n            //             <h2>Add Member</h2>\r\n            //         </div>\r\n            //         <input className=\"styled-input\"\r\n            //             placeholder=\"Enter your friend Email\"\r\n            //             type=\"email\"\r\n            //             name=\"email\"\r\n            //             required\r\n            //             value={this.state.emailToSend.email}\r\n            //             onChange={(ev) => { this.handleInput(ev.target.value, ev.target.name) }} />\r\n            //         <input className=\"styled-input\"\r\n            //             placeholder=\"Enter subject\"\r\n            //             type=\"text\"\r\n            //             name=\"subject\"\r\n            //             required\r\n            //             value={this.state.emailToSend.subject}\r\n            //             onChange={(ev) => { this.handleInput(ev.target.value, ev.target.name) }} />\r\n            //         <textarea\r\n            //             required\r\n            //             name=\"body\"\r\n            //             placeholder=\"Enter your review here\"\r\n            //             value={this.state.emailToSend.body}\r\n            //             onChange={(ev) => { this.handleInput(ev.target.value, ev.target.name) }}>\r\n            //         </textarea>\r\n            //         {/* <ErrorMsg /> */}\r\n            //         <button onSubmit={(ev) => { this.onAddMember(ev, this.state.emailToSend) }}>Save</button>\r\n            //     </form>\r\n            // </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst appRoot = document.createElement('div');\r\ndocument.body.appendChild(appRoot);\r\n// ReactDOM.render(<App />, appRoot);","import React, { Component } from 'react'\r\n\r\n\r\nexport class NotificationMsg extends Component {\r\n    state = {\r\n        isShown: false,\r\n        msg: '',\r\n        type: ''\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <p>Are you sure you want to delete?</p>\r\n                <div className=\"flex notification-btns\">\r\n                    <button className=\"styled-button\" onClick={() => this.props.props.removeAct(this.props.props.actId)}>Delete</button>\r\n                    <button className=\"styled-button\" onClick={() => this.props.closeModal()}>Cancel</button>\r\n                </div>\r\n            </div>\r\n        )\r\n        // const { isShown, msg, type } = this.state\r\n        // const _hidden = (isShown)?'':'hidden-msg'\r\n        // return (\r\n        //     <div className={ `notification-box ${type} ${_hidden}` }  >\r\n        //         { isShown && <span onClick={ () => this.setState({ isShown: false }) }>X</span> }\r\n        //         { isShown && <h2> { msg }</h2> }\r\n        //     </div>\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { LoginSignupPage } from '../../pages/LoginSignupPage';\r\nimport { closeModal, showModal } from '../../store/actions/modalActions'\r\nimport { closeMsg, showMsg } from '../../store/actions/msgActions';\r\nimport { EditActivity } from '../TripAssembly/EditActivity';\r\nimport { PrevEditActivity } from '../TripAssembly/PrevEditActivity';\r\nimport { AddReview } from '../tripReviews/AddReview';\r\nimport { TripReviews } from '../tripReviews/TripReviews';\r\nimport { AddMember } from './AddMember';\r\nimport { NotificationMsg } from './NotificationMsg';\r\n\r\nclass _Modal extends React.Component {\r\n    state = {\r\n        dynamicCmp: '',\r\n        nameToDisplay: ''\r\n    }\r\n    componentDidMount() {\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const curCmp = this.props.modal.cmp\r\n        if (prevProps.modal.cmp === curCmp) return\r\n        let dynamicCmp = '';\r\n        let nameToDisplay = '';\r\n        switch (curCmp) {\r\n            case 'login':\r\n                dynamicCmp = <LoginSignupPage page={true} handleClick={this.handleClick} />\r\n                nameToDisplay = 'Please Login'\r\n                break\r\n            case 'signup':\r\n                const tripId = this.props.modal.props\r\n                dynamicCmp = <LoginSignupPage page={false} handleClick={this.handleClick} tripId={tripId} />\r\n                nameToDisplay = 'Please Sign Up'\r\n                break\r\n            case 'editActivity':\r\n                dynamicCmp = <EditActivity props={this.props.modal.props} />\r\n                nameToDisplay = 'Edit activity'\r\n                break\r\n            case 'activityDetails':\r\n                dynamicCmp = <PrevEditActivity props={this.props.modal.props} showMsg={this.props.showMsg}\r\n                    closeMsg={this.props.closeMsg} />\r\n                nameToDisplay = 'Activity Details'\r\n                break\r\n            case 'removeActivity':\r\n                dynamicCmp = <NotificationMsg props={this.props.modal.props} closeModal={this.props.closeModal} />\r\n                nameToDisplay = 'Delete Activity'\r\n                break\r\n            case 'add-review':\r\n                dynamicCmp = <AddReview props={this.props.modal.props.addReview} showMsg={this.props.showMsg}\r\n                    closeMsg={this.props.closeMsg} closeModal={this.closeModal} />\r\n                nameToDisplay = 'Add Review'\r\n                break\r\n            case 'add-member':\r\n                dynamicCmp = <AddMember props={this.props.modal.props}\r\n                    closeModal={this.closeModal} />\r\n                nameToDisplay = 'Add Member'\r\n                break\r\n            case 'trip-reviews':\r\n                dynamicCmp = <TripReviews showMsg={this.props.showMsg} msg={this.props.msg} closeMsg={this.props.closeMsg} closeModal={this.closeModal} />\r\n                nameToDisplay = 'Reviews'\r\n                break\r\n            default:\r\n                dynamicCmp = <div>proplem loading modal</div>\r\n        }\r\n        this.setState({ dynamicCmp, nameToDisplay })\r\n\r\n    }\r\n    handleClick = (cmp) => {\r\n        this.props.showModal(cmp)\r\n    }\r\n\r\n\r\n    checkKey = (ev) => {\r\n        if (ev.key === \"Escape\") this.closeModal()\r\n    }\r\n\r\n    closeModal = () => {\r\n        this.props.closeModal()\r\n    }\r\n\r\n\r\n    render() {\r\n        const showLoginSignup = this.state.curCmp === 'login' || this.state.curCmp === 'signup' ? true : false;\r\n        return (\r\n            <div className={`modal-screen flex align-center justify-center ${this.props.modal.isShown ? '' : 'hide'}`} onKeyDown={this.checkKey} onMouseDown={this.closeModal}>\r\n                <div className={`modal-container `} onMouseDown={(ev) => ev.stopPropagation()} >\r\n                    <div className=\"modal-header flex align-center justify-center styled-header\" ><p>{this.state.nameToDisplay}</p><button onClick={this.closeModal}>X</button></div>\r\n                    <div className=\"modal-content\"  >\r\n                        {this.state.dynamicCmp}\r\n                        {/* {this.props.msg? <p>{this.props.msg}</p>:''} */}\r\n                    </div>\r\n                </div >\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        modal: state.modalReducer,\r\n        msg: state.msgReducer.msg\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    closeModal,\r\n    showModal,\r\n    showMsg,\r\n    closeMsg\r\n}\r\nexport const Modal = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Modal))\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { utils } from '../services/utils'\r\nimport { TripPreview } from '../cmps/Home/TripPreview'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport { ReviewList } from '../cmps/tripReviews/ReviewList'\r\nimport { reviewActions } from '../store/actions/reviewActions'\r\nimport { loadTrip } from '../store/actions/tripActions'\r\nimport { showModal } from '../store/actions/modalActions'\r\n\r\nclass _TripDetails extends Component {\r\n\r\n    state = {\r\n        trip: '',\r\n        isReviewOpen: false,\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { id } = this.props.match.params\r\n        try {\r\n           await this.props.loadTrip(id)\r\n            await this.props.loadReviews({ tripId: this.props.trip._id })\r\n        }\r\n        catch (err) {\r\n        }\r\n    }\r\n\r\n    onToggleExpend = () => {\r\n        this.setState({ isReviewOpen: true })\r\n    }\r\n\r\n\r\n    addReview = async (review) => {\r\n        // review.byUserId = this.props.loggedInUser._id\r\n        review.aboutTrip = this.props.trip._id\r\n        await reviewActions.addReview(review)\r\n        await this.props.loadReviews({ tripId: this.props.trip._id })\r\n    }\r\n\r\n    render() {\r\n        const { trip } = this.props\r\n        if (!trip) return <p> Loading . . .</p>\r\n        const days = utils.calculateDays(trip.destinations[0].startDate, trip.destinations[trip.destinations.length - 1].endDate)\r\n\r\n\r\n        return (\r\n            <div className=\"trip-preview reviews-page\">\r\n                <div className=\"img-wraper\">\r\n                    <img src={utils.getRandomPic()} alt=\"\" />\r\n                </div>\r\n                <h2>{days} days to {trip.destinations[0].name}</h2>\r\n                <p>By: Moshe544</p>\r\n                {/* <TripPreview trip={trip} img={utils.getRandomPic()} style={{ pointerEvents: 'none' }} addClass={'details'} /> */}\r\n                <div className=\"addreview-container\">\r\n                    <Link to={`/trip/${trip._id}/triproute`}>\r\n                        <button onClick={this.props.closeModal} className=\"styled-button\">Explore this trip</button>\r\n                    </Link>\r\n                    <ReviewList reviews={this.props.reviews} />\r\n                    <div className=\"flex reviews-btns-container\">\r\n                        <button className=\"review-btns styled-button\" onClick={() => this.props.showModal('add-review', { addReview: this.addReview })}>Add Review</button>\r\n                        <button className=\"review-btns styled-button\" onClick={() => { this.props.history.push('/trip') }}>Back</button>\r\n                    </div>\r\n                </div>\r\n\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        reviews: state.reviewReducer.reviews,\r\n        trip: state.tripReducer.currTrip,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    addReview: reviewActions.addReview,\r\n    loadReviews: reviewActions.loadReviews,\r\n    loadTrip,\r\n    showModal,\r\n}\r\n\r\nexport const TripDetails = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TripDetails))\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\n\r\nclass _Loader extends React.Component {\r\n    render() {\r\n        if(!this.props.loader)  return <React.Fragment/>\r\n\r\n        return (\r\n            <div className=\"positioning-container\">\r\n                <div className=\"spinning-container\">\r\n                <span>LOADING</span>\r\n                    <div className=\"airplane-container\">\r\n                        {/* <span className=\"fa fa-plane\"></span> */}\r\n                        <img className=\"plane\" src=\"https://res.cloudinary.com/roidinary/image/upload/v1600624566/Asset_dwekpj.png\" alt=\"Loading\"></img>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loader: state.modalReducer.loaderOn\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    \r\n}\r\nexport const Loader = connect(mapStateToProps, mapDispatchToProps)(_Loader)","import React from 'react';\r\nexport function Footer() {\r\n    return (\r\n        <div className=\"footer flex align-center justify-center\">\r\n            TrollyRights 2022\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { MainNavBar } from './cmps/MainCmps/MainNavBar';\r\nimport { About } from './pages/About';\r\nimport { HomePage } from './pages/HomePage';\r\nimport { TripStock } from './pages/TripStock';\r\nimport { LoginSignupPage } from './pages/LoginSignupPage';\r\nimport { TripApp } from './pages/TripApp.jsx'\r\nimport { UserTrips } from './pages/UserTrips';\r\nimport { Modal } from './cmps/MainCmps/Modal';\r\n\r\nimport '../src/scss/main.scss'\r\nimport { TripDetails } from './pages/TripDetails';\r\n\r\nimport { Loader } from './cmps/MainCmps/Loader';\r\nimport { Footer } from './cmps/MainCmps/Footer';\r\n\r\n\r\nexport function App() {\r\n\r\n  return (\r\n\r\n    <div style={{position:\"relative\"}} className=\"App \">\r\n      <MainNavBar />\r\n      <main>\r\n        <Modal />\r\n        <Loader />\r\n        <Switch>\r\n          <Route component={LoginSignupPage} path='/lognsignup' />\r\n          <Route component={TripApp} path='/trip/:id/:triproute/:openSignup?' />\r\n          {/* <Route component={TripApp} path='/trip/:id/:triproute' /> */}\r\n          <Route component={TripDetails} path='/trip/:id/' />\r\n          <Route component={UserTrips} path='/user/:id' />\r\n          <Route component={TripStock} path='/trip' />\r\n          <Route component={About} path='/about' />\r\n          <Route exact component={HomePage} path='/' />\r\n        </Switch>\r\n      </main>\r\n        <Footer/>\r\n    </div>\r\n  );\r\n}\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","const initialState = {\r\n    isShown: false,\r\n    props: null,\r\n    cmp: null,\r\n    msg:null,\r\n    loaderOn: false\r\n}\r\n\r\nexport function modalReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_MODAL':\r\n            return {\r\n                isShown: true,\r\n                props: action.props,\r\n                cmp: action.cmp\r\n            }\r\n        case 'CLOSE_MODAL':\r\n            return {\r\n                isShown: false,\r\n                props: null,\r\n                cmp: null\r\n            }\r\n        case 'LOGIN_PROBLEML':\r\n            return {\r\n                ...state,\r\n                msg:'wrong email or password'\r\n            }\r\n        case 'SET_LOADER':\r\n            return {\r\n                loaderOn: true,\r\n            }\r\n        case 'CLOSE_LOADER':\r\n            return {\r\n                loaderOn: false,\r\n            }\r\n\r\n        default:\r\n            return state\r\n    }\r\n}","const initialState = {\r\n    isShown: false,\r\n    type: '',\r\n    msg: ''\r\n}\r\n\r\nexport function msgReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_MSG':\r\n            return {\r\n                isShown: true,\r\n                msg: action.msg.msg,\r\n                type: action.msg.type\r\n            }\r\n        case 'CLOSE_MSG':\r\n            return {\r\n                isShown: false,\r\n                type: '',\r\n                msg: ''\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","const initialState = {\r\n    reviews: [],\r\n    selectedReview: null\r\n  };\r\n  \r\n  export function reviewReducer(state = initialState, action = {}) {\r\n    switch (action.type) {\r\n      case 'SET_REVIEWS':\r\n        return { ...state, reviews: action.reviews };\r\n      case 'REVIEW_ADD':\r\n        return { ...state, reviews: [...state.reviews, action.review] };\r\n      case 'REVIEW_UPDATE':\r\n        return {\r\n          ...state,\r\n          reviews: state.reviews.map(review =>\r\n            review._id === action.review._id ? action.review : review\r\n          )};\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n  ","const initialState = {\r\n    trips: [],\r\n    currTrip: null\r\n\r\n}\r\n\r\n\r\nexport function tripReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_TRIPS':\r\n            return {\r\n                ...state,\r\n                trips: action.trips\r\n            }\r\n        case 'EDIT_TRIP':\r\n            return {\r\n                ...state, currTrip: { ...action.trip }, trips: state.trips.map(trip => {\r\n                    if (action.trip._id === trip._id) return action.trip\r\n                    return trip;\r\n                })\r\n            }\r\n        case 'SET_TRIP':\r\n            return {\r\n                ...state,\r\n                currTrip: { ...action.trip }\r\n            }\r\n\r\n\r\n\r\n\r\n        default:\r\n            return state\r\n    }\r\n}","\r\nlet localLoggedinUser = null;\r\nif (sessionStorage.user) localLoggedinUser = JSON.parse(sessionStorage.user);\r\n\r\nconst initialState = {\r\n    users: [],\r\n    loggedInUser: localLoggedinUser\r\n}\r\n\r\nexport function userReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_USER':\r\n            return {\r\n                users:[...state.users],\r\n                loggedInUser: action.user\r\n            }\r\n        case 'SET_USERS':\r\n            return {\r\n                ...state,\r\n                users: action.users\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { createStore, applyMiddleware, compose, combineReducers } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { modalReducer } from './reducers/modalReducer';\r\nimport { msgReducer } from './reducers/msgReducer';\r\nimport { reviewReducer } from './reducers/reviewReducer';\r\nimport {tripReducer } from './reducers/tripReducer';\r\nimport { userReducer } from './reducers/userReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    tripReducer,\r\n    userReducer,\r\n    modalReducer,\r\n    reviewReducer,\r\n    msgReducer\r\n})\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { App } from './App.jsx';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './store/store';\r\nimport { HashRouter as Router } from 'react-router-dom';\r\nimport { DndProvider } from 'react-dnd'\r\nimport {HTML5Backend} from 'react-dnd-html5-backend'\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <DndProvider backend={HTML5Backend}>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n    </DndProvider>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}